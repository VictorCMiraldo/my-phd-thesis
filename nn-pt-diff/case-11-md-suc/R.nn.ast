(CompilationUnit
 (Just (PackageDecl (Name (: (Ident "hudson") (: (Ident "model") [])))))
 (:
  (ImportDecl
   False
   (Name
    (:
     (Ident "com")
     (:
      (Ident "gargoylesoftware")
      (: (Ident "htmlunit") (: (Ident "FailingHttpStatusCodeException") [])))))
   False)
  (:
   (ImportDecl
    False
    (Name
     (:
      (Ident "com")
      (:
       (Ident "gargoylesoftware")
       (: (Ident "htmlunit") (: (Ident "WebAssert") [])))))
    False)
   (:
    (ImportDecl
     False
     (Name
      (:
       (Ident "com")
       (:
        (Ident "gargoylesoftware")
        (: (Ident "htmlunit") (: (Ident "html") (: (Ident "HtmlForm") []))))))
     False)
    (:
     (ImportDecl
      False
      (Name
       (:
        (Ident "com")
        (:
         (Ident "gargoylesoftware")
         (: (Ident "htmlunit") (: (Ident "html") (: (Ident "HtmlPage") []))))))
      False)
     (:
      (ImportDecl
       False
       (Name
        (:
         (Ident "hudson")
         (: (Ident "security") (: (Ident "AccessDeniedException2") []))))
       False)
      (:
       (ImportDecl
        False
        (Name
         (:
          (Ident "hudson")
          (:
           (Ident "security")
           (: (Ident "GlobalMatrixAuthorizationStrategy") []))))
        False)
       (:
        (ImportDecl
         False
         (Name
          (:
           (Ident "hudson")
           (: (Ident "security") (: (Ident "HudsonPrivateSecurityRealm") []))))
         False)
        (:
         (ImportDecl
          False
          (Name
           (:
            (Ident "hudson")
            (: (Ident "security") (: (Ident "Permission") []))))
          False)
         (:
          (ImportDecl
           False
           (Name
            (:
             (Ident "hudson")
             (: (Ident "tasks") (: (Ident "MailAddressResolver") []))))
           False)
          (:
           (ImportDecl
            False
            (Name (: (Ident "java") (: (Ident "io") (: (Ident "File") []))))
            False)
           (:
            (ImportDecl
             False
             (Name
              (: (Ident "java") (: (Ident "io") (: (Ident "IOException") []))))
             False)
            (:
             (ImportDecl
              False
              (Name
               (: (Ident "java") (: (Ident "io") (: (Ident "PrintStream") []))))
              False)
             (:
              (ImportDecl
               False
               (Name
                (: (Ident "java") (: (Ident "util") (: (Ident "Arrays") []))))
               False)
              (:
               (ImportDecl
                False
                (Name
                 (:
                  (Ident "java")
                  (: (Ident "util") (: (Ident "Collections") []))))
                False)
               (:
                (ImportDecl
                 False
                 (Name
                  (:
                   (Ident "jenkins")
                   (: (Ident "model") (: (Ident "IdStrategy") []))))
                 False)
                (:
                 (ImportDecl
                  False
                  (Name
                   (:
                    (Ident "jenkins")
                    (: (Ident "model") (: (Ident "Jenkins") []))))
                  False)
                 (:
                  (ImportDecl
                   False
                   (Name
                    (:
                     (Ident "jenkins")
                     (: (Ident "security") (: (Ident "ApiTokenProperty") []))))
                   False)
                  (:
                   (ImportDecl
                    False
                    (Name
                     (:
                      (Ident "org")
                      (:
                       (Ident "acegisecurity")
                       (: (Ident "AccessDeniedException") []))))
                    False)
                   (:
                    (ImportDecl
                     False
                     (Name
                      (:
                       (Ident "org")
                       (:
                        (Ident "acegisecurity")
                        (: (Ident "Authentication") []))))
                     False)
                    (:
                     (ImportDecl
                      False
                      (Name
                       (:
                        (Ident "org")
                        (:
                         (Ident "acegisecurity")
                         (:
                          (Ident "context")
                          (: (Ident "SecurityContext") [])))))
                      False)
                     (:
                      (ImportDecl
                       False
                       (Name
                        (:
                         (Ident "org")
                         (:
                          (Ident "acegisecurity")
                          (:
                           (Ident "context")
                           (: (Ident "SecurityContextHolder") [])))))
                       False)
                      (:
                       (ImportDecl
                        True
                        (Name
                         (:
                          (Ident "org")
                          (: (Ident "junit") (: (Ident "Assert") []))))
                        True)
                       (:
                        (ImportDecl
                         True
                         (Name
                          (:
                           (Ident "org")
                           (: (Ident "junit") (: (Ident "Assume") []))))
                         True)
                        (:
                         (ImportDecl
                          False
                          (Name
                           (:
                            (Ident "org")
                            (: (Ident "junit") (: (Ident "Rule") []))))
                          False)
                         (:
                          (ImportDecl
                           False
                           (Name
                            (:
                             (Ident "org")
                             (: (Ident "junit") (: (Ident "Test") []))))
                           False)
                          (:
                           (ImportDecl
                            False
                            (Name
                             (:
                              (Ident "org")
                              (:
                               (Ident "jvnet")
                               (:
                                (Ident "hudson")
                                (: (Ident "test") (: (Ident "Bug") []))))))
                            False)
                           (:
                            (ImportDecl
                             False
                             (Name
                              (:
                               (Ident "org")
                               (:
                                (Ident "jvnet")
                                (:
                                 (Ident "hudson")
                                 (:
                                  (Ident "test")
                                  (: (Ident "FakeChangeLogSCM") []))))))
                             False)
                            (:
                             (ImportDecl
                              False
                              (Name
                               (:
                                (Ident "org")
                                (:
                                 (Ident "jvnet")
                                 (:
                                  (Ident "hudson")
                                  (: (Ident "test") (: (Ident "Issue") []))))))
                              False)
                             (:
                              (ImportDecl
                               False
                               (Name
                                (:
                                 (Ident "org")
                                 (:
                                  (Ident "jvnet")
                                  (:
                                   (Ident "hudson")
                                   (:
                                    (Ident "test")
                                    (: (Ident "JenkinsRule") []))))))
                               False)
                              (:
                               (ImportDecl
                                False
                                (Name
                                 (:
                                  (Ident "org")
                                  (:
                                   (Ident "jvnet")
                                   (:
                                    (Ident "hudson")
                                    (:
                                     (Ident "test")
                                     (: (Ident "TestExtension") []))))))
                                False)
                               (:
                                (ImportDecl
                                 False
                                 (Name
                                  (:
                                   (Ident "org")
                                   (:
                                    (Ident "jvnet")
                                    (:
                                     (Ident "hudson")
                                     (:
                                      (Ident "test")
                                      (:
                                       (Ident "recipes")
                                       (: (Ident "LocalData") [])))))))
                                 False)
                                [])))))))))))))))))))))))))))))))
 (:
  (ClassTypeDecl
   (ClassDecl
    (: Public [])
    (Ident "UserTest")
    []
    Nothing
    []
    (ClassBody
     (:
      (MemberDecl
       (FieldDecl
        (:
         (Annotation (MarkerAnnotation (Name (: (Ident "Rule") []))))
         (: Public []))
        (RefType
         (ClassRefType (ClassType (: ((,) (Ident "JenkinsRule") []) []))))
        (:
         (VarDecl
          (VarId (Ident "j"))
          (Just
           (InitExp
            (InstanceCreation
             []
             (TypeDeclSpecifier
              (ClassType (: ((,) (Ident "JenkinsRule") []) [])))
             []
             Nothing))))
         [])))
      (:
       (MemberDecl
        (MemberClassDecl
         (ClassDecl
          (: Public (: Static []))
          (Ident "UserPropertyImpl")
          []
          (Just
           (ClassRefType (ClassType (: ((,) (Ident "UserProperty") []) []))))
          (: (ClassRefType (ClassType (: ((,) (Ident "Action") []) []))) [])
          (ClassBody
           (:
            (MemberDecl
             (FieldDecl
              (: Private (: Final []))
              (RefType
               (ClassRefType (ClassType (: ((,) (Ident "String") []) []))))
              (: (VarDecl (VarId (Ident "testString")) Nothing) [])))
            (:
             (MemberDecl
              (FieldDecl
               (: Private [])
               (RefType
                (ClassRefType
                 (ClassType (: ((,) (Ident "UserPropertyDescriptor") []) []))))
               (:
                (VarDecl
                 (VarId (Ident "descriptorImpl"))
                 (Just
                  (InitExp
                   (InstanceCreation
                    []
                    (TypeDeclSpecifier
                     (ClassType
                      (: ((,) (Ident "UserPropertyDescriptorImpl") []) [])))
                    []
                    Nothing))))
                [])))
             (:
              (MemberDecl
               (ConstructorDecl
                (: Public [])
                []
                (Ident "UserPropertyImpl")
                (:
                 (FormalParam
                  []
                  (RefType
                   (ClassRefType (ClassType (: ((,) (Ident "String") []) []))))
                  False
                  (VarId (Ident "testString")))
                 [])
                []
                (ConstructorBody
                 Nothing
                 (:
                  (BlockStmt
                   (ExpStmt
                    (Assign
                     (FieldLhs (PrimaryFieldAccess This (Ident "testString")))
                     EqualA
                     (ExpName (Name (: (Ident "testString") []))))))
                  []))))
              (:
               (MemberDecl
                (MethodDecl
                 (: Public [])
                 []
                 (Just
                  (RefType
                   (ClassRefType (ClassType (: ((,) (Ident "String") []) [])))))
                 (Ident "getTestString")
                 []
                 []
                 Nothing
                 (MethodBody
                  (Just
                   (Block
                    (:
                     (BlockStmt
                      (Return
                       (Just (ExpName (Name (: (Ident "testString") []))))))
                     []))))))
               (:
                (MemberDecl
                 (MethodDecl
                  (:
                   (Annotation
                    (MarkerAnnotation (Name (: (Ident "Override") []))))
                   (: Public []))
                  []
                  (Just
                   (RefType
                    (ClassRefType
                     (ClassType
                      (: ((,) (Ident "UserPropertyDescriptor") []) [])))))
                  (Ident "getDescriptor")
                  []
                  []
                  Nothing
                  (MethodBody
                   (Just
                    (Block
                     (:
                      (BlockStmt
                       (Return
                        (Just
                         (ExpName (Name (: (Ident "descriptorImpl") []))))))
                      []))))))
                (:
                 (MemberDecl
                  (MethodDecl
                   (: Public [])
                   []
                   (Just
                    (RefType
                     (ClassRefType
                      (ClassType (: ((,) (Ident "String") []) [])))))
                   (Ident "getIconFileName")
                   []
                   []
                   Nothing
                   (MethodBody
                    (Just
                     (Block
                      (:
                       (BlockStmt
                        (Return (Just (Lit (String "/images/24x24/gear.png")))))
                       []))))))
                 (:
                  (MemberDecl
                   (MethodDecl
                    (: Public [])
                    []
                    (Just
                     (RefType
                      (ClassRefType
                       (ClassType (: ((,) (Ident "String") []) [])))))
                    (Ident "getDisplayName")
                    []
                    []
                    Nothing
                    (MethodBody
                     (Just
                      (Block
                       (:
                        (BlockStmt
                         (Return (Just (Lit (String "UserPropertyImpl")))))
                        []))))))
                  (:
                   (MemberDecl
                    (MethodDecl
                     (: Public [])
                     []
                     (Just
                      (RefType
                       (ClassRefType
                        (ClassType (: ((,) (Ident "String") []) [])))))
                     (Ident "getUrlName")
                     []
                     []
                     Nothing
                     (MethodBody
                      (Just
                       (Block
                        (:
                         (BlockStmt
                          (Return (Just (Lit (String "userpropertyimpl")))))
                         []))))))
                   (:
                    (MemberDecl
                     (MemberClassDecl
                      (ClassDecl
                       (: Public (: Static []))
                       (Ident "UserPropertyDescriptorImpl")
                       []
                       (Just
                        (ClassRefType
                         (ClassType
                          (: ((,) (Ident "UserPropertyDescriptor") []) []))))
                       []
                       (ClassBody
                        (:
                         (MemberDecl
                          (MethodDecl
                           (:
                            (Annotation
                             (MarkerAnnotation
                              (Name (: (Ident "Override") []))))
                            (: Public []))
                           []
                           (Just
                            (RefType
                             (ClassRefType
                              (ClassType
                               (: ((,) (Ident "UserProperty") []) [])))))
                           (Ident "newInstance")
                           (:
                            (FormalParam
                             []
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "User") []) []))))
                             False
                             (VarId (Ident "user")))
                            [])
                           []
                           Nothing
                           (MethodBody
                            (Just
                             (Block
                              (: (BlockStmt (Return (Just (Lit Null)))) []))))))
                         (:
                          (MemberDecl
                           (MethodDecl
                            (:
                             (Annotation
                              (MarkerAnnotation
                               (Name (: (Ident "Override") []))))
                             (: Public []))
                            []
                            (Just
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "String") []) [])))))
                            (Ident "getDisplayName")
                            []
                            []
                            Nothing
                            (MethodBody
                             (Just
                              (Block
                               (:
                                (BlockStmt
                                 (Return (Just (Lit (String "Property")))))
                                []))))))
                          []))))))
                    [])))))))))))))
       (:
        (MemberDecl
         (MethodDecl
          (:
           (Annotation
            (SingleElementAnnotation
             (Name (: (Ident "Bug") []))
             (EVVal (InitExp (Lit (Int 2331))))))
           (:
            (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
            (: Public [])))
          []
          Nothing
          (Ident "userPropertySummaryAndActionAreShownInUserPage")
          []
          (: (ClassRefType (ClassType (: ((,) (Ident "Exception") []) []))) [])
          Nothing
          (MethodBody
           (Just
            (Block
             (:
              (LocalVars
               []
               (RefType
                (ClassRefType
                 (ClassType (: ((,) (Ident "UserProperty") []) []))))
               (:
                (VarDecl
                 (VarId (Ident "property"))
                 (Just
                  (InitExp
                   (InstanceCreation
                    []
                    (TypeDeclSpecifier
                     (ClassType (: ((,) (Ident "UserPropertyImpl") []) [])))
                    (: (Lit (String "NeedleInPage")) [])
                    Nothing))))
                []))
              (:
               (BlockStmt
                (ExpStmt
                 (MethodInv
                  (PrimaryMethodCall
                   (MethodInv
                    (MethodCall
                     (Name (: (Ident "UserProperty") (: (Ident "all") [])))
                     []))
                   []
                   (Ident "add")
                   (:
                    (MethodInv
                     (MethodCall
                      (Name
                       (: (Ident "property") (: (Ident "getDescriptor") [])))
                      []))
                    [])))))
               (:
                (LocalVars
                 []
                 (RefType
                  (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                 (:
                  (VarDecl
                   (VarId (Ident "user"))
                   (Just
                    (InitExp
                     (MethodInv
                      (MethodCall
                       (Name (: (Ident "User") (: (Ident "get") [])))
                       (: (Lit (String "user-test-case")) []))))))
                  []))
                (:
                 (BlockStmt
                  (ExpStmt
                   (MethodInv
                    (MethodCall
                     (Name (: (Ident "user") (: (Ident "addProperty") [])))
                     (: (ExpName (Name (: (Ident "property") []))) [])))))
                 (:
                  (LocalVars
                   []
                   (RefType
                    (ClassRefType
                     (ClassType (: ((,) (Ident "HtmlPage") []) []))))
                   (:
                    (VarDecl
                     (VarId (Ident "page"))
                     (Just
                      (InitExp
                       (MethodInv
                        (PrimaryMethodCall
                         (MethodInv
                          (MethodCall
                           (Name
                            (: (Ident "j") (: (Ident "createWebClient") [])))
                           []))
                         []
                         (Ident "goTo")
                         (: (Lit (String "user/user-test-case")) []))))))
                    []))
                  (:
                   (BlockStmt
                    (ExpStmt
                     (MethodInv
                      (MethodCall
                       (Name
                        (:
                         (Ident "WebAssert")
                         (: (Ident "assertTextPresentInElement") [])))
                       (:
                        (ExpName (Name (: (Ident "page") [])))
                        (:
                         (Lit (String "NeedleInPage"))
                         (: (Lit (String "main-panel")) [])))))))
                   (:
                    (BlockStmt
                     (ExpStmt
                      (MethodInv
                       (MethodCall
                        (Name
                         (:
                          (Ident "WebAssert")
                          (: (Ident "assertTextPresentInElement") [])))
                        (:
                         (ExpName (Name (: (Ident "page") [])))
                         (:
                          (MethodInv
                           (PrimaryMethodCall
                            (Cast
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "Action") []) []))))
                             (ExpName (Name (: (Ident "property") []))))
                            []
                            (Ident "getDisplayName")
                            []))
                          (: (Lit (String "side-panel")) [])))))))
                    []))))))))))))
        (:
         (MemberDecl
          (MethodDecl
           (:
            (Annotation
             (SingleElementAnnotation
              (Name (: (Ident "Bug") []))
              (EVVal (InitExp (Lit (Int 7494))))))
            (:
             (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
             (: Public [])))
           []
           Nothing
           (Ident "defaultUserAvatarCanBeFetched")
           []
           (: (ClassRefType (ClassType (: ((,) (Ident "Exception") []) []))) [])
           Nothing
           (MethodBody
            (Just
             (Block
              (:
               (LocalVars
                []
                (RefType
                 (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                (:
                 (VarDecl
                  (VarId (Ident "user"))
                  (Just
                   (InitExp
                    (MethodInv
                     (MethodCall
                      (Name (: (Ident "User") (: (Ident "get") [])))
                      (:
                       (Lit (String "avatar-user"))
                       (: (Lit (Boolean True)) [])))))))
                 []))
               (:
                (LocalVars
                 []
                 (RefType
                  (ClassRefType (ClassType (: ((,) (Ident "HtmlPage") []) []))))
                 (:
                  (VarDecl
                   (VarId (Ident "page"))
                   (Just
                    (InitExp
                     (MethodInv
                      (PrimaryMethodCall
                       (MethodInv
                        (MethodCall
                         (Name (: (Ident "j") (: (Ident "createWebClient") [])))
                         []))
                       []
                       (Ident "goTo")
                       (:
                        (BinOp
                         (Lit (String "user/"))
                         Add
                         (MethodInv
                          (MethodCall
                           (Name
                            (: (Ident "user") (: (Ident "getDisplayName") [])))
                           [])))
                        []))))))
                  []))
                (:
                 (BlockStmt
                  (ExpStmt
                   (MethodInv
                    (MethodCall
                     (Name
                      (:
                       (Ident "j")
                       (: (Ident "assertAllImageLoadSuccessfully") [])))
                     (: (ExpName (Name (: (Ident "page") []))) [])))))
                 []))))))))
         (:
          (MemberDecl
           (MethodDecl
            (:
             (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
             (: Public []))
            []
            Nothing
            (Ident "getAuthorities")
            []
            (:
             (ClassRefType (ClassType (: ((,) (Ident "Exception") []) [])))
             [])
            Nothing
            (MethodBody
             (Just
              (Block
               (:
                (LocalVars
                 []
                 (RefType
                  (ClassRefType
                   (ClassType
                    (:
                     ((,) (Ident "JenkinsRule") [])
                     (: ((,) (Ident "DummySecurityRealm") []) [])))))
                 (:
                  (VarDecl
                   (VarId (Ident "realm"))
                   (Just
                    (InitExp
                     (MethodInv
                      (MethodCall
                       (Name
                        (:
                         (Ident "j")
                         (: (Ident "createDummySecurityRealm") [])))
                       [])))))
                  []))
                (:
                 (BlockStmt
                  (ExpStmt
                   (MethodInv
                    (MethodCall
                     (Name (: (Ident "realm") (: (Ident "addGroups") [])))
                     (:
                      (Lit (String "administrator"))
                      (: (Lit (String "admins")) []))))))
                 (:
                  (BlockStmt
                   (ExpStmt
                    (MethodInv
                     (MethodCall
                      (Name (: (Ident "realm") (: (Ident "addGroups") [])))
                      (:
                       (Lit (String "alice"))
                       (: (Lit (String "users")) []))))))
                  (:
                   (BlockStmt
                    (ExpStmt
                     (MethodInv
                      (MethodCall
                       (Name (: (Ident "realm") (: (Ident "addGroups") [])))
                       (:
                        (Lit (String "bob"))
                        (:
                         (Lit (String "users"))
                         (:
                          (Lit (String "lpadmin"))
                          (: (Lit (String "bob")) []))))))))
                   (:
                    (BlockStmt
                     (ExpStmt
                      (MethodInv
                       (MethodCall
                        (Name
                         (:
                          (Ident "j")
                          (:
                           (Ident "jenkins")
                           (: (Ident "setSecurityRealm") []))))
                        (: (ExpName (Name (: (Ident "realm") []))) [])))))
                    (:
                     (LocalVars
                      []
                      (RefType
                       (ClassRefType
                        (ClassType
                         (:
                          ((,) (Ident "GlobalMatrixAuthorizationStrategy") [])
                          []))))
                      (:
                       (VarDecl
                        (VarId (Ident "auth"))
                        (Just
                         (InitExp
                          (InstanceCreation
                           []
                           (TypeDeclSpecifier
                            (ClassType
                             (:
                              ((,)
                               (Ident "GlobalMatrixAuthorizationStrategy")
                               [])
                              [])))
                           []
                           Nothing))))
                       []))
                     (:
                      (BlockStmt
                       (ExpStmt
                        (MethodInv
                         (MethodCall
                          (Name (: (Ident "auth") (: (Ident "add") [])))
                          (:
                           (ExpName
                            (Name
                             (: (Ident "Jenkins") (: (Ident "ADMINISTER") []))))
                           (: (Lit (String "admins")) []))))))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "auth") (: (Ident "add") [])))
                           (:
                            (ExpName
                             (Name
                              (: (Ident "Permission") (: (Ident "READ") []))))
                            (: (Lit (String "users")) []))))))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name
                             (:
                              (Ident "j")
                              (:
                               (Ident "jenkins")
                               (: (Ident "setAuthorizationStrategy") []))))
                            (: (ExpName (Name (: (Ident "auth") []))) [])))))
                        (:
                         (LocalVars
                          []
                          (RefType
                           (ClassRefType
                            (ClassType
                             (: ((,) (Ident "SecurityContext") []) []))))
                          (:
                           (VarDecl
                            (VarId (Ident "seccon"))
                            (Just
                             (InitExp
                              (MethodInv
                               (MethodCall
                                (Name
                                 (:
                                  (Ident "SecurityContextHolder")
                                  (: (Ident "getContext") [])))
                                [])))))
                           []))
                         (:
                          (LocalVars
                           []
                           (RefType
                            (ClassRefType
                             (ClassType
                              (: ((,) (Ident "Authentication") []) []))))
                           (:
                            (VarDecl
                             (VarId (Ident "orig"))
                             (Just
                              (InitExp
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "seccon")
                                   (: (Ident "getAuthentication") [])))
                                 [])))))
                            []))
                          (:
                           (BlockStmt
                            (Try
                             (Block
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "seccon")
                                     (: (Ident "setAuthentication") [])))
                                   (:
                                    (MethodInv
                                     (PrimaryMethodCall
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "User")
                                          (: (Ident "get") [])))
                                        (: (Lit (String "administrator")) [])))
                                      []
                                      (Ident "impersonate")
                                      []))
                                    [])))))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name (: (Ident "assertEquals") []))
                                    (:
                                     (Lit (String "[admins]"))
                                     (:
                                      (MethodInv
                                       (PrimaryMethodCall
                                        (MethodInv
                                         (PrimaryMethodCall
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "User")
                                              (: (Ident "get") [])))
                                            (:
                                             (Lit (String "administrator"))
                                             [])))
                                          []
                                          (Ident "getAuthorities")
                                          []))
                                        []
                                        (Ident "toString")
                                        []))
                                      []))))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name (: (Ident "assertEquals") []))
                                     (:
                                      (Lit (String "[users]"))
                                      (:
                                       (MethodInv
                                        (PrimaryMethodCall
                                         (MethodInv
                                          (PrimaryMethodCall
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "User")
                                               (: (Ident "get") [])))
                                             (: (Lit (String "alice")) [])))
                                           []
                                           (Ident "getAuthorities")
                                           []))
                                         []
                                         (Ident "toString")
                                         []))
                                       []))))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name (: (Ident "assertEquals") []))
                                      (:
                                       (Lit (String "[lpadmin, users]"))
                                       (:
                                        (MethodInv
                                         (PrimaryMethodCall
                                          (MethodInv
                                           (PrimaryMethodCall
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "User")
                                                (: (Ident "get") [])))
                                              (: (Lit (String "bob")) [])))
                                            []
                                            (Ident "getAuthorities")
                                            []))
                                          []
                                          (Ident "toString")
                                          []))
                                        []))))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name (: (Ident "assertEquals") []))
                                       (:
                                        (Lit (String "[]"))
                                        (:
                                         (MethodInv
                                          (PrimaryMethodCall
                                           (MethodInv
                                            (PrimaryMethodCall
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "User")
                                                 (: (Ident "get") [])))
                                               (:
                                                (Lit (String "MasterOfXaos"))
                                                [])))
                                             []
                                             (Ident "getAuthorities")
                                             []))
                                           []
                                           (Ident "toString")
                                           []))
                                         []))))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "seccon")
                                          (: (Ident "setAuthentication") [])))
                                        (:
                                         (MethodInv
                                          (PrimaryMethodCall
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "User")
                                               (: (Ident "get") [])))
                                             (: (Lit (String "alice")) [])))
                                           []
                                           (Ident "impersonate")
                                           []))
                                         [])))))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name (: (Ident "assertEquals") []))
                                         (:
                                          (Lit (String "[]"))
                                          (:
                                           (MethodInv
                                            (PrimaryMethodCall
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "User")
                                                   (: (Ident "get") [])))
                                                 (: (Lit (String "alice")) [])))
                                               []
                                               (Ident "getAuthorities")
                                               []))
                                             []
                                             (Ident "toString")
                                             []))
                                           []))))))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name (: (Ident "assertEquals") []))
                                          (:
                                           (Lit (String "[]"))
                                           (:
                                            (MethodInv
                                             (PrimaryMethodCall
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "User")
                                                    (: (Ident "get") [])))
                                                  (: (Lit (String "bob")) [])))
                                                []
                                                (Ident "getAuthorities")
                                                []))
                                              []
                                              (Ident "toString")
                                              []))
                                            []))))))
                                      [])))))))))
                             []
                             (Just
                              (Block
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "seccon")
                                      (: (Ident "setAuthentication") [])))
                                    (:
                                     (ExpName (Name (: (Ident "orig") [])))
                                     [])))))
                                [])))))
                           [])))))))))))))))))
          (:
           (MemberDecl
            (MethodDecl
             (:
              (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
              (: Public []))
             []
             Nothing
             (Ident "testGetUser")
             []
             []
             Nothing
             (MethodBody
              (Just
               (Block
                (:
                 (LocalVars
                  []
                  (RefType
                   (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                  (:
                   (VarDecl
                    (VarId (Ident "user"))
                    (Just
                     (InitExp
                      (MethodInv
                       (MethodCall
                        (Name (: (Ident "User") (: (Ident "get") [])))
                        (: (Lit (String "John Smith")) []))))))
                   []))
                 (:
                  (LocalVars
                   []
                   (RefType
                    (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                   (:
                    (VarDecl
                     (VarId (Ident "user2"))
                     (Just
                      (InitExp
                       (MethodInv
                        (MethodCall
                         (Name (: (Ident "User") (: (Ident "get") [])))
                         (: (Lit (String "John Smith2")) []))))))
                    []))
                  (:
                   (BlockStmt
                    (ExpStmt
                     (MethodInv
                      (MethodCall
                       (Name (: (Ident "user2") (: (Ident "setFullName") [])))
                       (: (Lit (String "John Smith")) [])))))
                   (:
                    (BlockStmt
                     (ExpStmt
                      (MethodInv
                       (MethodCall
                        (Name (: (Ident "assertNotSame") []))
                        (:
                         (Lit (String "Users should not have the same id."))
                         (:
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "user") (: (Ident "getId") [])))
                            []))
                          (:
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "user2") (: (Ident "getId") [])))
                             []))
                           [])))))))
                    (:
                     (BlockStmt
                      (ExpStmt
                       (MethodInv
                        (MethodCall
                         (Name (: (Ident "User") (: (Ident "clear") [])))
                         []))))
                     (:
                      (LocalVars
                       []
                       (RefType
                        (ClassRefType
                         (ClassType (: ((,) (Ident "User") []) []))))
                       (:
                        (VarDecl
                         (VarId (Ident "user3"))
                         (Just
                          (InitExp
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "User") (: (Ident "get") [])))
                             (: (Lit (String "John Smith")) []))))))
                        []))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name
                            (: (Ident "user3") (: (Ident "setFullName") [])))
                           (: (Lit (String "Alice Smith")) [])))))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "assertEquals") []))
                            (:
                             (Lit (String "Users should not have the same id."))
                             (:
                              (MethodInv
                               (MethodCall
                                (Name (: (Ident "user") (: (Ident "getId") [])))
                                []))
                              (:
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (: (Ident "user3") (: (Ident "getId") [])))
                                 []))
                               [])))))))
                        (:
                         (LocalVars
                          []
                          (RefType
                           (ClassRefType
                            (ClassType (: ((,) (Ident "User") []) []))))
                          (:
                           (VarDecl
                            (VarId (Ident "user4"))
                            (Just
                             (InitExp
                              (MethodInv
                               (MethodCall
                                (Name (: (Ident "User") (: (Ident "get") [])))
                                (:
                                 (Lit (String "Marie"))
                                 (:
                                  (Lit (Boolean False))
                                  (:
                                   (ExpName
                                    (Name
                                     (:
                                      (Ident "Collections")
                                      (: (Ident "EMPTY_MAP") []))))
                                   []))))))))
                           []))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertNull") []))
                              (:
                               (Lit
                                (String
                                 "User should not be created because Marie does not exists."))
                               (:
                                (ExpName (Name (: (Ident "user4") [])))
                                []))))))
                          [])))))))))))))))
           (:
            (MemberDecl
             (MethodDecl
              (:
               (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
               (: Public []))
              []
              Nothing
              (Ident "caseInsensitivity")
              []
              []
              Nothing
              (MethodBody
               (Just
                (Block
                 (:
                  (BlockStmt
                   (ExpStmt
                    (MethodInv
                     (MethodCall
                      (Name
                       (:
                        (Ident "j")
                        (:
                         (Ident "jenkins")
                         (: (Ident "setSecurityRealm") []))))
                      (:
                       (InstanceCreation
                        []
                        (TypeDeclSpecifier
                         (ClassType
                          (: ((,) (Ident "HudsonPrivateSecurityRealm") []) [])))
                        (:
                         (Lit (Boolean True))
                         (: (Lit (Boolean False)) (: (Lit Null) [])))
                        (Just
                         (ClassBody
                          (:
                           (MemberDecl
                            (MethodDecl
                             (:
                              (Annotation
                               (MarkerAnnotation
                                (Name (: (Ident "Override") []))))
                              (: Public []))
                             []
                             (Just
                              (RefType
                               (ClassRefType
                                (ClassType
                                 (: ((,) (Ident "IdStrategy") []) [])))))
                             (Ident "getUserIdStrategy")
                             []
                             []
                             Nothing
                             (MethodBody
                              (Just
                               (Block
                                (:
                                 (BlockStmt
                                  (Return
                                   (Just
                                    (InstanceCreation
                                     []
                                     (TypeDeclSpecifier
                                      (ClassType
                                       (:
                                        ((,) (Ident "IdStrategy") [])
                                        (:
                                         ((,) (Ident "CaseInsensitive") [])
                                         []))))
                                     []
                                     Nothing))))
                                 []))))))
                           []))))
                       [])))))
                  (:
                   (LocalVars
                    []
                    (RefType
                     (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                    (:
                     (VarDecl
                      (VarId (Ident "user"))
                      (Just
                       (InitExp
                        (MethodInv
                         (MethodCall
                          (Name (: (Ident "User") (: (Ident "get") [])))
                          (: (Lit (String "john smith")) []))))))
                     []))
                   (:
                    (LocalVars
                     []
                     (RefType
                      (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                     (:
                      (VarDecl
                       (VarId (Ident "user2"))
                       (Just
                        (InitExp
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "User") (: (Ident "get") [])))
                           (: (Lit (String "John Smith")) []))))))
                      []))
                    (:
                     (BlockStmt
                      (ExpStmt
                       (MethodInv
                        (MethodCall
                         (Name (: (Ident "assertSame") []))
                         (:
                          (Lit (String "Users should have the same id."))
                          (:
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "user") (: (Ident "getId") [])))
                             []))
                           (:
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "user2") (: (Ident "getId") [])))
                              []))
                            [])))))))
                     (:
                      (BlockStmt
                       (ExpStmt
                        (MethodInv
                         (MethodCall
                          (Name (: (Ident "assertEquals") []))
                          (:
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "user") (: (Ident "getId") [])))
                             []))
                           (:
                            (MethodInv
                             (PrimaryMethodCall
                              (MethodInv
                               (MethodCall
                                (Name
                                 (: (Ident "User") (: (Ident "idStrategy") [])))
                                []))
                              []
                              (Ident "idFromFilename")
                              (:
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "User")
                                     (: (Ident "idStrategy") [])))
                                   []))
                                 []
                                 (Ident "filenameOf")
                                 (:
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "user") (: (Ident "getId") [])))
                                    []))
                                  [])))
                               [])))
                            []))))))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "assertEquals") []))
                           (:
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "user2") (: (Ident "getId") [])))
                              []))
                            (:
                             (MethodInv
                              (PrimaryMethodCall
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "User")
                                   (: (Ident "idStrategy") [])))
                                 []))
                               []
                               (Ident "idFromFilename")
                               (:
                                (MethodInv
                                 (PrimaryMethodCall
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "User")
                                      (: (Ident "idStrategy") [])))
                                    []))
                                  []
                                  (Ident "filenameOf")
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user2")
                                       (: (Ident "getId") [])))
                                     []))
                                   [])))
                                [])))
                             []))))))
                       [])))))))))))
            (:
             (MemberDecl
              (MethodDecl
               (:
                (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
                (: Public []))
               []
               Nothing
               (Ident "caseSensitivity")
               []
               []
               Nothing
               (MethodBody
                (Just
                 (Block
                  (:
                   (BlockStmt
                    (ExpStmt
                     (MethodInv
                      (MethodCall
                       (Name
                        (:
                         (Ident "j")
                         (:
                          (Ident "jenkins")
                          (: (Ident "setSecurityRealm") []))))
                       (:
                        (InstanceCreation
                         []
                         (TypeDeclSpecifier
                          (ClassType
                           (:
                            ((,) (Ident "HudsonPrivateSecurityRealm") [])
                            [])))
                         (:
                          (Lit (Boolean True))
                          (: (Lit (Boolean False)) (: (Lit Null) [])))
                         (Just
                          (ClassBody
                           (:
                            (MemberDecl
                             (MethodDecl
                              (:
                               (Annotation
                                (MarkerAnnotation
                                 (Name (: (Ident "Override") []))))
                               (: Public []))
                              []
                              (Just
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (: ((,) (Ident "IdStrategy") []) [])))))
                              (Ident "getUserIdStrategy")
                              []
                              []
                              Nothing
                              (MethodBody
                               (Just
                                (Block
                                 (:
                                  (BlockStmt
                                   (Return
                                    (Just
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifier
                                       (ClassType
                                        (:
                                         ((,) (Ident "IdStrategy") [])
                                         (:
                                          ((,) (Ident "CaseSensitive") [])
                                          []))))
                                      []
                                      Nothing))))
                                  []))))))
                            []))))
                        [])))))
                   (:
                    (LocalVars
                     []
                     (RefType
                      (ClassRefType (ClassType (: ((,) (Ident "User") []) []))))
                     (:
                      (VarDecl
                       (VarId (Ident "user"))
                       (Just
                        (InitExp
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "User") (: (Ident "get") [])))
                           (: (Lit (String "john smith")) []))))))
                      []))
                    (:
                     (LocalVars
                      []
                      (RefType
                       (ClassRefType
                        (ClassType (: ((,) (Ident "User") []) []))))
                      (:
                       (VarDecl
                        (VarId (Ident "user2"))
                        (Just
                         (InitExp
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "User") (: (Ident "get") [])))
                            (: (Lit (String "John Smith")) []))))))
                       []))
                     (:
                      (BlockStmt
                       (ExpStmt
                        (MethodInv
                         (MethodCall
                          (Name (: (Ident "assertNotSame") []))
                          (:
                           (Lit (String "Users should not have the same id."))
                           (:
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "user") (: (Ident "getId") [])))
                              []))
                            (:
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "user2") (: (Ident "getId") [])))
                               []))
                             [])))))))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "assertEquals") []))
                           (:
                            (Lit (String "john smith"))
                            (:
                             (MethodInv
                              (PrimaryMethodCall
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "User")
                                   (: (Ident "idStrategy") [])))
                                 []))
                               []
                               (Ident "keyFor")
                               (:
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (: (Ident "user") (: (Ident "getId") [])))
                                  []))
                                [])))
                             []))))))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "assertEquals") []))
                            (:
                             (Lit (String "john smith"))
                             (:
                              (MethodInv
                               (PrimaryMethodCall
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "User")
                                    (: (Ident "idStrategy") [])))
                                  []))
                                []
                                (Ident "filenameOf")
                                (:
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "user") (: (Ident "getId") [])))
                                   []))
                                 [])))
                              []))))))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertEquals") []))
                             (:
                              (Lit (String "John Smith"))
                              (:
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "User")
                                     (: (Ident "idStrategy") [])))
                                   []))
                                 []
                                 (Ident "keyFor")
                                 (:
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "user2") (: (Ident "getId") [])))
                                    []))
                                  [])))
                               []))))))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertEquals") []))
                              (:
                               (Lit (String "~john ~smith"))
                               (:
                                (MethodInv
                                 (PrimaryMethodCall
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "User")
                                      (: (Ident "idStrategy") [])))
                                    []))
                                  []
                                  (Ident "filenameOf")
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user2")
                                       (: (Ident "getId") [])))
                                     []))
                                   [])))
                                []))))))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "assertEquals") []))
                               (:
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (: (Ident "user") (: (Ident "getId") [])))
                                  []))
                                (:
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "User")
                                       (: (Ident "idStrategy") [])))
                                     []))
                                   []
                                   (Ident "idFromFilename")
                                   (:
                                    (MethodInv
                                     (PrimaryMethodCall
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "User")
                                          (: (Ident "idStrategy") [])))
                                        []))
                                      []
                                      (Ident "filenameOf")
                                      (:
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "user")
                                           (: (Ident "getId") [])))
                                         []))
                                       [])))
                                    [])))
                                 []))))))
                           (:
                            (BlockStmt
                             (ExpStmt
                              (MethodInv
                               (MethodCall
                                (Name (: (Ident "assertEquals") []))
                                (:
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "user2") (: (Ident "getId") [])))
                                   []))
                                 (:
                                  (MethodInv
                                   (PrimaryMethodCall
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "User")
                                        (: (Ident "idStrategy") [])))
                                      []))
                                    []
                                    (Ident "idFromFilename")
                                    (:
                                     (MethodInv
                                      (PrimaryMethodCall
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "User")
                                           (: (Ident "idStrategy") [])))
                                         []))
                                       []
                                       (Ident "filenameOf")
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "user2")
                                            (: (Ident "getId") [])))
                                          []))
                                        [])))
                                     [])))
                                  []))))))
                            [])))))))))))))))
             (:
              (MemberDecl
               (MethodDecl
                (:
                 (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
                 (: Public []))
                []
                Nothing
                (Ident "caseSensitivityEmail")
                []
                []
                Nothing
                (MethodBody
                 (Just
                  (Block
                   (:
                    (BlockStmt
                     (ExpStmt
                      (MethodInv
                       (MethodCall
                        (Name
                         (:
                          (Ident "j")
                          (:
                           (Ident "jenkins")
                           (: (Ident "setSecurityRealm") []))))
                        (:
                         (InstanceCreation
                          []
                          (TypeDeclSpecifier
                           (ClassType
                            (:
                             ((,) (Ident "HudsonPrivateSecurityRealm") [])
                             [])))
                          (:
                           (Lit (Boolean True))
                           (: (Lit (Boolean False)) (: (Lit Null) [])))
                          (Just
                           (ClassBody
                            (:
                             (MemberDecl
                              (MethodDecl
                               (:
                                (Annotation
                                 (MarkerAnnotation
                                  (Name (: (Ident "Override") []))))
                                (: Public []))
                               []
                               (Just
                                (RefType
                                 (ClassRefType
                                  (ClassType
                                   (: ((,) (Ident "IdStrategy") []) [])))))
                               (Ident "getUserIdStrategy")
                               []
                               []
                               Nothing
                               (MethodBody
                                (Just
                                 (Block
                                  (:
                                   (BlockStmt
                                    (Return
                                     (Just
                                      (InstanceCreation
                                       []
                                       (TypeDeclSpecifier
                                        (ClassType
                                         (:
                                          ((,) (Ident "IdStrategy") [])
                                          (:
                                           ((,)
                                            (Ident "CaseSensitiveEmailAddress")
                                            [])
                                           []))))
                                       []
                                       Nothing))))
                                   []))))))
                             []))))
                         [])))))
                    (:
                     (LocalVars
                      []
                      (RefType
                       (ClassRefType
                        (ClassType (: ((,) (Ident "User") []) []))))
                      (:
                       (VarDecl
                        (VarId (Ident "user"))
                        (Just
                         (InitExp
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "User") (: (Ident "get") [])))
                            (: (Lit (String "john.smith@acme.org")) []))))))
                       []))
                     (:
                      (LocalVars
                       []
                       (RefType
                        (ClassRefType
                         (ClassType (: ((,) (Ident "User") []) []))))
                       (:
                        (VarDecl
                         (VarId (Ident "user2"))
                         (Just
                          (InitExp
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "User") (: (Ident "get") [])))
                             (: (Lit (String "John.Smith@acme.org")) []))))))
                        []))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "assertNotSame") []))
                           (:
                            (Lit (String "Users should not have the same id."))
                            (:
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "user") (: (Ident "getId") [])))
                               []))
                             (:
                              (MethodInv
                               (MethodCall
                                (Name
                                 (: (Ident "user2") (: (Ident "getId") [])))
                                []))
                              [])))))))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "assertEquals") []))
                            (:
                             (Lit (String "john.smith@acme.org"))
                             (:
                              (MethodInv
                               (PrimaryMethodCall
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "User")
                                    (: (Ident "idStrategy") [])))
                                  []))
                                []
                                (Ident "keyFor")
                                (:
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "user") (: (Ident "getId") [])))
                                   []))
                                 [])))
                              []))))))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertEquals") []))
                             (:
                              (Lit (String "john.smith@acme.org"))
                              (:
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "User")
                                     (: (Ident "idStrategy") [])))
                                   []))
                                 []
                                 (Ident "filenameOf")
                                 (:
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "user") (: (Ident "getId") [])))
                                    []))
                                  [])))
                               []))))))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertEquals") []))
                              (:
                               (Lit (String "John.Smith@acme.org"))
                               (:
                                (MethodInv
                                 (PrimaryMethodCall
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "User")
                                      (: (Ident "idStrategy") [])))
                                    []))
                                  []
                                  (Ident "keyFor")
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user2")
                                       (: (Ident "getId") [])))
                                     []))
                                   [])))
                                []))))))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "assertEquals") []))
                               (:
                                (Lit (String "~john.~smith@acme.org"))
                                (:
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "User")
                                       (: (Ident "idStrategy") [])))
                                     []))
                                   []
                                   (Ident "filenameOf")
                                   (:
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "user2")
                                        (: (Ident "getId") [])))
                                      []))
                                    [])))
                                 []))))))
                           (:
                            (BlockStmt
                             (ExpStmt
                              (Assign
                               (NameLhs (Name (: (Ident "user2") [])))
                               EqualA
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "User") (: (Ident "get") [])))
                                 (:
                                  (Lit (String "john.smith@ACME.ORG"))
                                  []))))))
                            (:
                             (BlockStmt
                              (ExpStmt
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "assertEquals") []))
                                 (:
                                  (Lit
                                   (String "Users should have the same id."))
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (: (Ident "user") (: (Ident "getId") [])))
                                     []))
                                   (:
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "user2")
                                        (: (Ident "getId") [])))
                                      []))
                                    [])))))))
                             (:
                              (BlockStmt
                               (ExpStmt
                                (MethodInv
                                 (MethodCall
                                  (Name (: (Ident "assertEquals") []))
                                  (:
                                   (Lit (String "john.smith@acme.org"))
                                   (:
                                    (MethodInv
                                     (PrimaryMethodCall
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "User")
                                          (: (Ident "idStrategy") [])))
                                        []))
                                      []
                                      (Ident "keyFor")
                                      (:
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "user2")
                                           (: (Ident "getId") [])))
                                         []))
                                       [])))
                                    []))))))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name (: (Ident "assertEquals") []))
                                   (:
                                    (Lit (String "john.smith@acme.org"))
                                    (:
                                     (MethodInv
                                      (PrimaryMethodCall
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "User")
                                           (: (Ident "idStrategy") [])))
                                         []))
                                       []
                                       (Ident "filenameOf")
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "user2")
                                            (: (Ident "getId") [])))
                                          []))
                                        [])))
                                     []))))))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name (: (Ident "assertEquals") []))
                                    (:
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "user")
                                         (: (Ident "getId") [])))
                                       []))
                                     (:
                                      (MethodInv
                                       (PrimaryMethodCall
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "User")
                                            (: (Ident "idStrategy") [])))
                                          []))
                                        []
                                        (Ident "idFromFilename")
                                        (:
                                         (MethodInv
                                          (PrimaryMethodCall
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "User")
                                               (: (Ident "idStrategy") [])))
                                             []))
                                           []
                                           (Ident "filenameOf")
                                           (:
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "user")
                                                (: (Ident "getId") [])))
                                              []))
                                            [])))
                                         [])))
                                      []))))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name (: (Ident "assertEquals") []))
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "user2")
                                          (: (Ident "getId") [])))
                                        []))
                                      (:
                                       (MethodInv
                                        (PrimaryMethodCall
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "User")
                                             (: (Ident "idStrategy") [])))
                                           []))
                                         []
                                         (Ident "idFromFilename")
                                         (:
                                          (MethodInv
                                           (PrimaryMethodCall
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "User")
                                                (: (Ident "idStrategy") [])))
                                              []))
                                            []
                                            (Ident "filenameOf")
                                            (:
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "user2")
                                                 (: (Ident "getId") [])))
                                               []))
                                             [])))
                                          [])))
                                       []))))))
                                 [])))))))))))))))))))
              (:
               (MemberDecl
                (MethodDecl
                 (:
                  (Annotation
                   (SingleElementAnnotation
                    (Name (: (Ident "Issue") []))
                    (EVVal (InitExp (Lit (String "JENKINS-24317"))))))
                  (:
                   (Annotation
                    (MarkerAnnotation (Name (: (Ident "LocalData") []))))
                   (:
                    (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
                    (: Public []))))
                 []
                 Nothing
                 (Ident "migration")
                 []
                 (:
                  (ClassRefType (ClassType (: ((,) (Ident "Exception") []) [])))
                  [])
                 Nothing
                 (MethodBody
                  (Just
                   (Block
                    (:
                     (BlockStmt
                      (ExpStmt
                       (MethodInv
                        (MethodCall
                         (Name (: (Ident "assumeFalse") []))
                         (:
                          (Lit
                           (String
                            "was not a problem on a case-insensitive FS to begin with"))
                          (:
                           (MethodInv
                            (PrimaryMethodCall
                             (InstanceCreation
                              []
                              (TypeDeclSpecifier
                               (ClassType (: ((,) (Ident "File") []) [])))
                              (:
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "j")
                                   (:
                                    (Ident "jenkins")
                                    (: (Ident "getRootDir") []))))
                                 []))
                               (: (Lit (String "users/bob")) []))
                              Nothing)
                             []
                             (Ident "isDirectory")
                             []))
                           []))))))
                     (:
                      (LocalVars
                       []
                       (RefType
                        (ClassRefType
                         (ClassType (: ((,) (Ident "User") []) []))))
                       (:
                        (VarDecl
                         (VarId (Ident "bob"))
                         (Just
                          (InitExp
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "User") (: (Ident "get") [])))
                             (: (Lit (String "bob")) []))))))
                        []))
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name (: (Ident "assertEquals") []))
                           (:
                            (Lit (String "Bob Smith"))
                            (:
                             (MethodInv
                              (MethodCall
                               (Name
                                (: (Ident "bob") (: (Ident "getFullName") [])))
                               []))
                             []))))))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name (: (Ident "assertEquals") []))
                            (:
                             (Lit (String "Bob Smith"))
                             (:
                              (MethodInv
                               (PrimaryMethodCall
                                (MethodInv
                                 (MethodCall
                                  (Name (: (Ident "User") (: (Ident "get") [])))
                                  (: (Lit (String "Bob")) [])))
                                []
                                (Ident "getFullName")
                                []))
                              []))))))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertEquals") []))
                             (:
                              (Lit (String "nonexistent"))
                              (:
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "get") [])))
                                   (: (Lit (String "nonexistent")) [])))
                                 []
                                 (Ident "getFullName")
                                 []))
                               []))))))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertEquals") []))
                              (:
                               (Lit (String "[bob]"))
                               (:
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "Arrays")
                                    (: (Ident "toString") [])))
                                  (:
                                   (MethodInv
                                    (PrimaryMethodCall
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifier
                                       (ClassType
                                        (: ((,) (Ident "File") []) [])))
                                      (:
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "j")
                                           (:
                                            (Ident "jenkins")
                                            (: (Ident "getRootDir") []))))
                                         []))
                                       (: (Lit (String "users")) []))
                                      Nothing)
                                     []
                                     (Ident "list")
                                     []))
                                   [])))
                                []))))))
                          [])))))))))))
               (:
                (MemberDecl
                 (MethodDecl
                  (:
                   (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
                   (: Public []))
                  []
                  Nothing
                  (Ident "testAddAndGetProperty")
                  []
                  (:
                   (ClassRefType
                    (ClassType (: ((,) (Ident "IOException") []) [])))
                   [])
                  Nothing
                  (MethodBody
                   (Just
                    (Block
                     (:
                      (LocalVars
                       []
                       (RefType
                        (ClassRefType
                         (ClassType (: ((,) (Ident "User") []) []))))
                       (:
                        (VarDecl
                         (VarId (Ident "user"))
                         (Just
                          (InitExp
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "User") (: (Ident "get") [])))
                             (: (Lit (String "John Smith")) []))))))
                        []))
                      (:
                       (LocalVars
                        []
                        (RefType
                         (ClassRefType
                          (ClassType (: ((,) (Ident "UserProperty") []) []))))
                        (:
                         (VarDecl
                          (VarId (Ident "prop"))
                          (Just
                           (InitExp
                            (InstanceCreation
                             []
                             (TypeDeclSpecifier
                              (ClassType
                               (: ((,) (Ident "SomeUserProperty") []) [])))
                             []
                             Nothing))))
                         []))
                       (:
                        (BlockStmt
                         (ExpStmt
                          (MethodInv
                           (MethodCall
                            (Name
                             (: (Ident "user") (: (Ident "addProperty") [])))
                            (: (ExpName (Name (: (Ident "prop") []))) [])))))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertNotNull") []))
                             (:
                              (Lit
                               (String
                                "User should have SomeUserProperty property."))
                              (:
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "user")
                                   (: (Ident "getProperty") [])))
                                 (:
                                  (ClassLit
                                   (Just
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,) (Ident "SomeUserProperty") [])
                                        []))))))
                                  [])))
                               []))))))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertEquals") []))
                              (:
                               (Lit
                                (String
                                 "UserProperty1 should be assigned to its descriptor"))
                               (:
                                (ExpName (Name (: (Ident "prop") [])))
                                (:
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user")
                                       (: (Ident "getProperties") [])))
                                     []))
                                   []
                                   (Ident "get")
                                   (:
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "prop")
                                        (: (Ident "getDescriptor") [])))
                                      []))
                                    [])))
                                 [])))))))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "assertTrue") []))
                               (:
                                (Lit
                                 (String
                                  "User should should contains SomeUserProperty."))
                                (:
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user")
                                       (: (Ident "getAllProperties") [])))
                                     []))
                                   []
                                   (Ident "contains")
                                   (:
                                    (ExpName (Name (: (Ident "prop") [])))
                                    [])))
                                 []))))))
                           (:
                            (BlockStmt
                             (ExpStmt
                              (MethodInv
                               (MethodCall
                                (Name
                                 (: (Ident "User") (: (Ident "reload") [])))
                                []))))
                            (:
                             (BlockStmt
                              (ExpStmt
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "assertNotNull") []))
                                 (:
                                  (Lit
                                   (String
                                    "User should have SomeUserProperty property."))
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user")
                                       (: (Ident "getProperty") [])))
                                     (:
                                      (ClassLit
                                       (Just
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "SomeUserProperty") [])
                                            []))))))
                                      [])))
                                   []))))))
                             [])))))))))))))
                (:
                 (MemberDecl
                  (MethodDecl
                   (:
                    (Annotation (MarkerAnnotation (Name (: (Ident "Test") []))))
                    (: Public []))
                   []
                   Nothing
                   (Ident "testImpersonateAndCurrent")
                   []
                   []
                   Nothing
                   (MethodBody
                    (Just
                     (Block
                      (:
                       (BlockStmt
                        (ExpStmt
                         (MethodInv
                          (MethodCall
                           (Name
                            (:
                             (Ident "j")
                             (:
                              (Ident "jenkins")
                              (: (Ident "setSecurityRealm") []))))
                           (:
                            (MethodInv
                             (MethodCall
                              (Name
                               (:
                                (Ident "j")
                                (: (Ident "createDummySecurityRealm") [])))
                              []))
                            [])))))
                       (:
                        (LocalVars
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "User") []) []))))
                         (:
                          (VarDecl
                           (VarId (Ident "user"))
                           (Just
                            (InitExp
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "User") (: (Ident "get") [])))
                               (: (Lit (String "John Smith")) []))))))
                          []))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertNotSame") []))
                             (:
                              (Lit
                               (String
                                "User John Smith should not be the current user."))
                              (:
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "current") [])))
                                   []))
                                 []
                                 (Ident "getId")
                                 []))
                               (:
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (: (Ident "user") (: (Ident "getId") [])))
                                  []))
                                [])))))))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (PrimaryMethodCall
                              (MethodInv
                               (MethodCall
                                (Name
                                 (:
                                  (Ident "SecurityContextHolder")
                                  (: (Ident "getContext") [])))
                                []))
                              []
                              (Ident "setAuthentication")
                              (:
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "user")
                                   (: (Ident "impersonate") [])))
                                 []))
                               [])))))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "assertEquals") []))
                               (:
                                (Lit
                                 (String
                                  "User John Smith should be the current user."))
                                (:
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "user") (: (Ident "getId") [])))
                                   []))
                                 (:
                                  (MethodInv
                                   (PrimaryMethodCall
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "User")
                                        (: (Ident "current") [])))
                                      []))
                                    []
                                    (Ident "getId")
                                    []))
                                  [])))))))
                           []))))))))))
                 (:
                  (MemberDecl
                   (MethodDecl
                    (:
                     (Annotation
                      (MarkerAnnotation (Name (: (Ident "Test") []))))
                     (: Public []))
                    []
                    Nothing
                    (Ident "testGetUnknown")
                    []
                    []
                    Nothing
                    (MethodBody
                     (Just
                      (Block
                       (:
                        (LocalVars
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "User") []) []))))
                         (:
                          (VarDecl
                           (VarId (Ident "user"))
                           (Just
                            (InitExp
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "User") (: (Ident "get") [])))
                               (: (Lit (String "John Smith")) []))))))
                          []))
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name (: (Ident "assertNotNull") []))
                             (:
                              (Lit (String "User should not be null."))
                              (: (ExpName (Name (: (Ident "user") []))) []))))))
                         [])))))))
                  (:
                   (MemberDecl
                    (MethodDecl
                     (:
                      (Annotation
                       (MarkerAnnotation (Name (: (Ident "Test") []))))
                      (: Public []))
                     []
                     Nothing
                     (Ident "testGetAndGetAll")
                     []
                     []
                     Nothing
                     (MethodBody
                      (Just
                       (Block
                        (:
                         (LocalVars
                          []
                          (RefType
                           (ClassRefType
                            (ClassType (: ((,) (Ident "User") []) []))))
                          (:
                           (VarDecl
                            (VarId (Ident "user"))
                            (Just
                             (InitExp
                              (MethodInv
                               (MethodCall
                                (Name (: (Ident "User") (: (Ident "get") [])))
                                (:
                                 (Lit (String "John Smith"))
                                 (:
                                  (Lit (Boolean False))
                                  (:
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "Collections")
                                       (: (Ident "emptyMap") [])))
                                     []))
                                   []))))))))
                           []))
                         (:
                          (BlockStmt
                           (ExpStmt
                            (MethodInv
                             (MethodCall
                              (Name (: (Ident "assertNull") []))
                              (:
                               (Lit
                                (String
                                 "User John Smith should not be created."))
                               (:
                                (ExpName (Name (: (Ident "user") [])))
                                []))))))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "assertFalse") []))
                               (:
                                (Lit
                                 (String
                                  "Jenkins should not contain user John Smith."))
                                (:
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "User")
                                       (: (Ident "getAll") [])))
                                     []))
                                   []
                                   (Ident "contains")
                                   (:
                                    (ExpName (Name (: (Ident "user") [])))
                                    [])))
                                 []))))))
                           (:
                            (LocalVars
                             []
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "User") []) []))))
                             (:
                              (VarDecl
                               (VarId (Ident "user2"))
                               (Just
                                (InitExp
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "get") [])))
                                   (:
                                    (Lit (String "John Smith2"))
                                    (:
                                     (Lit (Boolean True))
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "Collections")
                                          (: (Ident "emptyMap") [])))
                                        []))
                                      []))))))))
                              []))
                            (:
                             (BlockStmt
                              (ExpStmt
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "assertNotNull") []))
                                 (:
                                  (Lit
                                   (String
                                    "User John Smith2 should be created."))
                                  (:
                                   (ExpName (Name (: (Ident "user2") [])))
                                   []))))))
                             (:
                              (BlockStmt
                               (ExpStmt
                                (MethodInv
                                 (MethodCall
                                  (Name (: (Ident "assertTrue") []))
                                  (:
                                   (Lit
                                    (String
                                     "Jenkins should contain user John Smith2."))
                                   (:
                                    (MethodInv
                                     (PrimaryMethodCall
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "User")
                                          (: (Ident "getAll") [])))
                                        []))
                                      []
                                      (Ident "contains")
                                      (:
                                       (ExpName (Name (: (Ident "user2") [])))
                                       [])))
                                    []))))))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (Assign
                                  (NameLhs (Name (: (Ident "user") [])))
                                  EqualA
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "User") (: (Ident "get") [])))
                                    (:
                                     (Lit (String "John Smith2"))
                                     (:
                                      (Lit (Boolean False))
                                      (:
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "Collections")
                                           (: (Ident "emptyMap") [])))
                                         []))
                                       []))))))))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name (: (Ident "assertNotNull") []))
                                    (:
                                     (Lit
                                      (String
                                       "User John Smith should be created."))
                                     (:
                                      (ExpName (Name (: (Ident "user") [])))
                                      []))))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name (: (Ident "assertTrue") []))
                                     (:
                                      (Lit
                                       (String
                                        "Jenkins should contain user John Smith."))
                                      (:
                                       (MethodInv
                                        (PrimaryMethodCall
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "User")
                                             (: (Ident "getAll") [])))
                                           []))
                                         []
                                         (Ident "contains")
                                         (:
                                          (ExpName (Name (: (Ident "user") [])))
                                          [])))
                                       []))))))
                                 []))))))))))))))
                   (:
                    (MemberDecl
                     (MethodDecl
                      (:
                       (Annotation
                        (MarkerAnnotation (Name (: (Ident "Test") []))))
                       (: Public []))
                      []
                      Nothing
                      (Ident "testReload")
                      []
                      (:
                       (ClassRefType
                        (ClassType (: ((,) (Ident "IOException") []) [])))
                       [])
                      Nothing
                      (MethodBody
                       (Just
                        (Block
                         (:
                          (LocalVars
                           []
                           (RefType
                            (ClassRefType
                             (ClassType (: ((,) (Ident "User") []) []))))
                           (:
                            (VarDecl
                             (VarId (Ident "user"))
                             (Just
                              (InitExp
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "User") (: (Ident "get") [])))
                                 (:
                                  (Lit (String "John Smith"))
                                  (:
                                   (Lit (Boolean True))
                                   (:
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "Collections")
                                        (: (Ident "emptyMap") [])))
                                      []))
                                    []))))))))
                            []))
                          (:
                           (BlockStmt
                            (ExpStmt
                             (MethodInv
                              (MethodCall
                               (Name (: (Ident "user") (: (Ident "save") [])))
                               []))))
                           (:
                            (LocalVars
                             []
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "String") []) []))))
                             (:
                              (VarDecl
                               (VarId (Ident "config"))
                               (Just
                                (InitExp
                                 (MethodInv
                                  (PrimaryMethodCall
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user")
                                       (: (Ident "getConfigFile") [])))
                                     []))
                                   []
                                   (Ident "asString")
                                   [])))))
                              []))
                            (:
                             (BlockStmt
                              (ExpStmt
                               (Assign
                                (NameLhs (Name (: (Ident "config") [])))
                                EqualA
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "config")
                                    (: (Ident "replace") [])))
                                  (:
                                   (Lit (String "John Smith"))
                                   (: (Lit (String "Alice Smith")) [])))))))
                             (:
                              (LocalVars
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (: ((,) (Ident "PrintStream") []) []))))
                               (:
                                (VarDecl
                                 (VarId (Ident "st"))
                                 (Just
                                  (InitExp
                                   (InstanceCreation
                                    []
                                    (TypeDeclSpecifier
                                     (ClassType
                                      (: ((,) (Ident "PrintStream") []) [])))
                                    (:
                                     (MethodInv
                                      (PrimaryMethodCall
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "user")
                                           (: (Ident "getConfigFile") [])))
                                         []))
                                       []
                                       (Ident "getFile")
                                       []))
                                     [])
                                    Nothing))))
                                []))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "st") (: (Ident "print") [])))
                                   (:
                                    (ExpName (Name (: (Ident "config") [])))
                                    [])))))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "User") (: (Ident "clear") [])))
                                    []))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name (: (Ident "assertEquals") []))
                                     (:
                                      (Lit
                                       (String
                                        "User should have full name John Smith."))
                                      (:
                                       (Lit (String "John Smith"))
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "user")
                                            (: (Ident "getFullName") [])))
                                          []))
                                        [])))))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "User")
                                        (: (Ident "reload") [])))
                                      []))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (Assign
                                      (NameLhs (Name (: (Ident "user") [])))
                                      EqualA
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "User")
                                          (: (Ident "get") [])))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "user")
                                             (: (Ident "getId") [])))
                                           []))
                                         (:
                                          (Lit (Boolean False))
                                          (:
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "Collections")
                                               (: (Ident "emptyMap") [])))
                                             []))
                                           []))))))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name (: (Ident "assertEquals") []))
                                        (:
                                         (Lit
                                          (String
                                           "User should have full name Alice Smith."))
                                         (:
                                          (Lit (String "Alice Smith"))
                                          (:
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "user")
                                               (: (Ident "getFullName") [])))
                                             []))
                                           [])))))))
                                    []))))))))))))))))
                    (:
                     (MemberDecl
                      (MethodDecl
                       (:
                        (Annotation
                         (MarkerAnnotation (Name (: (Ident "Test") []))))
                        (: Public []))
                       []
                       Nothing
                       (Ident "testClear")
                       []
                       []
                       Nothing
                       (MethodBody
                        (Just
                         (Block
                          (:
                           (LocalVars
                            []
                            (RefType
                             (ClassRefType
                              (ClassType (: ((,) (Ident "User") []) []))))
                            (:
                             (VarDecl
                              (VarId (Ident "user"))
                              (Just
                               (InitExp
                                (MethodInv
                                 (MethodCall
                                  (Name (: (Ident "User") (: (Ident "get") [])))
                                  (:
                                   (Lit (String "John Smith"))
                                   (:
                                    (Lit (Boolean True))
                                    (:
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "Collections")
                                         (: (Ident "emptyMap") [])))
                                       []))
                                     []))))))))
                             []))
                           (:
                            (BlockStmt
                             (ExpStmt
                              (MethodInv
                               (MethodCall
                                (Name (: (Ident "assertNotNull") []))
                                (:
                                 (Lit (String "User should not be null."))
                                 (:
                                  (ExpName (Name (: (Ident "user") [])))
                                  []))))))
                            (:
                             (BlockStmt
                              (ExpStmt
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (: (Ident "user") (: (Ident "clear") [])))
                                 []))))
                             (:
                              (BlockStmt
                               (ExpStmt
                                (Assign
                                 (NameLhs (Name (: (Ident "user") [])))
                                 EqualA
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "get") [])))
                                   (:
                                    (Lit (String "John Smith"))
                                    (:
                                     (Lit (Boolean False))
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "Collections")
                                          (: (Ident "emptyMap") [])))
                                        []))
                                      []))))))))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name (: (Ident "assertNull") []))
                                   (:
                                    (Lit (String "User shoudl be null"))
                                    (:
                                     (ExpName (Name (: (Ident "user") [])))
                                     []))))))
                               []))))))))))
                     (:
                      (MemberDecl
                       (MethodDecl
                        (:
                         (Annotation
                          (MarkerAnnotation (Name (: (Ident "Test") []))))
                         (: Public []))
                        []
                        Nothing
                        (Ident "testGetBuildsAndGetProjects")
                        []
                        (:
                         (ClassRefType
                          (ClassType (: ((,) (Ident "Exception") []) [])))
                         [])
                        Nothing
                        (MethodBody
                         (Just
                          (Block
                           (:
                            (LocalVars
                             []
                             (RefType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "User") []) []))))
                             (:
                              (VarDecl
                               (VarId (Ident "user"))
                               (Just
                                (InitExp
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "get") [])))
                                   (:
                                    (Lit (String "John Smith"))
                                    (:
                                     (Lit (Boolean True))
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "Collections")
                                          (: (Ident "emptyMap") [])))
                                        []))
                                      []))))))))
                              []))
                            (:
                             (LocalVars
                              []
                              (RefType
                               (ClassRefType
                                (ClassType
                                 (: ((,) (Ident "FreeStyleProject") []) []))))
                              (:
                               (VarDecl
                                (VarId (Ident "project"))
                                (Just
                                 (InitExp
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "j")
                                      (: (Ident "createFreeStyleProject") [])))
                                    (: (Lit (String "free")) []))))))
                               []))
                             (:
                              (LocalVars
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (: ((,) (Ident "FreeStyleProject") []) []))))
                               (:
                                (VarDecl
                                 (VarId (Ident "project2"))
                                 (Just
                                  (InitExp
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "j")
                                       (: (Ident "createFreeStyleProject") [])))
                                     (: (Lit (String "free2")) []))))))
                                []))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "project") (: (Ident "save") [])))
                                   []))))
                               (:
                                (LocalVars
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,) (Ident "FakeChangeLogSCM") [])
                                     []))))
                                 (:
                                  (VarDecl
                                   (VarId (Ident "scm"))
                                   (Just
                                    (InitExp
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifier
                                       (ClassType
                                        (:
                                         ((,) (Ident "FakeChangeLogSCM") [])
                                         [])))
                                      []
                                      Nothing))))
                                  []))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (PrimaryMethodCall
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "scm")
                                         (: (Ident "addChange") [])))
                                       []))
                                     []
                                     (Ident "withAuthor")
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "user")
                                          (: (Ident "getId") [])))
                                        []))
                                      [])))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "project")
                                        (: (Ident "setScm") [])))
                                      (:
                                       (ExpName (Name (: (Ident "scm") [])))
                                       [])))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "j")
                                         (:
                                          (Ident "buildAndAssertSuccess")
                                          [])))
                                       (:
                                        (ExpName
                                         (Name (: (Ident "project") [])))
                                        [])))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "j")
                                          (:
                                           (Ident "buildAndAssertSuccess")
                                           [])))
                                        (:
                                         (ExpName
                                          (Name (: (Ident "project2") [])))
                                         [])))))
                                    (:
                                     (LocalVars
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (: ((,) (Ident "Build") []) []))))
                                      (:
                                       (VarDecl
                                        (VarId (Ident "build"))
                                        (Just
                                         (InitExp
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "project")
                                              (: (Ident "getLastBuild") [])))
                                            [])))))
                                       []))
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "Build") []) []))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "build2"))
                                         (Just
                                          (InitExp
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "project2")
                                               (: (Ident "getLastBuild") [])))
                                             [])))))
                                        []))
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name (: (Ident "assertTrue") []))
                                           (:
                                            (Lit
                                             (String
                                              "User should participate in the last build of project free."))
                                            (:
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "user")
                                                   (: (Ident "getBuilds") [])))
                                                 []))
                                               []
                                               (Ident "contains")
                                               (:
                                                (ExpName
                                                 (Name (: (Ident "build") [])))
                                                [])))
                                             []))))))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name (: (Ident "assertFalse") []))
                                            (:
                                             (Lit
                                              (String
                                               "User should not participate in the last build of project free2."))
                                             (:
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "user")
                                                    (: (Ident "getBuilds") [])))
                                                  []))
                                                []
                                                (Ident "contains")
                                                (:
                                                 (ExpName
                                                  (Name
                                                   (: (Ident "build2") [])))
                                                 [])))
                                              []))))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name (: (Ident "assertTrue") []))
                                             (:
                                              (Lit
                                               (String
                                                "User should participate in the project free."))
                                              (:
                                               (MethodInv
                                                (PrimaryMethodCall
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "user")
                                                     (:
                                                      (Ident "getProjects")
                                                      [])))
                                                   []))
                                                 []
                                                 (Ident "contains")
                                                 (:
                                                  (ExpName
                                                   (Name
                                                    (: (Ident "project") [])))
                                                  [])))
                                               []))))))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (: (Ident "assertFalse") []))
                                              (:
                                               (Lit
                                                (String
                                                 "User should not participate in the project free2."))
                                               (:
                                                (MethodInv
                                                 (PrimaryMethodCall
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "user")
                                                      (:
                                                       (Ident "getProjects")
                                                       [])))
                                                    []))
                                                  []
                                                  (Ident "contains")
                                                  (:
                                                   (ExpName
                                                    (Name
                                                     (: (Ident "project2") [])))
                                                   [])))
                                                []))))))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "build2")
                                                 (:
                                                  (Ident "replaceAction")
                                                  [])))
                                               (:
                                                (InstanceCreation
                                                 []
                                                 (TypeDeclSpecifier
                                                  (ClassType
                                                   (:
                                                    ((,)
                                                     (Ident "CauseAction")
                                                     [])
                                                    [])))
                                                 (:
                                                  (InstanceCreation
                                                   []
                                                   (TypeDeclSpecifier
                                                    (ClassType
                                                     (:
                                                      ((,) (Ident "Cause") [])
                                                      (:
                                                       ((,)
                                                        (Ident "UserIdCause")
                                                        [])
                                                       []))))
                                                   []
                                                   Nothing)
                                                  [])
                                                 Nothing)
                                                [])))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (: (Ident "assertFalse") []))
                                                (:
                                                 (Lit
                                                  (String
                                                   "User should not participate in the last build of project free2."))
                                                 (:
                                                  (MethodInv
                                                   (PrimaryMethodCall
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "user")
                                                        (:
                                                         (Ident "getBuilds")
                                                         [])))
                                                      []))
                                                    []
                                                    (Ident "contains")
                                                    (:
                                                     (ExpName
                                                      (Name
                                                       (: (Ident "build2") [])))
                                                     [])))
                                                  []))))))
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (: (Ident "assertFalse") []))
                                                 (:
                                                  (Lit
                                                   (String
                                                    "Current user should not participate in the last build of project free."))
                                                  (:
                                                   (MethodInv
                                                    (PrimaryMethodCall
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "User")
                                                           (:
                                                            (Ident "current")
                                                            [])))
                                                         []))
                                                       []
                                                       (Ident "getBuilds")
                                                       []))
                                                     []
                                                     (Ident "contains")
                                                     (:
                                                      (ExpName
                                                       (Name
                                                        (: (Ident "build") [])))
                                                      [])))
                                                   []))))))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (: (Ident "assertTrue") []))
                                                  (:
                                                   (Lit
                                                    (String
                                                     "Current user should participate in the last build of project free2."))
                                                   (:
                                                    (MethodInv
                                                     (PrimaryMethodCall
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "User")
                                                            (:
                                                             (Ident "current")
                                                             [])))
                                                          []))
                                                        []
                                                        (Ident "getBuilds")
                                                        []))
                                                      []
                                                      (Ident "contains")
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (:
                                                          (Ident "build2")
                                                          [])))
                                                       [])))
                                                    []))))))
                                              []))))))))))))))))))))))))
                      (:
                       (MemberDecl
                        (MethodDecl
                         (:
                          (Annotation
                           (MarkerAnnotation (Name (: (Ident "Test") []))))
                          (: Public []))
                         []
                         Nothing
                         (Ident "testSave")
                         []
                         (:
                          (ClassRefType
                           (ClassType (: ((,) (Ident "IOException") []) [])))
                          [])
                         Nothing
                         (MethodBody
                          (Just
                           (Block
                            (:
                             (LocalVars
                              []
                              (RefType
                               (ClassRefType
                                (ClassType (: ((,) (Ident "User") []) []))))
                              (:
                               (VarDecl
                                (VarId (Ident "user"))
                                (Just
                                 (InitExp
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "User") (: (Ident "get") [])))
                                    (:
                                     (Lit (String "John Smith"))
                                     (:
                                      (Lit (Boolean True))
                                      (:
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "Collections")
                                           (: (Ident "emptyMap") [])))
                                         []))
                                       []))))))))
                               []))
                             (:
                              (BlockStmt
                               (ExpStmt
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (: (Ident "User") (: (Ident "clear") [])))
                                  []))))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (: (Ident "User") (: (Ident "reload") [])))
                                   []))))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (Assign
                                   (NameLhs (Name (: (Ident "user") [])))
                                   EqualA
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (: (Ident "User") (: (Ident "get") [])))
                                     (:
                                      (Lit (String "John Smith"))
                                      (:
                                       (Lit (Boolean False))
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "Collections")
                                            (: (Ident "emptyMap") [])))
                                          []))
                                        []))))))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name (: (Ident "assertNull") []))
                                     (:
                                      (Lit (String "User should be null."))
                                      (:
                                       (ExpName (Name (: (Ident "user") [])))
                                       []))))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (Assign
                                     (NameLhs (Name (: (Ident "user") [])))
                                     EqualA
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (: (Ident "User") (: (Ident "get") [])))
                                       (:
                                        (Lit (String "John Smithl"))
                                        (:
                                         (Lit (Boolean True))
                                         (:
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "Collections")
                                              (: (Ident "emptyMap") [])))
                                            []))
                                          []))))))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "user")
                                         (: (Ident "addProperty") [])))
                                       (:
                                        (InstanceCreation
                                         []
                                         (TypeDeclSpecifier
                                          (ClassType
                                           (:
                                            ((,) (Ident "SomeUserProperty") [])
                                            [])))
                                         []
                                         Nothing)
                                        [])))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "user")
                                          (: (Ident "save") [])))
                                        []))))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "User")
                                           (: (Ident "clear") [])))
                                         []))))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "User")
                                            (: (Ident "reload") [])))
                                          []))))
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (Assign
                                          (NameLhs (Name (: (Ident "user") [])))
                                          EqualA
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "User")
                                              (: (Ident "get") [])))
                                            (:
                                             (Lit (String "John Smithl"))
                                             (:
                                              (Lit (Boolean False))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "Collections")
                                                   (: (Ident "emptyMap") [])))
                                                 []))
                                               []))))))))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (: (Ident "assertNotNull") []))
                                            (:
                                             (Lit
                                              (String
                                               "User should not be null."))
                                             (:
                                              (ExpName
                                               (Name (: (Ident "user") [])))
                                              []))))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (: (Ident "assertNotNull") []))
                                             (:
                                              (Lit
                                               (String
                                                "User should be saved with all changes."))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "user")
                                                   (:
                                                    (Ident "getProperty")
                                                    [])))
                                                 (:
                                                  (ClassLit
                                                   (Just
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "SomeUserProperty")
                                                         [])
                                                        []))))))
                                                  [])))
                                               []))))))
                                         []))))))))))))))))))
                       (:
                        (MemberDecl
                         (MethodDecl
                          (:
                           (Annotation
                            (SingleElementAnnotation
                             (Name (: (Ident "Bug") []))
                             (EVVal (InitExp (Lit (Int 16332))))))
                           (:
                            (Annotation
                             (MarkerAnnotation (Name (: (Ident "Test") []))))
                            (: Public [])))
                          []
                          Nothing
                          (Ident "unrecoverableFullName")
                          []
                          (:
                           (ClassRefType
                            (ClassType (: ((,) (Ident "Throwable") []) [])))
                           [])
                          Nothing
                          (MethodBody
                           (Just
                            (Block
                             (:
                              (LocalVars
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType (: ((,) (Ident "User") []) []))))
                               (:
                                (VarDecl
                                 (VarId (Ident "u"))
                                 (Just
                                  (InitExp
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (: (Ident "User") (: (Ident "get") [])))
                                     (:
                                      (Lit
                                       (String
                                        "John Smith <jsmith@nowhere.net>"))
                                      []))))))
                                []))
                              (:
                               (BlockStmt
                                (ExpStmt
                                 (MethodInv
                                  (MethodCall
                                   (Name (: (Ident "assertEquals") []))
                                   (:
                                    (Lit (String "jsmith@nowhere.net"))
                                    (:
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "MailAddressResolver")
                                         (: (Ident "resolve") [])))
                                       (:
                                        (ExpName (Name (: (Ident "u") [])))
                                        [])))
                                     []))))))
                               (:
                                (LocalVars
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (: ((,) (Ident "String") []) []))))
                                 (:
                                  (VarDecl
                                   (VarId (Ident "id"))
                                   (Just
                                    (InitExp
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (: (Ident "u") (: (Ident "getId") [])))
                                       [])))))
                                  []))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (: (Ident "User") (: (Ident "clear") [])))
                                     []))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (Assign
                                     (NameLhs (Name (: (Ident "u") [])))
                                     EqualA
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (: (Ident "User") (: (Ident "get") [])))
                                       (:
                                        (ExpName (Name (: (Ident "id") [])))
                                        []))))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name (: (Ident "assertEquals") []))
                                       (:
                                        (Lit (String "jsmith@nowhere.net"))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "MailAddressResolver")
                                             (: (Ident "resolve") [])))
                                           (:
                                            (ExpName (Name (: (Ident "u") [])))
                                            [])))
                                         []))))))
                                   [])))))))))))
                        (:
                         (MemberDecl
                          (MethodDecl
                           (:
                            (Annotation
                             (MarkerAnnotation (Name (: (Ident "Test") []))))
                            (: Public []))
                           []
                           Nothing
                           (Ident "testDelete")
                           []
                           (:
                            (ClassRefType
                             (ClassType (: ((,) (Ident "IOException") []) [])))
                            [])
                           Nothing
                           (MethodBody
                            (Just
                             (Block
                              (:
                               (LocalVars
                                []
                                (RefType
                                 (ClassRefType
                                  (ClassType (: ((,) (Ident "User") []) []))))
                                (:
                                 (VarDecl
                                  (VarId (Ident "user"))
                                  (Just
                                   (InitExp
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (: (Ident "User") (: (Ident "get") [])))
                                      (:
                                       (Lit (String "John Smith"))
                                       (:
                                        (Lit (Boolean True))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "Collections")
                                             (: (Ident "emptyMap") [])))
                                           []))
                                         []))))))))
                                 []))
                               (:
                                (BlockStmt
                                 (ExpStmt
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (: (Ident "user") (: (Ident "save") [])))
                                    []))))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "user")
                                       (: (Ident "delete") [])))
                                     []))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name (: (Ident "assertFalse") []))
                                      (:
                                       (Lit
                                        (String
                                         "User should be deleted with his persistent data."))
                                       (:
                                        (MethodInv
                                         (PrimaryMethodCall
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "user")
                                              (: (Ident "getConfigFile") [])))
                                            []))
                                          []
                                          (Ident "exists")
                                          []))
                                        []))))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name (: (Ident "assertFalse") []))
                                       (:
                                        (Lit
                                         (String
                                          "User should be deleted from memory."))
                                        (:
                                         (MethodInv
                                          (PrimaryMethodCall
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "User")
                                               (: (Ident "getAll") [])))
                                             []))
                                           []
                                           (Ident "contains")
                                           (:
                                            (ExpName
                                             (Name (: (Ident "user") [])))
                                            [])))
                                         []))))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (Assign
                                       (NameLhs (Name (: (Ident "user") [])))
                                       EqualA
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "User")
                                           (: (Ident "get") [])))
                                         (:
                                          (Lit (String "John Smith"))
                                          (:
                                           (Lit (Boolean False))
                                           (:
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "Collections")
                                                (: (Ident "emptyMap") [])))
                                              []))
                                            []))))))))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name (: (Ident "assertNull") []))
                                         (:
                                          (Lit
                                           (String
                                            "User should be deleted from memory."))
                                          (:
                                           (ExpName
                                            (Name (: (Ident "user") [])))
                                           []))))))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "User")
                                            (: (Ident "reload") [])))
                                          []))))
                                      (:
                                       (LocalVars
                                        []
                                        (PrimType BooleanT)
                                        (:
                                         (VarDecl
                                          (VarId (Ident "contained"))
                                          (Just
                                           (InitExp (Lit (Boolean False)))))
                                         []))
                                       (:
                                        (BlockStmt
                                         (EnhancedFor
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (: ((,) (Ident "User") []) []))))
                                          (Ident "u")
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "User")
                                              (: (Ident "getAll") [])))
                                            []))
                                          (StmtBlock
                                           (Block
                                            (:
                                             (BlockStmt
                                              (IfThen
                                               (MethodInv
                                                (PrimaryMethodCall
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "u")
                                                     (: (Ident "getId") [])))
                                                   []))
                                                 []
                                                 (Ident "equals")
                                                 (:
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "user")
                                                      (: (Ident "getId") [])))
                                                    []))
                                                  [])))
                                               (StmtBlock
                                                (Block
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (Assign
                                                     (NameLhs
                                                      (Name
                                                       (:
                                                        (Ident "contained")
                                                        [])))
                                                     EqualA
                                                     (Lit (Boolean True)))))
                                                  (:
                                                   (BlockStmt (Break Nothing))
                                                   []))))))
                                             [])))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name (: (Ident "assertFalse") []))
                                             (:
                                              (Lit
                                               (String
                                                "User should not be loaded."))
                                              (:
                                               (ExpName
                                                (Name
                                                 (: (Ident "contained") [])))
                                               []))))))
                                         []))))))))))))))))
                         (:
                          (MemberDecl
                           (MethodDecl
                            (:
                             (Annotation
                              (MarkerAnnotation (Name (: (Ident "Test") []))))
                             (: Public []))
                            []
                            Nothing
                            (Ident "security180")
                            []
                            (:
                             (ClassRefType
                              (ClassType (: ((,) (Ident "Exception") []) [])))
                             [])
                            Nothing
                            (MethodBody
                             (Just
                              (Block
                               (:
                                (LocalVars
                                 (: Final [])
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,)
                                      (Ident
                                       "GlobalMatrixAuthorizationStrategy")
                                      [])
                                     []))))
                                 (:
                                  (VarDecl
                                   (VarId (Ident "auth"))
                                   (Just
                                    (InitExp
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifier
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident
                                           "GlobalMatrixAuthorizationStrategy")
                                          [])
                                         [])))
                                      []
                                      Nothing))))
                                  []))
                                (:
                                 (BlockStmt
                                  (ExpStmt
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "j")
                                       (:
                                        (Ident "jenkins")
                                        (:
                                         (Ident "setAuthorizationStrategy")
                                         []))))
                                     (:
                                      (ExpName (Name (: (Ident "auth") [])))
                                      [])))))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "j")
                                        (:
                                         (Ident "jenkins")
                                         (: (Ident "setSecurityRealm") []))))
                                      (:
                                       (InstanceCreation
                                        []
                                        (TypeDeclSpecifier
                                         (ClassType
                                          (:
                                           ((,)
                                            (Ident "HudsonPrivateSecurityRealm")
                                            [])
                                           [])))
                                        (: (Lit (Boolean False)) [])
                                        Nothing)
                                       [])))))
                                  (:
                                   (LocalVars
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (: ((,) (Ident "User") []) []))))
                                    (:
                                     (VarDecl
                                      (VarId (Ident "alice"))
                                      (Just
                                       (InitExp
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "User")
                                            (: (Ident "get") [])))
                                          (: (Lit (String "alice")) []))))))
                                     []))
                                   (:
                                    (LocalVars
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (: ((,) (Ident "User") []) []))))
                                     (:
                                      (VarDecl
                                       (VarId (Ident "bob"))
                                       (Just
                                        (InitExp
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "User")
                                             (: (Ident "get") [])))
                                           (: (Lit (String "bob")) []))))))
                                      []))
                                    (:
                                     (LocalVars
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (: ((,) (Ident "User") []) []))))
                                      (:
                                       (VarDecl
                                        (VarId (Ident "anonymous"))
                                        (Just
                                         (InitExp
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "User")
                                              (: (Ident "get") [])))
                                            (:
                                             (Lit (String "anonymous"))
                                             []))))))
                                       []))
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "User") []) []))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "admin"))
                                         (Just
                                          (InitExp
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "User")
                                               (: (Ident "get") [])))
                                             (: (Lit (String "admin")) []))))))
                                        []))
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "auth")
                                             (: (Ident "add") [])))
                                           (:
                                            (ExpName
                                             (Name
                                              (:
                                               (Ident "Jenkins")
                                               (: (Ident "READ") []))))
                                            (:
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "alice")
                                                 (: (Ident "getId") [])))
                                               []))
                                             []))))))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "auth")
                                              (: (Ident "add") [])))
                                            (:
                                             (ExpName
                                              (Name
                                               (:
                                                (Ident "Jenkins")
                                                (: (Ident "READ") []))))
                                             (:
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "bob")
                                                  (: (Ident "getId") [])))
                                                []))
                                              []))))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "auth")
                                               (: (Ident "add") [])))
                                             (:
                                              (ExpName
                                               (Name
                                                (:
                                                 (Ident "Jenkins")
                                                 (: (Ident "ADMINISTER") []))))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "admin")
                                                   (: (Ident "getId") [])))
                                                 []))
                                               []))))))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (PrimaryMethodCall
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident
                                                   "SecurityContextHolder")
                                                  (: (Ident "getContext") [])))
                                                []))
                                              []
                                              (Ident "setAuthentication")
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "admin")
                                                   (:
                                                    (Ident "impersonate")
                                                    [])))
                                                 []))
                                               [])))))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "admin")
                                                   (:
                                                    (Ident "getProperty")
                                                    [])))
                                                 (:
                                                  (ClassLit
                                                   (Just
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "ApiTokenProperty")
                                                         [])
                                                        []))))))
                                                  [])))
                                               []
                                               (Ident "changeApiToken")
                                               []))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "alice")
                                                    (:
                                                     (Ident "getProperty")
                                                     [])))
                                                  (:
                                                   (ClassLit
                                                    (Just
                                                     (RefType
                                                      (ClassRefType
                                                       (ClassType
                                                        (:
                                                         ((,)
                                                          (Ident
                                                           "ApiTokenProperty")
                                                          [])
                                                         []))))))
                                                   [])))
                                                []
                                                (Ident "changeApiToken")
                                                []))))
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (MethodInv
                                                (PrimaryMethodCall
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident
                                                      "SecurityContextHolder")
                                                     (:
                                                      (Ident "getContext")
                                                      [])))
                                                   []))
                                                 []
                                                 (Ident "setAuthentication")
                                                 (:
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "bob")
                                                      (:
                                                       (Ident "impersonate")
                                                       [])))
                                                    []))
                                                  [])))))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (PrimaryMethodCall
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "bob")
                                                      (:
                                                       (Ident "getProperty")
                                                       [])))
                                                    (:
                                                     (ClassLit
                                                      (Just
                                                       (RefType
                                                        (ClassRefType
                                                         (ClassType
                                                          (:
                                                           ((,)
                                                            (Ident
                                                             "ApiTokenProperty")
                                                            [])
                                                           []))))))
                                                     [])))
                                                  []
                                                  (Ident "changeApiToken")
                                                  []))))
                                              (:
                                               (BlockStmt
                                                (Try
                                                 (Block
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "alice")
                                                           (:
                                                            (Ident
                                                             "getProperty")
                                                            [])))
                                                         (:
                                                          (ClassLit
                                                           (Just
                                                            (RefType
                                                             (ClassRefType
                                                              (ClassType
                                                               (:
                                                                ((,)
                                                                 (Ident
                                                                  "ApiTokenProperty")
                                                                 [])
                                                                []))))))
                                                          [])))
                                                       []
                                                       (Ident "changeApiToken")
                                                       []))))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (: (Ident "fail") []))
                                                        (:
                                                         (Lit
                                                          (String
                                                           "Bob should not be authorized to change alice's token"))
                                                         [])))))
                                                    [])))
                                                 (:
                                                  (Catch
                                                   (FormalParam
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "AccessDeniedException")
                                                         [])
                                                        []))))
                                                    False
                                                    (VarId (Ident "expected")))
                                                   (Block []))
                                                  [])
                                                 Nothing))
                                               (:
                                                (BlockStmt
                                                 (Try
                                                  (Block
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "anonymous")
                                                            (:
                                                             (Ident
                                                              "getProperty")
                                                             [])))
                                                          (:
                                                           (ClassLit
                                                            (Just
                                                             (RefType
                                                              (ClassRefType
                                                               (ClassType
                                                                (:
                                                                 ((,)
                                                                  (Ident
                                                                   "ApiTokenProperty")
                                                                  [])
                                                                 []))))))
                                                           [])))
                                                        []
                                                        (Ident "changeApiToken")
                                                        []))))
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (: (Ident "fail") []))
                                                         (:
                                                          (Lit
                                                           (String
                                                            "Anonymous should not be authorized to change alice's token"))
                                                          [])))))
                                                     [])))
                                                  (:
                                                   (Catch
                                                    (FormalParam
                                                     []
                                                     (RefType
                                                      (ClassRefType
                                                       (ClassType
                                                        (:
                                                         ((,)
                                                          (Ident
                                                           "AccessDeniedException")
                                                          [])
                                                         []))))
                                                     False
                                                     (VarId (Ident "expected")))
                                                    (Block []))
                                                   [])
                                                  Nothing))
                                                []))))))))))))))))))))))
                          (:
                           (MemberDecl
                            (MethodDecl
                             (:
                              (Annotation
                               (MarkerAnnotation (Name (: (Ident "Test") []))))
                              (: Public []))
                             []
                             Nothing
                             (Ident "testDoConfigSubmit")
                             []
                             (:
                              (ClassRefType
                               (ClassType (: ((,) (Ident "Exception") []) [])))
                              [])
                             Nothing
                             (MethodBody
                              (Just
                               (Block
                                (:
                                 (LocalVars
                                  []
                                  (RefType
                                   (ClassRefType
                                    (ClassType
                                     (:
                                      ((,)
                                       (Ident
                                        "GlobalMatrixAuthorizationStrategy")
                                       [])
                                      []))))
                                  (:
                                   (VarDecl
                                    (VarId (Ident "auth"))
                                    (Just
                                     (InitExp
                                      (InstanceCreation
                                       []
                                       (TypeDeclSpecifier
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident
                                            "GlobalMatrixAuthorizationStrategy")
                                           [])
                                          [])))
                                       []
                                       Nothing))))
                                   []))
                                 (:
                                  (BlockStmt
                                   (ExpStmt
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "j")
                                        (:
                                         (Ident "jenkins")
                                         (:
                                          (Ident "setAuthorizationStrategy")
                                          []))))
                                      (:
                                       (ExpName (Name (: (Ident "auth") [])))
                                       [])))))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "j")
                                         (:
                                          (Ident "jenkins")
                                          (: (Ident "setCrumbIssuer") []))))
                                       (: (Lit Null) [])))))
                                   (:
                                    (LocalVars
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "HudsonPrivateSecurityRealm")
                                          [])
                                         []))))
                                     (:
                                      (VarDecl
                                       (VarId (Ident "realm"))
                                       (Just
                                        (InitExp
                                         (InstanceCreation
                                          []
                                          (TypeDeclSpecifier
                                           (ClassType
                                            (:
                                             ((,)
                                              (Ident
                                               "HudsonPrivateSecurityRealm")
                                              [])
                                             [])))
                                          (: (Lit (Boolean False)) [])
                                          Nothing))))
                                      []))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "j")
                                           (:
                                            (Ident "jenkins")
                                            (: (Ident "setSecurityRealm") []))))
                                         (:
                                          (ExpName
                                           (Name (: (Ident "realm") [])))
                                          [])))))
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "User") []) []))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "user"))
                                         (Just
                                          (InitExp
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "realm")
                                               (: (Ident "createAccount") [])))
                                             (:
                                              (Lit (String "John Smith"))
                                              (:
                                               (Lit (String "password"))
                                               [])))))))
                                        []))
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (: ((,) (Ident "User") []) []))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "user2"))
                                          (Just
                                           (InitExp
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "realm")
                                                (: (Ident "createAccount") [])))
                                              (:
                                               (Lit (String "John Smith2"))
                                               (:
                                                (Lit (String "password"))
                                                [])))))))
                                         []))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "user2")
                                              (: (Ident "save") [])))
                                            []))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "auth")
                                               (: (Ident "add") [])))
                                             (:
                                              (ExpName
                                               (Name
                                                (:
                                                 (Ident "Jenkins")
                                                 (: (Ident "ADMINISTER") []))))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "user")
                                                   (: (Ident "getId") [])))
                                                 []))
                                               []))))))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "auth")
                                                (: (Ident "add") [])))
                                              (:
                                               (ExpName
                                                (Name
                                                 (:
                                                  (Ident "Jenkins")
                                                  (: (Ident "READ") []))))
                                               (:
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "user2")
                                                    (: (Ident "getId") [])))
                                                  []))
                                                []))))))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident
                                                    "SecurityContextHolder")
                                                   (: (Ident "getContext") [])))
                                                 []))
                                               []
                                               (Ident "setAuthentication")
                                               (:
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "user")
                                                    (:
                                                     (Ident "impersonate")
                                                     [])))
                                                  []))
                                                [])))))
                                           (:
                                            (LocalVars
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "HtmlForm") [])
                                                 []))))
                                             (:
                                              (VarDecl
                                               (VarId (Ident "form"))
                                               (Just
                                                (InitExp
                                                 (MethodInv
                                                  (PrimaryMethodCall
                                                   (MethodInv
                                                    (PrimaryMethodCall
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "j")
                                                           (:
                                                            (Ident
                                                             "createWebClient")
                                                            [])))
                                                         []))
                                                       []
                                                       (Ident "login")
                                                       (:
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "user")
                                                            (:
                                                             (Ident "getId")
                                                             [])))
                                                          []))
                                                        (:
                                                         (Lit
                                                          (String "password"))
                                                         []))))
                                                     []
                                                     (Ident "goTo")
                                                     (:
                                                      (BinOp
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "user2")
                                                           (:
                                                            (Ident "getUrl")
                                                            [])))
                                                         []))
                                                       Add
                                                       (Lit
                                                        (String "/configure")))
                                                      [])))
                                                   []
                                                   (Ident "getFormByName")
                                                   (:
                                                    (Lit (String "config"))
                                                    []))))))
                                              []))
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (MethodInv
                                                (PrimaryMethodCall
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "form")
                                                     (:
                                                      (Ident "getInputByName")
                                                      [])))
                                                   (:
                                                    (Lit (String "_.fullName"))
                                                    [])))
                                                 []
                                                 (Ident "setValueAttribute")
                                                 (:
                                                  (Lit (String "Alice Smith"))
                                                  [])))))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "j")
                                                    (: (Ident "submit") [])))
                                                  (:
                                                   (ExpName
                                                    (Name
                                                     (: (Ident "form") [])))
                                                   [])))))
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "assertEquals")
                                                     []))
                                                   (:
                                                    (Lit
                                                     (String
                                                      "User should have full name Alice Smith."))
                                                    (:
                                                     (Lit
                                                      (String "Alice Smith"))
                                                     (:
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "user2")
                                                          (:
                                                           (Ident "getFullName")
                                                           [])))
                                                        []))
                                                      [])))))))
                                               (:
                                                (BlockStmt
                                                 (ExpStmt
                                                  (MethodInv
                                                   (PrimaryMethodCall
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident
                                                         "SecurityContextHolder")
                                                        (:
                                                         (Ident "getContext")
                                                         [])))
                                                      []))
                                                    []
                                                    (Ident "setAuthentication")
                                                    (:
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "user2")
                                                         (:
                                                          (Ident "impersonate")
                                                          [])))
                                                       []))
                                                     [])))))
                                                (:
                                                 (BlockStmt
                                                  (Try
                                                   (Block
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "user")
                                                           (:
                                                            (Ident
                                                             "doConfigSubmit")
                                                            [])))
                                                         (:
                                                          (Lit Null)
                                                          (: (Lit Null) []))))))
                                                     (:
                                                      (BlockStmt
                                                       (ExpStmt
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "fail")
                                                            []))
                                                          (:
                                                           (Lit
                                                            (String
                                                             "User should not have permission to configure antoher user."))
                                                           [])))))
                                                      [])))
                                                   (:
                                                    (Catch
                                                     (FormalParam
                                                      []
                                                      (RefType
                                                       (ClassRefType
                                                        (ClassType
                                                         (:
                                                          ((,)
                                                           (Ident "Exception")
                                                           [])
                                                          []))))
                                                      False
                                                      (VarId (Ident "e")))
                                                     (Block
                                                      (:
                                                       (BlockStmt
                                                        (IfThen
                                                         (PreNot
                                                          (MethodInv
                                                           (PrimaryMethodCall
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "e")
                                                                (:
                                                                 (Ident
                                                                  "getClass")
                                                                 [])))
                                                              []))
                                                            []
                                                            (Ident
                                                             "isAssignableFrom")
                                                            (:
                                                             (ClassLit
                                                              (Just
                                                               (RefType
                                                                (ClassRefType
                                                                 (ClassType
                                                                  (:
                                                                   ((,)
                                                                    (Ident
                                                                     "AccessDeniedException2")
                                                                    [])
                                                                   []))))))
                                                             []))))
                                                         (StmtBlock
                                                          (Block
                                                           (:
                                                            (BlockStmt
                                                             (ExpStmt
                                                              (MethodInv
                                                               (MethodCall
                                                                (Name
                                                                 (:
                                                                  (Ident "fail")
                                                                  []))
                                                                (:
                                                                 (Lit
                                                                  (String
                                                                   "AccessDeniedException should be thrown."))
                                                                 [])))))
                                                            [])))))
                                                       [])))
                                                    [])
                                                   Nothing))
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (Assign
                                                     (NameLhs
                                                      (Name
                                                       (: (Ident "form") [])))
                                                     EqualA
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (PrimaryMethodCall
                                                         (MethodInv
                                                          (PrimaryMethodCall
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident "j")
                                                               (:
                                                                (Ident
                                                                 "createWebClient")
                                                                [])))
                                                             []))
                                                           []
                                                           (Ident "login")
                                                           (:
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "user2")
                                                                (:
                                                                 (Ident "getId")
                                                                 [])))
                                                              []))
                                                            (:
                                                             (Lit
                                                              (String
                                                               "password"))
                                                             []))))
                                                         []
                                                         (Ident "goTo")
                                                         (:
                                                          (BinOp
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident "user2")
                                                               (:
                                                                (Ident "getUrl")
                                                                [])))
                                                             []))
                                                           Add
                                                           (Lit
                                                            (String
                                                             "/configure")))
                                                          [])))
                                                       []
                                                       (Ident "getFormByName")
                                                       (:
                                                        (Lit (String "config"))
                                                        []))))))
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "form")
                                                           (:
                                                            (Ident
                                                             "getInputByName")
                                                            [])))
                                                         (:
                                                          (Lit
                                                           (String
                                                            "_.fullName"))
                                                          [])))
                                                       []
                                                       (Ident
                                                        "setValueAttribute")
                                                       (:
                                                        (Lit (String "John"))
                                                        [])))))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "j")
                                                          (:
                                                           (Ident "submit")
                                                           [])))
                                                        (:
                                                         (ExpName
                                                          (Name
                                                           (:
                                                            (Ident "form")
                                                            [])))
                                                         [])))))
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "assertEquals")
                                                           []))
                                                         (:
                                                          (Lit
                                                           (String
                                                            "User should be albe to configure himself."))
                                                          (:
                                                           (Lit (String "John"))
                                                           (:
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "user2")
                                                                (:
                                                                 (Ident
                                                                  "getFullName")
                                                                 [])))
                                                              []))
                                                            [])))))))
                                                     []))))))))))))))))))))))))))
                           (:
                            (MemberDecl
                             (MethodDecl
                              (:
                               (Annotation
                                (MarkerAnnotation (Name (: (Ident "Test") []))))
                               (: Public []))
                              []
                              Nothing
                              (Ident "testDoDoDelete")
                              []
                              (:
                               (ClassRefType
                                (ClassType (: ((,) (Ident "Exception") []) [])))
                               [])
                              Nothing
                              (MethodBody
                               (Just
                                (Block
                                 (:
                                  (LocalVars
                                   []
                                   (RefType
                                    (ClassRefType
                                     (ClassType
                                      (:
                                       ((,)
                                        (Ident
                                         "GlobalMatrixAuthorizationStrategy")
                                        [])
                                       []))))
                                   (:
                                    (VarDecl
                                     (VarId (Ident "auth"))
                                     (Just
                                      (InitExp
                                       (InstanceCreation
                                        []
                                        (TypeDeclSpecifier
                                         (ClassType
                                          (:
                                           ((,)
                                            (Ident
                                             "GlobalMatrixAuthorizationStrategy")
                                            [])
                                           [])))
                                        []
                                        Nothing))))
                                    []))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "j")
                                         (:
                                          (Ident "jenkins")
                                          (:
                                           (Ident "setAuthorizationStrategy")
                                           []))))
                                       (:
                                        (ExpName (Name (: (Ident "auth") [])))
                                        [])))))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "j")
                                          (:
                                           (Ident "jenkins")
                                           (: (Ident "setCrumbIssuer") []))))
                                        (: (Lit Null) [])))))
                                    (:
                                     (LocalVars
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident "HudsonPrivateSecurityRealm")
                                           [])
                                          []))))
                                      (:
                                       (VarDecl
                                        (VarId (Ident "realm"))
                                        (Just
                                         (InitExp
                                          (InstanceCreation
                                           []
                                           (TypeDeclSpecifier
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident
                                                "HudsonPrivateSecurityRealm")
                                               [])
                                              [])))
                                           (: (Lit (Boolean False)) [])
                                           Nothing))))
                                       []))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "j")
                                            (:
                                             (Ident "jenkins")
                                             (:
                                              (Ident "setSecurityRealm")
                                              []))))
                                          (:
                                           (ExpName
                                            (Name (: (Ident "realm") [])))
                                           [])))))
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (: ((,) (Ident "User") []) []))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "user"))
                                          (Just
                                           (InitExp
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "realm")
                                                (: (Ident "createAccount") [])))
                                              (:
                                               (Lit (String "John Smith"))
                                               (:
                                                (Lit (String "password"))
                                                [])))))))
                                         []))
                                       (:
                                        (LocalVars
                                         []
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (: ((,) (Ident "User") []) []))))
                                         (:
                                          (VarDecl
                                           (VarId (Ident "user2"))
                                           (Just
                                            (InitExp
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "realm")
                                                 (:
                                                  (Ident "createAccount")
                                                  [])))
                                               (:
                                                (Lit (String "John Smith2"))
                                                (:
                                                 (Lit (String "password"))
                                                 [])))))))
                                          []))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "user2")
                                               (: (Ident "save") [])))
                                             []))))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "auth")
                                                (: (Ident "add") [])))
                                              (:
                                               (ExpName
                                                (Name
                                                 (:
                                                  (Ident "Jenkins")
                                                  (: (Ident "ADMINISTER") []))))
                                               (:
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "user")
                                                    (: (Ident "getId") [])))
                                                  []))
                                                []))))))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "auth")
                                                 (: (Ident "add") [])))
                                               (:
                                                (ExpName
                                                 (Name
                                                  (:
                                                   (Ident "Jenkins")
                                                   (: (Ident "READ") []))))
                                                (:
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "user2")
                                                     (: (Ident "getId") [])))
                                                   []))
                                                 []))))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident
                                                     "SecurityContextHolder")
                                                    (:
                                                     (Ident "getContext")
                                                     [])))
                                                  []))
                                                []
                                                (Ident "setAuthentication")
                                                (:
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "user")
                                                     (:
                                                      (Ident "impersonate")
                                                      [])))
                                                   []))
                                                 [])))))
                                            (:
                                             (LocalVars
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,) (Ident "HtmlForm") [])
                                                  []))))
                                              (:
                                               (VarDecl
                                                (VarId (Ident "form"))
                                                (Just
                                                 (InitExp
                                                  (MethodInv
                                                   (PrimaryMethodCall
                                                    (MethodInv
                                                     (PrimaryMethodCall
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "j")
                                                            (:
                                                             (Ident
                                                              "createWebClient")
                                                             [])))
                                                          []))
                                                        []
                                                        (Ident "login")
                                                        (:
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident "user")
                                                             (:
                                                              (Ident "getId")
                                                              [])))
                                                           []))
                                                         (:
                                                          (Lit
                                                           (String "password"))
                                                          []))))
                                                      []
                                                      (Ident "goTo")
                                                      (:
                                                       (BinOp
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "user2")
                                                            (:
                                                             (Ident "getUrl")
                                                             [])))
                                                          []))
                                                        Add
                                                        (Lit
                                                         (String "/delete")))
                                                       [])))
                                                    []
                                                    (Ident "getFormByName")
                                                    (:
                                                     (Lit (String "delete"))
                                                     []))))))
                                               []))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "j")
                                                    (: (Ident "submit") [])))
                                                  (:
                                                   (ExpName
                                                    (Name
                                                     (: (Ident "form") [])))
                                                   [])))))
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "assertFalse")
                                                     []))
                                                   (:
                                                    (Lit
                                                     (String
                                                      "User should be deleted from memory."))
                                                    (:
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "User")
                                                           (:
                                                            (Ident "getAll")
                                                            [])))
                                                         []))
                                                       []
                                                       (Ident "contains")
                                                       (:
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "user2")
                                                           [])))
                                                        [])))
                                                     []))))))
                                               (:
                                                (BlockStmt
                                                 (ExpStmt
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "assertFalse")
                                                      []))
                                                    (:
                                                     (Lit
                                                      (String
                                                       "User should be deleted with his persistent data."))
                                                     (:
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "user2")
                                                            (:
                                                             (Ident
                                                              "getConfigFile")
                                                             [])))
                                                          []))
                                                        []
                                                        (Ident "exists")
                                                        []))
                                                      []))))))
                                                (:
                                                 (BlockStmt
                                                  (ExpStmt
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "User")
                                                       (: (Ident "reload") [])))
                                                     []))))
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "assertNull")
                                                        []))
                                                      (:
                                                       (Lit
                                                        (String
                                                         "Deleted user should not be loaded."))
                                                       (:
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "User")
                                                            (:
                                                             (Ident "get")
                                                             [])))
                                                          (:
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident "user2")
                                                               (:
                                                                (Ident "getId")
                                                                [])))
                                                             []))
                                                           (:
                                                            (Lit
                                                             (Boolean False))
                                                            (:
                                                             (ExpName
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "Collections")
                                                                (:
                                                                 (Ident
                                                                  "EMPTY_MAP")
                                                                 []))))
                                                             [])))))
                                                        []))))))
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (Assign
                                                      (NameLhs
                                                       (Name
                                                        (: (Ident "user2") [])))
                                                      EqualA
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "realm")
                                                          (:
                                                           (Ident
                                                            "createAccount")
                                                           [])))
                                                        (:
                                                         (Lit
                                                          (String
                                                           "John Smith2"))
                                                         (:
                                                          (Lit
                                                           (String "password"))
                                                          [])))))))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident
                                                             "SecurityContextHolder")
                                                            (:
                                                             (Ident
                                                              "getContext")
                                                             [])))
                                                          []))
                                                        []
                                                        (Ident
                                                         "setAuthentication")
                                                        (:
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident "user2")
                                                             (:
                                                              (Ident
                                                               "impersonate")
                                                              [])))
                                                           []))
                                                         [])))))
                                                    (:
                                                     (BlockStmt
                                                      (Try
                                                       (Block
                                                        (:
                                                         (BlockStmt
                                                          (ExpStmt
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident "user")
                                                               (:
                                                                (Ident
                                                                 "doDoDelete")
                                                                [])))
                                                             (:
                                                              (Lit Null)
                                                              (:
                                                               (Lit Null)
                                                               []))))))
                                                         (:
                                                          (BlockStmt
                                                           (ExpStmt
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "fail")
                                                                []))
                                                              (:
                                                               (Lit
                                                                (String
                                                                 "User should not have permission to delete antoher user."))
                                                               [])))))
                                                          [])))
                                                       (:
                                                        (Catch
                                                         (FormalParam
                                                          []
                                                          (RefType
                                                           (ClassRefType
                                                            (ClassType
                                                             (:
                                                              ((,)
                                                               (Ident
                                                                "Exception")
                                                               [])
                                                              []))))
                                                          False
                                                          (VarId (Ident "e")))
                                                         (Block
                                                          (:
                                                           (BlockStmt
                                                            (IfThen
                                                             (PreNot
                                                              (MethodInv
                                                               (PrimaryMethodCall
                                                                (MethodInv
                                                                 (MethodCall
                                                                  (Name
                                                                   (:
                                                                    (Ident "e")
                                                                    (:
                                                                     (Ident
                                                                      "getClass")
                                                                     [])))
                                                                  []))
                                                                []
                                                                (Ident
                                                                 "isAssignableFrom")
                                                                (:
                                                                 (ClassLit
                                                                  (Just
                                                                   (RefType
                                                                    (ClassRefType
                                                                     (ClassType
                                                                      (:
                                                                       ((,)
                                                                        (Ident
                                                                         "AccessDeniedException2")
                                                                        [])
                                                                       []))))))
                                                                 []))))
                                                             (StmtBlock
                                                              (Block
                                                               (:
                                                                (BlockStmt
                                                                 (ExpStmt
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "fail")
                                                                      []))
                                                                    (:
                                                                     (Lit
                                                                      (String
                                                                       "AccessDeniedException should be thrown."))
                                                                     [])))))
                                                                [])))))
                                                           [])))
                                                        [])
                                                       Nothing))
                                                     (:
                                                      (BlockStmt
                                                       (ExpStmt
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "user")
                                                            (:
                                                             (Ident "save")
                                                             [])))
                                                          []))))
                                                      (:
                                                       (LocalVars
                                                        []
                                                        (RefType
                                                         (ClassRefType
                                                          (ClassType
                                                           (:
                                                            ((,)
                                                             (Ident
                                                              "JenkinsRule")
                                                             [])
                                                            (:
                                                             ((,)
                                                              (Ident
                                                               "WebClient")
                                                              [])
                                                             [])))))
                                                        (:
                                                         (VarDecl
                                                          (VarId
                                                           (Ident "client"))
                                                          (Just
                                                           (InitExp
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "j")
                                                                (:
                                                                 (Ident
                                                                  "createWebClient")
                                                                 [])))
                                                              [])))))
                                                         []))
                                                       (:
                                                        (BlockStmt
                                                         (ExpStmt
                                                          (Assign
                                                           (NameLhs
                                                            (Name
                                                             (:
                                                              (Ident "form")
                                                              [])))
                                                           EqualA
                                                           (MethodInv
                                                            (PrimaryMethodCall
                                                             (MethodInv
                                                              (PrimaryMethodCall
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "client")
                                                                   (:
                                                                    (Ident
                                                                     "login")
                                                                    [])))
                                                                 (:
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "user")
                                                                      (:
                                                                       (Ident
                                                                        "getId")
                                                                       [])))
                                                                    []))
                                                                  (:
                                                                   (Lit
                                                                    (String
                                                                     "password"))
                                                                   []))))
                                                               []
                                                               (Ident "goTo")
                                                               (:
                                                                (BinOp
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "user")
                                                                     (:
                                                                      (Ident
                                                                       "getUrl")
                                                                      [])))
                                                                   []))
                                                                 Add
                                                                 (Lit
                                                                  (String
                                                                   "/delete")))
                                                                [])))
                                                             []
                                                             (Ident
                                                              "getFormByName")
                                                             (:
                                                              (Lit
                                                               (String
                                                                "delete"))
                                                              []))))))
                                                        (:
                                                         (BlockStmt
                                                          (Try
                                                           (Block
                                                            (:
                                                             (BlockStmt
                                                              (ExpStmt
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident "j")
                                                                   (:
                                                                    (Ident
                                                                     "submit")
                                                                    [])))
                                                                 (:
                                                                  (ExpName
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "form")
                                                                     [])))
                                                                  [])))))
                                                             (:
                                                              (BlockStmt
                                                               (ExpStmt
                                                                (MethodInv
                                                                 (MethodCall
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "fail")
                                                                    []))
                                                                  (:
                                                                   (Lit
                                                                    (String
                                                                     "User should not be able to delete himself"))
                                                                   [])))))
                                                              [])))
                                                           (:
                                                            (Catch
                                                             (FormalParam
                                                              []
                                                              (RefType
                                                               (ClassRefType
                                                                (ClassType
                                                                 (:
                                                                  ((,)
                                                                   (Ident
                                                                    "FailingHttpStatusCodeException")
                                                                   [])
                                                                  []))))
                                                              False
                                                              (VarId
                                                               (Ident "e")))
                                                             (Block []))
                                                            [])
                                                           Nothing))
                                                         (:
                                                          (BlockStmt
                                                           (ExpStmt
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "assertTrue")
                                                                []))
                                                              (:
                                                               (Lit
                                                                (String
                                                                 "User should not delete himself from memory."))
                                                               (:
                                                                (MethodInv
                                                                 (PrimaryMethodCall
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "User")
                                                                      (:
                                                                       (Ident
                                                                        "getAll")
                                                                       [])))
                                                                    []))
                                                                  []
                                                                  (Ident
                                                                   "contains")
                                                                  (:
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "user")
                                                                      [])))
                                                                   [])))
                                                                []))))))
                                                          (:
                                                           (BlockStmt
                                                            (ExpStmt
                                                             (MethodInv
                                                              (MethodCall
                                                               (Name
                                                                (:
                                                                 (Ident
                                                                  "assertTrue")
                                                                 []))
                                                               (:
                                                                (Lit
                                                                 (String
                                                                  "User should not delete his persistent data."))
                                                                (:
                                                                 (MethodInv
                                                                  (PrimaryMethodCall
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "user")
                                                                       (:
                                                                        (Ident
                                                                         "getConfigFile")
                                                                        [])))
                                                                     []))
                                                                   []
                                                                   (Ident
                                                                    "exists")
                                                                   []))
                                                                 []))))))
                                                           (:
                                                            (BlockStmt
                                                             (ExpStmt
                                                              (MethodInv
                                                               (MethodCall
                                                                (Name
                                                                 (:
                                                                  (Ident "User")
                                                                  (:
                                                                   (Ident
                                                                    "reload")
                                                                   [])))
                                                                []))))
                                                            (:
                                                             (BlockStmt
                                                              (ExpStmt
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "assertNotNull")
                                                                   []))
                                                                 (:
                                                                  (Lit
                                                                   (String
                                                                    "Deleted user should be loaded."))
                                                                  (:
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "User")
                                                                       (:
                                                                        (Ident
                                                                         "get")
                                                                        [])))
                                                                     (:
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "user")
                                                                          (:
                                                                           (Ident
                                                                            "getId")
                                                                           [])))
                                                                        []))
                                                                      (:
                                                                       (Lit
                                                                        (Boolean
                                                                         False))
                                                                       (:
                                                                        (ExpName
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "Collections")
                                                                           (:
                                                                            (Ident
                                                                             "EMPTY_MAP")
                                                                            []))))
                                                                        [])))))
                                                                   []))))))
                                                             [])))))))))))))))))))))))))))))))))
                            (:
                             (MemberDecl
                              (MethodDecl
                               (:
                                (Annotation
                                 (MarkerAnnotation
                                  (Name (: (Ident "Test") []))))
                                (: Public []))
                               []
                               Nothing
                               (Ident "testHasPermission")
                               []
                               (:
                                (ClassRefType
                                 (ClassType
                                  (: ((,) (Ident "IOException") []) [])))
                                [])
                               Nothing
                               (MethodBody
                                (Just
                                 (Block
                                  (:
                                   (LocalVars
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,)
                                         (Ident
                                          "GlobalMatrixAuthorizationStrategy")
                                         [])
                                        []))))
                                    (:
                                     (VarDecl
                                      (VarId (Ident "auth"))
                                      (Just
                                       (InitExp
                                        (InstanceCreation
                                         []
                                         (TypeDeclSpecifier
                                          (ClassType
                                           (:
                                            ((,)
                                             (Ident
                                              "GlobalMatrixAuthorizationStrategy")
                                             [])
                                            [])))
                                         []
                                         Nothing))))
                                     []))
                                   (:
                                    (BlockStmt
                                     (ExpStmt
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "j")
                                          (:
                                           (Ident "jenkins")
                                           (:
                                            (Ident "setAuthorizationStrategy")
                                            []))))
                                        (:
                                         (ExpName (Name (: (Ident "auth") [])))
                                         [])))))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "j")
                                           (:
                                            (Ident "jenkins")
                                            (: (Ident "setCrumbIssuer") []))))
                                         (: (Lit Null) [])))))
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,)
                                            (Ident "HudsonPrivateSecurityRealm")
                                            [])
                                           []))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "realm"))
                                         (Just
                                          (InitExp
                                           (InstanceCreation
                                            []
                                            (TypeDeclSpecifier
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident
                                                 "HudsonPrivateSecurityRealm")
                                                [])
                                               [])))
                                            (: (Lit (Boolean False)) [])
                                            Nothing))))
                                        []))
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "j")
                                             (:
                                              (Ident "jenkins")
                                              (:
                                               (Ident "setSecurityRealm")
                                               []))))
                                           (:
                                            (ExpName
                                             (Name (: (Ident "realm") [])))
                                            [])))))
                                       (:
                                        (LocalVars
                                         []
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (: ((,) (Ident "User") []) []))))
                                         (:
                                          (VarDecl
                                           (VarId (Ident "user"))
                                           (Just
                                            (InitExp
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "realm")
                                                 (:
                                                  (Ident "createAccount")
                                                  [])))
                                               (:
                                                (Lit (String "John Smith"))
                                                (:
                                                 (Lit (String "password"))
                                                 [])))))))
                                          []))
                                        (:
                                         (LocalVars
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (: ((,) (Ident "User") []) []))))
                                          (:
                                           (VarDecl
                                            (VarId (Ident "user2"))
                                            (Just
                                             (InitExp
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "realm")
                                                  (:
                                                   (Ident "createAccount")
                                                   [])))
                                                (:
                                                 (Lit (String "John Smith2"))
                                                 (:
                                                  (Lit (String "password"))
                                                  [])))))))
                                           []))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (PrimaryMethodCall
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident
                                                   "SecurityContextHolder")
                                                  (: (Ident "getContext") [])))
                                                []))
                                              []
                                              (Ident "setAuthentication")
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "user")
                                                   (:
                                                    (Ident "impersonate")
                                                    [])))
                                                 []))
                                               [])))))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (: (Ident "assertFalse") []))
                                               (:
                                                (Lit
                                                 (String
                                                  "Current user should not have permission read."))
                                                (:
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "user2")
                                                     (:
                                                      (Ident "hasPermission")
                                                      [])))
                                                   (:
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident "Permission")
                                                       (: (Ident "READ") []))))
                                                    [])))
                                                 []))))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (: (Ident "assertTrue") []))
                                                (:
                                                 (Lit
                                                  (String
                                                   "Current user should always have permission read to himself."))
                                                 (:
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "user")
                                                      (:
                                                       (Ident "hasPermission")
                                                       [])))
                                                    (:
                                                     (ExpName
                                                      (Name
                                                       (:
                                                        (Ident "Permission")
                                                        (: (Ident "READ") []))))
                                                     [])))
                                                  []))))))
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "auth")
                                                   (: (Ident "add") [])))
                                                 (:
                                                  (ExpName
                                                   (Name
                                                    (:
                                                     (Ident "Jenkins")
                                                     (:
                                                      (Ident "ADMINISTER")
                                                      []))))
                                                  (:
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "user")
                                                       (: (Ident "getId") [])))
                                                     []))
                                                   []))))))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (: (Ident "assertTrue") []))
                                                  (:
                                                   (Lit
                                                    (String
                                                     "Current user should have permission read, because he has permission administer."))
                                                   (:
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "user2")
                                                        (:
                                                         (Ident "hasPermission")
                                                         [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (:
                                                          (Ident "Permission")
                                                          (:
                                                           (Ident "READ")
                                                           []))))
                                                       [])))
                                                    []))))))
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (PrimaryMethodCall
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident
                                                        "SecurityContextHolder")
                                                       (:
                                                        (Ident "getContext")
                                                        [])))
                                                     []))
                                                   []
                                                   (Ident "setAuthentication")
                                                   (:
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident "Jenkins")
                                                       (:
                                                        (Ident "ANONYMOUS")
                                                        []))))
                                                    [])))))
                                               (:
                                                (BlockStmt
                                                 (ExpStmt
                                                  (Assign
                                                   (NameLhs
                                                    (Name
                                                     (: (Ident "user2") [])))
                                                   EqualA
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "User")
                                                       (: (Ident "get") [])))
                                                     (:
                                                      (Lit (String "anonymous"))
                                                      []))))))
                                                (:
                                                 (BlockStmt
                                                  (ExpStmt
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "assertFalse")
                                                       []))
                                                     (:
                                                      (Lit
                                                       (String
                                                        "Current user should not have permission read, because does not have global permission read and authentication is anonymous."))
                                                      (:
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "user2")
                                                           (:
                                                            (Ident
                                                             "hasPermission")
                                                            [])))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident
                                                              "Permission")
                                                             (:
                                                              (Ident "READ")
                                                              []))))
                                                          [])))
                                                       []))))))
                                                 []))))))))))))))))))))
                             (:
                              (MemberDecl
                               (MethodDecl
                                (:
                                 (Annotation
                                  (MarkerAnnotation
                                   (Name (: (Ident "Test") []))))
                                 (: Public []))
                                []
                                Nothing
                                (Ident "testCanDelete")
                                []
                                (:
                                 (ClassRefType
                                  (ClassType
                                   (: ((,) (Ident "IOException") []) [])))
                                 [])
                                Nothing
                                (MethodBody
                                 (Just
                                  (Block
                                   (:
                                    (LocalVars
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident
                                           "GlobalMatrixAuthorizationStrategy")
                                          [])
                                         []))))
                                     (:
                                      (VarDecl
                                       (VarId (Ident "auth"))
                                       (Just
                                        (InitExp
                                         (InstanceCreation
                                          []
                                          (TypeDeclSpecifier
                                           (ClassType
                                            (:
                                             ((,)
                                              (Ident
                                               "GlobalMatrixAuthorizationStrategy")
                                              [])
                                             [])))
                                          []
                                          Nothing))))
                                      []))
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "j")
                                           (:
                                            (Ident "jenkins")
                                            (:
                                             (Ident "setAuthorizationStrategy")
                                             []))))
                                         (:
                                          (ExpName (Name (: (Ident "auth") [])))
                                          [])))))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "j")
                                            (:
                                             (Ident "jenkins")
                                             (: (Ident "setCrumbIssuer") []))))
                                          (: (Lit Null) [])))))
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,)
                                             (Ident
                                              "HudsonPrivateSecurityRealm")
                                             [])
                                            []))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "realm"))
                                          (Just
                                           (InitExp
                                            (InstanceCreation
                                             []
                                             (TypeDeclSpecifier
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident
                                                  "HudsonPrivateSecurityRealm")
                                                 [])
                                                [])))
                                             (: (Lit (Boolean False)) [])
                                             Nothing))))
                                         []))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "j")
                                              (:
                                               (Ident "jenkins")
                                               (:
                                                (Ident "setSecurityRealm")
                                                []))))
                                            (:
                                             (ExpName
                                              (Name (: (Ident "realm") [])))
                                             [])))))
                                        (:
                                         (LocalVars
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (: ((,) (Ident "User") []) []))))
                                          (:
                                           (VarDecl
                                            (VarId (Ident "user"))
                                            (Just
                                             (InitExp
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "realm")
                                                  (:
                                                   (Ident "createAccount")
                                                   [])))
                                                (:
                                                 (Lit (String "John Smith"))
                                                 (:
                                                  (Lit (String "password"))
                                                  [])))))))
                                           []))
                                         (:
                                          (LocalVars
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (: ((,) (Ident "User") []) []))))
                                           (:
                                            (VarDecl
                                             (VarId (Ident "user2"))
                                             (Just
                                              (InitExp
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "realm")
                                                   (:
                                                    (Ident "createAccount")
                                                    [])))
                                                 (:
                                                  (Lit (String "John Smith2"))
                                                  (:
                                                   (Lit (String "password"))
                                                   [])))))))
                                            []))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "user2")
                                                 (: (Ident "save") [])))
                                               []))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident
                                                     "SecurityContextHolder")
                                                    (:
                                                     (Ident "getContext")
                                                     [])))
                                                  []))
                                                []
                                                (Ident "setAuthentication")
                                                (:
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "user")
                                                     (:
                                                      (Ident "impersonate")
                                                      [])))
                                                   []))
                                                 [])))))
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (: (Ident "assertFalse") []))
                                                 (:
                                                  (Lit
                                                   (String
                                                    "Ordinary user cannot delete somebody else"))
                                                  (:
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "user2")
                                                       (:
                                                        (Ident "canDelete")
                                                        [])))
                                                     []))
                                                   []))))))
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "auth")
                                                    (: (Ident "add") [])))
                                                  (:
                                                   (ExpName
                                                    (Name
                                                     (:
                                                      (Ident "Jenkins")
                                                      (:
                                                       (Ident "ADMINISTER")
                                                       []))))
                                                   (:
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "user")
                                                        (: (Ident "getId") [])))
                                                      []))
                                                    []))))))
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (: (Ident "assertTrue") []))
                                                   (:
                                                    (Lit
                                                     (String
                                                      "Administrator can delete anybody else"))
                                                    (:
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "user2")
                                                         (:
                                                          (Ident "canDelete")
                                                          [])))
                                                       []))
                                                     []))))))
                                               (:
                                                (BlockStmt
                                                 (ExpStmt
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "assertFalse")
                                                      []))
                                                    (:
                                                     (Lit
                                                      (String
                                                       "User (even admin) cannot delete himself"))
                                                     (:
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "user")
                                                          (:
                                                           (Ident "canDelete")
                                                           [])))
                                                        []))
                                                      []))))))
                                                (:
                                                 (BlockStmt
                                                  (ExpStmt
                                                   (MethodInv
                                                    (PrimaryMethodCall
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident
                                                          "SecurityContextHolder")
                                                         (:
                                                          (Ident "getContext")
                                                          [])))
                                                       []))
                                                     []
                                                     (Ident "setAuthentication")
                                                     (:
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "user2")
                                                          (:
                                                           (Ident "impersonate")
                                                           [])))
                                                        []))
                                                      [])))))
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "auth")
                                                        (: (Ident "add") [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (:
                                                          (Ident "Jenkins")
                                                          (:
                                                           (Ident "ADMINISTER")
                                                           []))))
                                                       (:
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "user2")
                                                            (:
                                                             (Ident "getId")
                                                             [])))
                                                          []))
                                                        []))))))
                                                  (:
                                                   (LocalVars
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,) (Ident "User") [])
                                                        []))))
                                                    (:
                                                     (VarDecl
                                                      (VarId (Ident "user3"))
                                                      (Just
                                                       (InitExp
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "User")
                                                            (:
                                                             (Ident "get")
                                                             [])))
                                                          (:
                                                           (Lit
                                                            (String
                                                             "Random Somebody"))
                                                           []))))))
                                                     []))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "assertFalse")
                                                          []))
                                                        (:
                                                         (Lit
                                                          (String
                                                           "Storage-less temporary user cannot be deleted"))
                                                         (:
                                                          (MethodInv
                                                           (MethodCall
                                                            (Name
                                                             (:
                                                              (Ident "user3")
                                                              (:
                                                               (Ident
                                                                "canDelete")
                                                               [])))
                                                            []))
                                                          []))))))
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "user3")
                                                           (:
                                                            (Ident "save")
                                                            [])))
                                                         []))))
                                                     (:
                                                      (BlockStmt
                                                       (ExpStmt
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "assertTrue")
                                                            []))
                                                          (:
                                                           (Lit
                                                            (String
                                                             "But once storage is allocated, he can be deleted"))
                                                           (:
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident "user3")
                                                                (:
                                                                 (Ident
                                                                  "canDelete")
                                                                 [])))
                                                              []))
                                                            []))))))
                                                      []))))))))))))))))))))))))
                              (:
                               (MemberDecl
                                (MemberClassDecl
                                 (ClassDecl
                                  (: Public (: Static []))
                                  (Ident "SomeUserProperty")
                                  []
                                  (Just
                                   (ClassRefType
                                    (ClassType
                                     (: ((,) (Ident "UserProperty") []) []))))
                                  []
                                  (ClassBody
                                   (:
                                    (MemberDecl
                                     (MemberClassDecl
                                      (ClassDecl
                                       (:
                                        (Annotation
                                         (MarkerAnnotation
                                          (Name
                                           (: (Ident "TestExtension") []))))
                                        (: Public (: Static [])))
                                       (Ident "DescriptorImpl")
                                       []
                                       (Just
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,)
                                            (Ident "UserPropertyDescriptor")
                                            [])
                                           []))))
                                       []
                                       (ClassBody
                                        (:
                                         (MemberDecl
                                          (MethodDecl
                                           (: Public [])
                                           []
                                           (Just
                                            (RefType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "String") [])
                                                [])))))
                                           (Ident "getDisplayName")
                                           []
                                           []
                                           Nothing
                                           (MethodBody
                                            (Just
                                             (Block
                                              (:
                                               (BlockStmt
                                                (Return
                                                 (Just
                                                  (Lit
                                                   (String "UserProperty1")))))
                                               []))))))
                                         (:
                                          (MemberDecl
                                           (MethodDecl
                                            (:
                                             (Annotation
                                              (MarkerAnnotation
                                               (Name
                                                (: (Ident "Override") []))))
                                             (: Public []))
                                            []
                                            (Just
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "UserProperty") [])
                                                 [])))))
                                            (Ident "newInstance")
                                            (:
                                             (FormalParam
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,) (Ident "User") [])
                                                  []))))
                                              False
                                              (VarId (Ident "user")))
                                             [])
                                            []
                                            Nothing
                                            (MethodBody
                                             (Just
                                              (Block
                                               (:
                                                (BlockStmt
                                                 (Return
                                                  (Just
                                                   (InstanceCreation
                                                    []
                                                    (TypeDeclSpecifier
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident
                                                         "SomeUserProperty")
                                                        [])
                                                       [])))
                                                    []
                                                    Nothing))))
                                                []))))))
                                          []))))))
                                    [])))))
                               [])))))))))))))))))))))))))))))
  []))
