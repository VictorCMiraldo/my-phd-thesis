(CompilationUnit
 (Just
  (PackageDecl
   (Name
    (: (Ident "org") (: (Ident "elasticsearch") (: (Ident "ingest") []))))))
 (:
  (ImportDecl
   False
   (Name
    (:
     (Ident "org")
     (:
      (Ident "apache")
      (: (Ident "logging") (: (Ident "log4j") (: (Ident "LogManager") []))))))
   False)
  (:
   (ImportDecl
    False
    (Name
     (:
      (Ident "org")
      (:
       (Ident "apache")
       (: (Ident "logging") (: (Ident "log4j") (: (Ident "Logger") []))))))
    False)
   (:
    (ImportDecl
     False
     (Name
      (:
       (Ident "org")
       (:
        (Ident "elasticsearch")
        (: (Ident "ElasticsearchParseException") []))))
     False)
    (:
     (ImportDecl
      False
      (Name
       (:
        (Ident "org")
        (: (Ident "elasticsearch") (: (Ident "ExceptionsHelper") []))))
      False)
     (:
      (ImportDecl
       False
       (Name
        (:
         (Ident "org")
         (:
          (Ident "elasticsearch")
          (: (Ident "ResourceNotFoundException") []))))
       False)
      (:
       (ImportDecl
        False
        (Name
         (:
          (Ident "org")
          (:
           (Ident "elasticsearch")
           (: (Ident "action") (: (Ident "ActionListener") [])))))
        False)
       (:
        (ImportDecl
         False
         (Name
          (:
           (Ident "org")
           (:
            (Ident "elasticsearch")
            (: (Ident "action") (: (Ident "DocWriteRequest") [])))))
         False)
        (:
         (ImportDecl
          False
          (Name
           (:
            (Ident "org")
            (:
             (Ident "elasticsearch")
             (:
              (Ident "action")
              (: (Ident "bulk") (: (Ident "TransportBulkAction") []))))))
          False)
         (:
          (ImportDecl
           False
           (Name
            (:
             (Ident "org")
             (:
              (Ident "elasticsearch")
              (:
               (Ident "action")
               (: (Ident "index") (: (Ident "IndexRequest") []))))))
           False)
          (:
           (ImportDecl
            False
            (Name
             (:
              (Ident "org")
              (:
               (Ident "elasticsearch")
               (:
                (Ident "action")
                (: (Ident "ingest") (: (Ident "DeletePipelineRequest") []))))))
            False)
           (:
            (ImportDecl
             False
             (Name
              (:
               (Ident "org")
               (:
                (Ident "elasticsearch")
                (:
                 (Ident "action")
                 (: (Ident "ingest") (: (Ident "PutPipelineRequest") []))))))
             False)
            (:
             (ImportDecl
              False
              (Name
               (:
                (Ident "org")
                (:
                 (Ident "elasticsearch")
                 (:
                  (Ident "action")
                  (:
                   (Ident "support")
                   (:
                    (Ident "master")
                    (: (Ident "AcknowledgedResponse") [])))))))
              False)
             (:
              (ImportDecl
               False
               (Name
                (:
                 (Ident "org")
                 (:
                  (Ident "elasticsearch")
                  (: (Ident "client") (: (Ident "Client") [])))))
               False)
              (:
               (ImportDecl
                False
                (Name
                 (:
                  (Ident "org")
                  (:
                   (Ident "elasticsearch")
                   (:
                    (Ident "cluster")
                    (: (Ident "AckedClusterStateUpdateTask") [])))))
                False)
               (:
                (ImportDecl
                 False
                 (Name
                  (:
                   (Ident "org")
                   (:
                    (Ident "elasticsearch")
                    (:
                     (Ident "cluster")
                     (: (Ident "ClusterChangedEvent") [])))))
                 False)
                (:
                 (ImportDecl
                  False
                  (Name
                   (:
                    (Ident "org")
                    (:
                     (Ident "elasticsearch")
                     (: (Ident "cluster") (: (Ident "ClusterState") [])))))
                  False)
                 (:
                  (ImportDecl
                   False
                   (Name
                    (:
                     (Ident "org")
                     (:
                      (Ident "elasticsearch")
                      (:
                       (Ident "cluster")
                       (: (Ident "ClusterStateApplier") [])))))
                   False)
                  (:
                   (ImportDecl
                    False
                    (Name
                     (:
                      (Ident "org")
                      (:
                       (Ident "elasticsearch")
                       (:
                        (Ident "cluster")
                        (: (Ident "metadata") (: (Ident "MetaData") []))))))
                    False)
                   (:
                    (ImportDecl
                     False
                     (Name
                      (:
                       (Ident "org")
                       (:
                        (Ident "elasticsearch")
                        (:
                         (Ident "cluster")
                         (: (Ident "node") (: (Ident "DiscoveryNode") []))))))
                     False)
                    (:
                     (ImportDecl
                      False
                      (Name
                       (:
                        (Ident "org")
                        (:
                         (Ident "elasticsearch")
                         (:
                          (Ident "cluster")
                          (:
                           (Ident "service")
                           (: (Ident "ClusterService") []))))))
                      False)
                     (:
                      (ImportDecl
                       False
                       (Name
                        (:
                         (Ident "org")
                         (:
                          (Ident "elasticsearch")
                          (:
                           (Ident "common")
                           (: (Ident "collect") (: (Ident "Tuple") []))))))
                       False)
                      (:
                       (ImportDecl
                        False
                        (Name
                         (:
                          (Ident "org")
                          (:
                           (Ident "elasticsearch")
                           (:
                            (Ident "common")
                            (: (Ident "regex") (: (Ident "Regex") []))))))
                        False)
                       (:
                        (ImportDecl
                         False
                         (Name
                          (:
                           (Ident "org")
                           (:
                            (Ident "elasticsearch")
                            (:
                             (Ident "common")
                             (: (Ident "unit") (: (Ident "TimeValue") []))))))
                         False)
                        (:
                         (ImportDecl
                          False
                          (Name
                           (:
                            (Ident "org")
                            (:
                             (Ident "elasticsearch")
                             (:
                              (Ident "common")
                              (:
                               (Ident "util")
                               (:
                                (Ident "concurrent")
                                (: (Ident "AbstractRunnable") [])))))))
                          False)
                         (:
                          (ImportDecl
                           False
                           (Name
                            (:
                             (Ident "org")
                             (:
                              (Ident "elasticsearch")
                              (:
                               (Ident "common")
                               (:
                                (Ident "xcontent")
                                (: (Ident "XContentHelper") []))))))
                           False)
                          (:
                           (ImportDecl
                            False
                            (Name
                             (:
                              (Ident "org")
                              (:
                               (Ident "elasticsearch")
                               (: (Ident "env") (: (Ident "Environment") [])))))
                            False)
                           (:
                            (ImportDecl
                             False
                             (Name
                              (:
                               (Ident "org")
                               (:
                                (Ident "elasticsearch")
                                (:
                                 (Ident "gateway")
                                 (: (Ident "GatewayService") [])))))
                             False)
                            (:
                             (ImportDecl
                              False
                              (Name
                               (:
                                (Ident "org")
                                (:
                                 (Ident "elasticsearch")
                                 (:
                                  (Ident "index")
                                  (: (Ident "VersionType") [])))))
                              False)
                             (:
                              (ImportDecl
                               False
                               (Name
                                (:
                                 (Ident "org")
                                 (:
                                  (Ident "elasticsearch")
                                  (:
                                   (Ident "index")
                                   (:
                                    (Ident "analysis")
                                    (: (Ident "AnalysisRegistry") []))))))
                               False)
                              (:
                               (ImportDecl
                                False
                                (Name
                                 (:
                                  (Ident "org")
                                  (:
                                   (Ident "elasticsearch")
                                   (:
                                    (Ident "plugins")
                                    (: (Ident "IngestPlugin") [])))))
                                False)
                               (:
                                (ImportDecl
                                 False
                                 (Name
                                  (:
                                   (Ident "org")
                                   (:
                                    (Ident "elasticsearch")
                                    (:
                                     (Ident "script")
                                     (: (Ident "ScriptService") [])))))
                                 False)
                                (:
                                 (ImportDecl
                                  False
                                  (Name
                                   (:
                                    (Ident "org")
                                    (:
                                     (Ident "elasticsearch")
                                     (:
                                      (Ident "threadpool")
                                      (: (Ident "ThreadPool") [])))))
                                  False)
                                 (:
                                  (ImportDecl
                                   False
                                   (Name
                                    (:
                                     (Ident "java")
                                     (:
                                      (Ident "util")
                                      (: (Ident "ArrayList") []))))
                                   False)
                                  (:
                                   (ImportDecl
                                    False
                                    (Name
                                     (:
                                      (Ident "java")
                                      (:
                                       (Ident "util")
                                       (: (Ident "Collections") []))))
                                    False)
                                   (:
                                    (ImportDecl
                                     False
                                     (Name
                                      (:
                                       (Ident "java")
                                       (:
                                        (Ident "util")
                                        (: (Ident "HashMap") []))))
                                     False)
                                    (:
                                     (ImportDecl
                                      False
                                      (Name
                                       (:
                                        (Ident "java")
                                        (:
                                         (Ident "util")
                                         (: (Ident "HashSet") []))))
                                      False)
                                     (:
                                      (ImportDecl
                                       False
                                       (Name
                                        (:
                                         (Ident "java")
                                         (:
                                          (Ident "util")
                                          (: (Ident "Iterator") []))))
                                       False)
                                      (:
                                       (ImportDecl
                                        False
                                        (Name
                                         (:
                                          (Ident "java")
                                          (:
                                           (Ident "util")
                                           (: (Ident "List") []))))
                                        False)
                                       (:
                                        (ImportDecl
                                         False
                                         (Name
                                          (:
                                           (Ident "java")
                                           (:
                                            (Ident "util")
                                            (: (Ident "Map") []))))
                                         False)
                                        (:
                                         (ImportDecl
                                          False
                                          (Name
                                           (:
                                            (Ident "java")
                                            (:
                                             (Ident "util")
                                             (: (Ident "Objects") []))))
                                          False)
                                         (:
                                          (ImportDecl
                                           False
                                           (Name
                                            (:
                                             (Ident "java")
                                             (:
                                              (Ident "util")
                                              (: (Ident "Set") []))))
                                           False)
                                          (:
                                           (ImportDecl
                                            False
                                            (Name
                                             (:
                                              (Ident "java")
                                              (:
                                               (Ident "util")
                                               (:
                                                (Ident "concurrent")
                                                (:
                                                 (Ident "CopyOnWriteArrayList")
                                                 [])))))
                                            False)
                                           (:
                                            (ImportDecl
                                             False
                                             (Name
                                              (:
                                               (Ident "java")
                                               (:
                                                (Ident "util")
                                                (:
                                                 (Ident "concurrent")
                                                 (: (Ident "TimeUnit") [])))))
                                             False)
                                            (:
                                             (ImportDecl
                                              False
                                              (Name
                                               (:
                                                (Ident "java")
                                                (:
                                                 (Ident "util")
                                                 (:
                                                  (Ident "concurrent")
                                                  (:
                                                   (Ident "atomic")
                                                   (:
                                                    (Ident "AtomicInteger")
                                                    []))))))
                                              False)
                                             (:
                                              (ImportDecl
                                               False
                                               (Name
                                                (:
                                                 (Ident "java")
                                                 (:
                                                  (Ident "util")
                                                  (:
                                                   (Ident "function")
                                                   (:
                                                    (Ident "BiConsumer")
                                                    [])))))
                                               False)
                                              (:
                                               (ImportDecl
                                                False
                                                (Name
                                                 (:
                                                  (Ident "java")
                                                  (:
                                                   (Ident "util")
                                                   (:
                                                    (Ident "function")
                                                    (:
                                                     (Ident "Consumer")
                                                     [])))))
                                                False)
                                               (:
                                                (ImportDecl
                                                 False
                                                 (Name
                                                  (:
                                                   (Ident "java")
                                                   (:
                                                    (Ident "util")
                                                    (:
                                                     (Ident "function")
                                                     (:
                                                      (Ident "IntConsumer")
                                                      [])))))
                                                 False)
                                                [])))))))))))))))))))))))))))))))))))))))))))))))
 (:
  (ClassTypeDecl
   (ClassDecl
    (: Public [])
    (Ident "IngestService")
    []
    Nothing
    (:
     (ClassRefType (ClassType (: ((,) (Ident "ClusterStateApplier") []) [])))
     [])
    (ClassBody
     (:
      (MemberDecl
       (FieldDecl
        (: Public (: Static (: Final [])))
        (RefType (ClassRefType (ClassType (: ((,) (Ident "String") []) []))))
        (:
         (VarDecl
          (VarId (Ident "NOOP_PIPELINE_NAME"))
          (Just (InitExp (Lit (String "_none")))))
         [])))
      (:
       (MemberDecl
        (FieldDecl
         (: Private (: Static (: Final [])))
         (RefType (ClassRefType (ClassType (: ((,) (Ident "Logger") []) []))))
         (:
          (VarDecl
           (VarId (Ident "logger"))
           (Just
            (InitExp
             (MethodInv
              (MethodCall
               (Name (: (Ident "LogManager") (: (Ident "getLogger") [])))
               (:
                (ClassLit
                 (Just
                  (RefType
                   (ClassRefType
                    (ClassType (: ((,) (Ident "IngestService") []) []))))))
                []))))))
          [])))
       (:
        (MemberDecl
         (FieldDecl
          (: Private (: Final []))
          (RefType
           (ClassRefType (ClassType (: ((,) (Ident "ClusterService") []) []))))
          (: (VarDecl (VarId (Ident "clusterService")) Nothing) [])))
        (:
         (MemberDecl
          (FieldDecl
           (: Private (: Final []))
           (RefType
            (ClassRefType (ClassType (: ((,) (Ident "ScriptService") []) []))))
           (: (VarDecl (VarId (Ident "scriptService")) Nothing) [])))
         (:
          (MemberDecl
           (FieldDecl
            (: Private (: Final []))
            (RefType
             (ClassRefType
              (ClassType
               (:
                ((,)
                 (Ident "Map")
                 (:
                  (ActualType
                   (ClassRefType (ClassType (: ((,) (Ident "String") []) []))))
                  (:
                   (ActualType
                    (ClassRefType
                     (ClassType
                      (:
                       ((,) (Ident "Processor") [])
                       (: ((,) (Ident "Factory") []) [])))))
                   [])))
                []))))
            (: (VarDecl (VarId (Ident "processorFactories")) Nothing) [])))
          (:
           (MemberDecl
            (FieldDecl
             (: Private (: Volatile []))
             (RefType
              (ClassRefType
               (ClassType
                (:
                 ((,)
                  (Ident "Map")
                  (:
                   (ActualType
                    (ClassRefType (ClassType (: ((,) (Ident "String") []) []))))
                   (:
                    (ActualType
                     (ClassRefType
                      (ClassType (: ((,) (Ident "PipelineHolder") []) []))))
                    [])))
                 []))))
             (:
              (VarDecl
               (VarId (Ident "pipelines"))
               (Just
                (InitExp
                 (MethodInv
                  (MethodCall
                   (Name (: (Ident "Map") (: (Ident "of") [])))
                   [])))))
              [])))
           (:
            (MemberDecl
             (FieldDecl
              (: Private (: Final []))
              (RefType
               (ClassRefType (ClassType (: ((,) (Ident "ThreadPool") []) []))))
              (: (VarDecl (VarId (Ident "threadPool")) Nothing) [])))
            (:
             (MemberDecl
              (FieldDecl
               (: Private (: Final []))
               (RefType
                (ClassRefType
                 (ClassType (: ((,) (Ident "IngestMetric") []) []))))
               (:
                (VarDecl
                 (VarId (Ident "totalMetrics"))
                 (Just
                  (InitExp
                   (InstanceCreation
                    []
                    (TypeDeclSpecifier
                     (ClassType (: ((,) (Ident "IngestMetric") []) [])))
                    []
                    Nothing))))
                [])))
             (:
              (MemberDecl
               (FieldDecl
                (: Private (: Final []))
                (RefType
                 (ClassRefType
                  (ClassType
                   (:
                    ((,)
                     (Ident "List")
                     (:
                      (ActualType
                       (ClassRefType
                        (ClassType
                         (:
                          ((,)
                           (Ident "Consumer")
                           (:
                            (ActualType
                             (ClassRefType
                              (ClassType
                               (: ((,) (Ident "ClusterState") []) []))))
                            []))
                          []))))
                      []))
                    []))))
                (:
                 (VarDecl
                  (VarId (Ident "ingestClusterStateListeners"))
                  (Just
                   (InitExp
                    (InstanceCreation
                     []
                     (TypeDeclSpecifierUnqualifiedWithDiamond
                      (Ident "CopyOnWriteArrayList")
                      Diamond)
                     []
                     Nothing))))
                 [])))
              (:
               (MemberDecl
                (ConstructorDecl
                 (: Public [])
                 []
                 (Ident "IngestService")
                 (:
                  (FormalParam
                   []
                   (RefType
                    (ClassRefType
                     (ClassType (: ((,) (Ident "ClusterService") []) []))))
                   False
                   (VarId (Ident "clusterService")))
                  (:
                   (FormalParam
                    []
                    (RefType
                     (ClassRefType
                      (ClassType (: ((,) (Ident "ThreadPool") []) []))))
                    False
                    (VarId (Ident "threadPool")))
                   (:
                    (FormalParam
                     []
                     (RefType
                      (ClassRefType
                       (ClassType (: ((,) (Ident "Environment") []) []))))
                     False
                     (VarId (Ident "env")))
                    (:
                     (FormalParam
                      []
                      (RefType
                       (ClassRefType
                        (ClassType (: ((,) (Ident "ScriptService") []) []))))
                      False
                      (VarId (Ident "scriptService")))
                     (:
                      (FormalParam
                       []
                       (RefType
                        (ClassRefType
                         (ClassType
                          (: ((,) (Ident "AnalysisRegistry") []) []))))
                       False
                       (VarId (Ident "analysisRegistry")))
                      (:
                       (FormalParam
                        []
                        (RefType
                         (ClassRefType
                          (ClassType
                           (:
                            ((,)
                             (Ident "List")
                             (:
                              (ActualType
                               (ClassRefType
                                (ClassType
                                 (: ((,) (Ident "IngestPlugin") []) []))))
                              []))
                            []))))
                        False
                        (VarId (Ident "ingestPlugins")))
                       (:
                        (FormalParam
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "Client") []) []))))
                         False
                         (VarId (Ident "client")))
                        [])))))))
                 []
                 (ConstructorBody
                  Nothing
                  (:
                   (BlockStmt
                    (ExpStmt
                     (Assign
                      (FieldLhs
                       (PrimaryFieldAccess This (Ident "clusterService")))
                      EqualA
                      (ExpName (Name (: (Ident "clusterService") []))))))
                   (:
                    (BlockStmt
                     (ExpStmt
                      (Assign
                       (FieldLhs
                        (PrimaryFieldAccess This (Ident "scriptService")))
                       EqualA
                       (ExpName (Name (: (Ident "scriptService") []))))))
                    (:
                     (BlockStmt
                      (ExpStmt
                       (Assign
                        (FieldLhs
                         (PrimaryFieldAccess This (Ident "processorFactories")))
                        EqualA
                        (MethodInv
                         (MethodCall
                          (Name (: (Ident "processorFactories") []))
                          (:
                           (ExpName (Name (: (Ident "ingestPlugins") [])))
                           (:
                            (InstanceCreation
                             []
                             (TypeDeclSpecifier
                              (ClassType
                               (:
                                ((,) (Ident "Processor") [])
                                (: ((,) (Ident "Parameters") []) []))))
                             (:
                              (ExpName (Name (: (Ident "env") [])))
                              (:
                               (ExpName (Name (: (Ident "scriptService") [])))
                               (:
                                (ExpName
                                 (Name (: (Ident "analysisRegistry") [])))
                                (:
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "threadPool")
                                     (: (Ident "getThreadContext") [])))
                                   []))
                                 (:
                                  (MethodRef
                                   (Name (: (Ident "threadPool") []))
                                   (Ident "relativeTimeInMillis"))
                                  (:
                                   (Lambda
                                    (LambdaInferredParams
                                     (:
                                      (Ident "delay")
                                      (: (Ident "command") [])))
                                    (LambdaExpression
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "threadPool")
                                         (: (Ident "schedule") [])))
                                       (:
                                        (ExpName
                                         (Name (: (Ident "command") [])))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "TimeValue")
                                             (: (Ident "timeValueMillis") [])))
                                           (:
                                            (ExpName
                                             (Name (: (Ident "delay") [])))
                                            [])))
                                         (:
                                          (ExpName
                                           (Name
                                            (:
                                             (Ident "ThreadPool")
                                             (:
                                              (Ident "Names")
                                              (: (Ident "GENERIC") [])))))
                                          [])))))))
                                   (:
                                    This
                                    (:
                                     (ExpName (Name (: (Ident "client") [])))
                                     []))))))))
                             Nothing)
                            [])))))))
                     (:
                      (BlockStmt
                       (ExpStmt
                        (Assign
                         (FieldLhs
                          (PrimaryFieldAccess This (Ident "threadPool")))
                         EqualA
                         (ExpName (Name (: (Ident "threadPool") []))))))
                      [])))))))
               (:
                (MemberDecl
                 (MethodDecl
                  (: Private (: Static []))
                  []
                  (Just
                   (RefType
                    (ClassRefType
                     (ClassType
                      (:
                       ((,)
                        (Ident "Map")
                        (:
                         (ActualType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "String") []) []))))
                         (:
                          (ActualType
                           (ClassRefType
                            (ClassType
                             (:
                              ((,) (Ident "Processor") [])
                              (: ((,) (Ident "Factory") []) [])))))
                          [])))
                       [])))))
                  (Ident "processorFactories")
                  (:
                   (FormalParam
                    []
                    (RefType
                     (ClassRefType
                      (ClassType
                       (:
                        ((,)
                         (Ident "List")
                         (:
                          (ActualType
                           (ClassRefType
                            (ClassType (: ((,) (Ident "IngestPlugin") []) []))))
                          []))
                        []))))
                    False
                    (VarId (Ident "ingestPlugins")))
                   (:
                    (FormalParam
                     []
                     (RefType
                      (ClassRefType
                       (ClassType
                        (:
                         ((,) (Ident "Processor") [])
                         (: ((,) (Ident "Parameters") []) [])))))
                     False
                     (VarId (Ident "parameters")))
                    []))
                  []
                  Nothing
                  (MethodBody
                   (Just
                    (Block
                     (:
                      (LocalVars
                       []
                       (RefType
                        (ClassRefType
                         (ClassType
                          (:
                           ((,)
                            (Ident "Map")
                            (:
                             (ActualType
                              (ClassRefType
                               (ClassType (: ((,) (Ident "String") []) []))))
                             (:
                              (ActualType
                               (ClassRefType
                                (ClassType
                                 (:
                                  ((,) (Ident "Processor") [])
                                  (: ((,) (Ident "Factory") []) [])))))
                              [])))
                           []))))
                       (:
                        (VarDecl
                         (VarId (Ident "processorFactories"))
                         (Just
                          (InitExp
                           (InstanceCreation
                            []
                            (TypeDeclSpecifierUnqualifiedWithDiamond
                             (Ident "HashMap")
                             Diamond)
                            []
                            Nothing))))
                        []))
                      (:
                       (BlockStmt
                        (EnhancedFor
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "IngestPlugin") []) []))))
                         (Ident "ingestPlugin")
                         (ExpName (Name (: (Ident "ingestPlugins") [])))
                         (StmtBlock
                          (Block
                           (:
                            (LocalVars
                             []
                             (RefType
                              (ClassRefType
                               (ClassType
                                (:
                                 ((,)
                                  (Ident "Map")
                                  (:
                                   (ActualType
                                    (ClassRefType
                                     (ClassType
                                      (: ((,) (Ident "String") []) []))))
                                   (:
                                    (ActualType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,) (Ident "Processor") [])
                                        (: ((,) (Ident "Factory") []) [])))))
                                    [])))
                                 []))))
                             (:
                              (VarDecl
                               (VarId (Ident "newProcessors"))
                               (Just
                                (InitExp
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "ingestPlugin")
                                     (: (Ident "getProcessors") [])))
                                   (:
                                    (ExpName (Name (: (Ident "parameters") [])))
                                    []))))))
                              []))
                            (:
                             (BlockStmt
                              (EnhancedFor
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (:
                                   ((,) (Ident "Map") [])
                                   (:
                                    ((,)
                                     (Ident "Entry")
                                     (:
                                      (ActualType
                                       (ClassRefType
                                        (ClassType
                                         (: ((,) (Ident "String") []) []))))
                                      (:
                                       (ActualType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,) (Ident "Processor") [])
                                           (: ((,) (Ident "Factory") []) [])))))
                                       [])))
                                    [])))))
                               (Ident "entry")
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (:
                                   (Ident "newProcessors")
                                   (: (Ident "entrySet") [])))
                                 []))
                               (StmtBlock
                                (Block
                                 (:
                                  (BlockStmt
                                   (IfThen
                                    (BinOp
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "processorFactories")
                                         (: (Ident "put") [])))
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "entry")
                                            (: (Ident "getKey") [])))
                                          []))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "entry")
                                             (: (Ident "getValue") [])))
                                           []))
                                         []))))
                                     NotEq
                                     (Lit Null))
                                    (StmtBlock
                                     (Block
                                      (:
                                       (BlockStmt
                                        (Throw
                                         (InstanceCreation
                                          []
                                          (TypeDeclSpecifier
                                           (ClassType
                                            (:
                                             ((,)
                                              (Ident "IllegalArgumentException")
                                              [])
                                             [])))
                                          (:
                                           (BinOp
                                            (BinOp
                                             (Lit (String "Ingest processor ["))
                                             Add
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "entry")
                                                 (: (Ident "getKey") [])))
                                               [])))
                                            Add
                                            (Lit
                                             (String
                                              "] is already registered")))
                                           [])
                                          Nothing)))
                                       [])))))
                                  [])))))
                             []))))))
                       (:
                        (BlockStmt
                         (Return
                          (Just
                           (MethodInv
                            (MethodCall
                             (Name
                              (:
                               (Ident "Collections")
                               (: (Ident "unmodifiableMap") [])))
                             (:
                              (ExpName
                               (Name (: (Ident "processorFactories") [])))
                              []))))))
                        []))))))))
                (:
                 (MemberDecl
                  (MethodDecl
                   (: Public [])
                   []
                   (Just
                    (RefType
                     (ClassRefType
                      (ClassType (: ((,) (Ident "ClusterService") []) [])))))
                   (Ident "getClusterService")
                   []
                   []
                   Nothing
                   (MethodBody
                    (Just
                     (Block
                      (:
                       (BlockStmt
                        (Return
                         (Just
                          (ExpName (Name (: (Ident "clusterService") []))))))
                       []))))))
                 (:
                  (MemberDecl
                   (MethodDecl
                    (: Public [])
                    []
                    (Just
                     (RefType
                      (ClassRefType
                       (ClassType (: ((,) (Ident "ScriptService") []) [])))))
                    (Ident "getScriptService")
                    []
                    []
                    Nothing
                    (MethodBody
                     (Just
                      (Block
                       (:
                        (BlockStmt
                         (Return
                          (Just
                           (ExpName (Name (: (Ident "scriptService") []))))))
                        []))))))
                  (:
                   (MemberDecl
                    (MethodDecl
                     (: Public [])
                     []
                     Nothing
                     (Ident "delete")
                     (:
                      (FormalParam
                       []
                       (RefType
                        (ClassRefType
                         (ClassType
                          (: ((,) (Ident "DeletePipelineRequest") []) []))))
                       False
                       (VarId (Ident "request")))
                      (:
                       (FormalParam
                        []
                        (RefType
                         (ClassRefType
                          (ClassType
                           (:
                            ((,)
                             (Ident "ActionListener")
                             (:
                              (ActualType
                               (ClassRefType
                                (ClassType
                                 (:
                                  ((,) (Ident "AcknowledgedResponse") [])
                                  []))))
                              []))
                            []))))
                        False
                        (VarId (Ident "listener")))
                       []))
                     []
                     Nothing
                     (MethodBody
                      (Just
                       (Block
                        (:
                         (BlockStmt
                          (ExpStmt
                           (MethodInv
                            (MethodCall
                             (Name
                              (:
                               (Ident "clusterService")
                               (: (Ident "submitStateUpdateTask") [])))
                             (:
                              (BinOp
                               (Lit (String "delete-pipeline-"))
                               Add
                               (MethodInv
                                (MethodCall
                                 (Name
                                  (: (Ident "request") (: (Ident "getId") [])))
                                 [])))
                              (:
                               (InstanceCreation
                                []
                                (TypeDeclSpecifier
                                 (ClassType
                                  (:
                                   ((,)
                                    (Ident "AckedClusterStateUpdateTask")
                                    (:
                                     (ActualType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,) (Ident "AcknowledgedResponse") [])
                                         []))))
                                     []))
                                   [])))
                                (:
                                 (ExpName (Name (: (Ident "request") [])))
                                 (:
                                  (ExpName (Name (: (Ident "listener") [])))
                                  []))
                                (Just
                                 (ClassBody
                                  (:
                                   (MemberDecl
                                    (MethodDecl
                                     (:
                                      (Annotation
                                       (MarkerAnnotation
                                        (Name (: (Ident "Override") []))))
                                      (: Protected []))
                                     []
                                     (Just
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident "AcknowledgedResponse")
                                           [])
                                          [])))))
                                     (Ident "newResponse")
                                     (:
                                      (FormalParam
                                       []
                                       (PrimType BooleanT)
                                       False
                                       (VarId (Ident "acknowledged")))
                                      [])
                                     []
                                     Nothing
                                     (MethodBody
                                      (Just
                                       (Block
                                        (:
                                         (BlockStmt
                                          (Return
                                           (Just
                                            (InstanceCreation
                                             []
                                             (TypeDeclSpecifier
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident "AcknowledgedResponse")
                                                 [])
                                                [])))
                                             (:
                                              (ExpName
                                               (Name
                                                (: (Ident "acknowledged") [])))
                                              [])
                                             Nothing))))
                                         []))))))
                                   (:
                                    (MemberDecl
                                     (MethodDecl
                                      (:
                                       (Annotation
                                        (MarkerAnnotation
                                         (Name (: (Ident "Override") []))))
                                       (: Public []))
                                      []
                                      (Just
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,) (Ident "ClusterState") [])
                                           [])))))
                                      (Ident "execute")
                                      (:
                                       (FormalParam
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "ClusterState") [])
                                            []))))
                                        False
                                        (VarId (Ident "currentState")))
                                       [])
                                      []
                                      Nothing
                                      (MethodBody
                                       (Just
                                        (Block
                                         (:
                                          (BlockStmt
                                           (Return
                                            (Just
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (: (Ident "innerDelete") []))
                                               (:
                                                (ExpName
                                                 (Name
                                                  (: (Ident "request") [])))
                                                (:
                                                 (ExpName
                                                  (Name
                                                   (:
                                                    (Ident "currentState")
                                                    [])))
                                                 [])))))))
                                          []))))))
                                    [])))))
                               []))))))
                         []))))))
                   (:
                    (MemberDecl
                     (MethodDecl
                      (: Static [])
                      []
                      (Just
                       (RefType
                        (ClassRefType
                         (ClassType (: ((,) (Ident "ClusterState") []) [])))))
                      (Ident "innerDelete")
                      (:
                       (FormalParam
                        []
                        (RefType
                         (ClassRefType
                          (ClassType
                           (: ((,) (Ident "DeletePipelineRequest") []) []))))
                        False
                        (VarId (Ident "request")))
                       (:
                        (FormalParam
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "ClusterState") []) []))))
                         False
                         (VarId (Ident "currentState")))
                        []))
                      []
                      Nothing
                      (MethodBody
                       (Just
                        (Block
                         (:
                          (LocalVars
                           []
                           (RefType
                            (ClassRefType
                             (ClassType
                              (: ((,) (Ident "IngestMetadata") []) []))))
                           (:
                            (VarDecl
                             (VarId (Ident "currentIngestMetadata"))
                             (Just
                              (InitExp
                               (MethodInv
                                (PrimaryMethodCall
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "currentState")
                                     (: (Ident "metaData") [])))
                                   []))
                                 []
                                 (Ident "custom")
                                 (:
                                  (ExpName
                                   (Name
                                    (:
                                     (Ident "IngestMetadata")
                                     (: (Ident "TYPE") []))))
                                  []))))))
                            []))
                          (:
                           (BlockStmt
                            (IfThen
                             (BinOp
                              (ExpName
                               (Name (: (Ident "currentIngestMetadata") [])))
                              Equal
                              (Lit Null))
                             (StmtBlock
                              (Block
                               (:
                                (BlockStmt
                                 (Return
                                  (Just
                                   (ExpName
                                    (Name (: (Ident "currentState") []))))))
                                [])))))
                           (:
                            (LocalVars
                             []
                             (RefType
                              (ClassRefType
                               (ClassType
                                (:
                                 ((,)
                                  (Ident "Map")
                                  (:
                                   (ActualType
                                    (ClassRefType
                                     (ClassType
                                      (: ((,) (Ident "String") []) []))))
                                   (:
                                    (ActualType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,) (Ident "PipelineConfiguration") [])
                                        []))))
                                    [])))
                                 []))))
                             (:
                              (VarDecl
                               (VarId (Ident "pipelines"))
                               (Just
                                (InitExp
                                 (MethodInv
                                  (MethodCall
                                   (Name
                                    (:
                                     (Ident "currentIngestMetadata")
                                     (: (Ident "getPipelines") [])))
                                   [])))))
                              []))
                            (:
                             (LocalVars
                              []
                              (RefType
                               (ClassRefType
                                (ClassType
                                 (:
                                  ((,)
                                   (Ident "Set")
                                   (:
                                    (ActualType
                                     (ClassRefType
                                      (ClassType
                                       (: ((,) (Ident "String") []) []))))
                                    []))
                                  []))))
                              (:
                               (VarDecl
                                (VarId (Ident "toRemove"))
                                (Just
                                 (InitExp
                                  (InstanceCreation
                                   []
                                   (TypeDeclSpecifierUnqualifiedWithDiamond
                                    (Ident "HashSet")
                                    Diamond)
                                   []
                                   Nothing))))
                               []))
                             (:
                              (BlockStmt
                               (EnhancedFor
                                []
                                (RefType
                                 (ClassRefType
                                  (ClassType (: ((,) (Ident "String") []) []))))
                                (Ident "pipelineKey")
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "pipelines")
                                    (: (Ident "keySet") [])))
                                  []))
                                (StmtBlock
                                 (Block
                                  (:
                                   (BlockStmt
                                    (IfThen
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "Regex")
                                         (: (Ident "simpleMatch") [])))
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "request")
                                            (: (Ident "getId") [])))
                                          []))
                                        (:
                                         (ExpName
                                          (Name (: (Ident "pipelineKey") [])))
                                         []))))
                                     (StmtBlock
                                      (Block
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "toRemove")
                                              (: (Ident "add") [])))
                                            (:
                                             (ExpName
                                              (Name
                                               (: (Ident "pipelineKey") [])))
                                             [])))))
                                        [])))))
                                   [])))))
                              (:
                               (BlockStmt
                                (IfThenElse
                                 (BinOp
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "toRemove")
                                      (: (Ident "isEmpty") [])))
                                    []))
                                  CAnd
                                  (BinOp
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "Regex")
                                       (: (Ident "isMatchAllPattern") [])))
                                     (:
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "request")
                                          (: (Ident "getId") [])))
                                        []))
                                      [])))
                                   Equal
                                   (Lit (Boolean False))))
                                 (StmtBlock
                                  (Block
                                   (:
                                    (BlockStmt
                                     (Throw
                                      (InstanceCreation
                                       []
                                       (TypeDeclSpecifier
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident "ResourceNotFoundException")
                                           [])
                                          [])))
                                       (:
                                        (Lit
                                         (String "pipeline [{}] is missing"))
                                        (:
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "request")
                                             (: (Ident "getId") [])))
                                           []))
                                         []))
                                       Nothing)))
                                    [])))
                                 (IfThen
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "toRemove")
                                      (: (Ident "isEmpty") [])))
                                    []))
                                  (StmtBlock
                                   (Block
                                    (:
                                     (BlockStmt
                                      (Return
                                       (Just
                                        (ExpName
                                         (Name
                                          (: (Ident "currentState") []))))))
                                     []))))))
                               (:
                                (LocalVars
                                 (: Final [])
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,)
                                      (Ident "Map")
                                      (:
                                       (ActualType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "String") []) []))))
                                       (:
                                        (ActualType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,)
                                             (Ident "PipelineConfiguration")
                                             [])
                                            []))))
                                        [])))
                                     []))))
                                 (:
                                  (VarDecl
                                   (VarId (Ident "pipelinesCopy"))
                                   (Just
                                    (InitExp
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifierUnqualifiedWithDiamond
                                       (Ident "HashMap")
                                       Diamond)
                                      (:
                                       (ExpName
                                        (Name (: (Ident "pipelines") [])))
                                       [])
                                      Nothing))))
                                  []))
                                (:
                                 (BlockStmt
                                  (EnhancedFor
                                   []
                                   (RefType
                                    (ClassRefType
                                     (ClassType
                                      (: ((,) (Ident "String") []) []))))
                                   (Ident "key")
                                   (ExpName (Name (: (Ident "toRemove") [])))
                                   (StmtBlock
                                    (Block
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "pipelinesCopy")
                                            (: (Ident "remove") [])))
                                          (:
                                           (ExpName (Name (: (Ident "key") [])))
                                           [])))))
                                      [])))))
                                 (:
                                  (LocalVars
                                   []
                                   (RefType
                                    (ClassRefType
                                     (ClassType
                                      (:
                                       ((,) (Ident "ClusterState") [])
                                       (: ((,) (Ident "Builder") []) [])))))
                                   (:
                                    (VarDecl
                                     (VarId (Ident "newState"))
                                     (Just
                                      (InitExp
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "ClusterState")
                                           (: (Ident "builder") [])))
                                         (:
                                          (ExpName
                                           (Name (: (Ident "currentState") [])))
                                          []))))))
                                    []))
                                  (:
                                   (BlockStmt
                                    (ExpStmt
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (:
                                         (Ident "newState")
                                         (: (Ident "metaData") [])))
                                       (:
                                        (MethodInv
                                         (PrimaryMethodCall
                                          (MethodInv
                                           (PrimaryMethodCall
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "MetaData")
                                                (: (Ident "builder") [])))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "currentState")
                                                   (:
                                                    (Ident "getMetaData")
                                                    [])))
                                                 []))
                                               [])))
                                            []
                                            (Ident "putCustom")
                                            (:
                                             (ExpName
                                              (Name
                                               (:
                                                (Ident "IngestMetadata")
                                                (: (Ident "TYPE") []))))
                                             (:
                                              (InstanceCreation
                                               []
                                               (TypeDeclSpecifier
                                                (ClassType
                                                 (:
                                                  ((,)
                                                   (Ident "IngestMetadata")
                                                   [])
                                                  [])))
                                               (:
                                                (ExpName
                                                 (Name
                                                  (:
                                                   (Ident "pipelinesCopy")
                                                   [])))
                                                [])
                                               Nothing)
                                              []))))
                                          []
                                          (Ident "build")
                                          []))
                                        [])))))
                                   (:
                                    (BlockStmt
                                     (Return
                                      (Just
                                       (MethodInv
                                        (MethodCall
                                         (Name
                                          (:
                                           (Ident "newState")
                                           (: (Ident "build") [])))
                                         [])))))
                                    []))))))))))))))))
                    (:
                     (MemberDecl
                      (MethodDecl
                       (: Public (: Static []))
                       []
                       (Just
                        (RefType
                         (ClassRefType
                          (ClassType
                           (:
                            ((,)
                             (Ident "List")
                             (:
                              (ActualType
                               (ClassRefType
                                (ClassType
                                 (:
                                  ((,) (Ident "PipelineConfiguration") [])
                                  []))))
                              []))
                            [])))))
                       (Ident "getPipelines")
                       (:
                        (FormalParam
                         []
                         (RefType
                          (ClassRefType
                           (ClassType (: ((,) (Ident "ClusterState") []) []))))
                         False
                         (VarId (Ident "clusterState")))
                        (:
                         (FormalParam
                          []
                          (RefType
                           (ClassRefType
                            (ClassType (: ((,) (Ident "String") []) []))))
                          True
                          (VarId (Ident "ids")))
                         []))
                       []
                       Nothing
                       (MethodBody
                        (Just
                         (Block
                          (:
                           (LocalVars
                            []
                            (RefType
                             (ClassRefType
                              (ClassType
                               (: ((,) (Ident "IngestMetadata") []) []))))
                            (:
                             (VarDecl
                              (VarId (Ident "ingestMetadata"))
                              (Just
                               (InitExp
                                (MethodInv
                                 (PrimaryMethodCall
                                  (MethodInv
                                   (MethodCall
                                    (Name
                                     (:
                                      (Ident "clusterState")
                                      (: (Ident "getMetaData") [])))
                                    []))
                                  []
                                  (Ident "custom")
                                  (:
                                   (ExpName
                                    (Name
                                     (:
                                      (Ident "IngestMetadata")
                                      (: (Ident "TYPE") []))))
                                   []))))))
                             []))
                           (:
                            (BlockStmt
                             (Return
                              (Just
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "innerGetPipelines") []))
                                 (:
                                  (ExpName
                                   (Name (: (Ident "ingestMetadata") [])))
                                  (:
                                   (ExpName (Name (: (Ident "ids") [])))
                                   [])))))))
                            [])))))))
                     (:
                      (MemberDecl
                       (MethodDecl
                        (: Static [])
                        []
                        (Just
                         (RefType
                          (ClassRefType
                           (ClassType
                            (:
                             ((,)
                              (Ident "List")
                              (:
                               (ActualType
                                (ClassRefType
                                 (ClassType
                                  (:
                                   ((,) (Ident "PipelineConfiguration") [])
                                   []))))
                               []))
                             [])))))
                        (Ident "innerGetPipelines")
                        (:
                         (FormalParam
                          []
                          (RefType
                           (ClassRefType
                            (ClassType
                             (: ((,) (Ident "IngestMetadata") []) []))))
                          False
                          (VarId (Ident "ingestMetadata")))
                         (:
                          (FormalParam
                           []
                           (RefType
                            (ClassRefType
                             (ClassType (: ((,) (Ident "String") []) []))))
                           True
                           (VarId (Ident "ids")))
                          []))
                        []
                        Nothing
                        (MethodBody
                         (Just
                          (Block
                           (:
                            (BlockStmt
                             (IfThen
                              (BinOp
                               (ExpName (Name (: (Ident "ingestMetadata") [])))
                               Equal
                               (Lit Null))
                              (StmtBlock
                               (Block
                                (:
                                 (BlockStmt
                                  (Return
                                   (Just
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "Collections")
                                        (: (Ident "emptyList") [])))
                                      [])))))
                                 [])))))
                            (:
                             (BlockStmt
                              (IfThen
                               (BinOp
                                (ExpName
                                 (Name
                                  (: (Ident "ids") (: (Ident "length") []))))
                                Equal
                                (Lit (Int 0)))
                               (StmtBlock
                                (Block
                                 (:
                                  (BlockStmt
                                   (Return
                                    (Just
                                     (InstanceCreation
                                      []
                                      (TypeDeclSpecifierUnqualifiedWithDiamond
                                       (Ident "ArrayList")
                                       Diamond)
                                      (:
                                       (MethodInv
                                        (PrimaryMethodCall
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "ingestMetadata")
                                             (: (Ident "getPipelines") [])))
                                           []))
                                         []
                                         (Ident "values")
                                         []))
                                       [])
                                      Nothing))))
                                  [])))))
                             (:
                              (LocalVars
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (:
                                   ((,)
                                    (Ident "List")
                                    (:
                                     (ActualType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "PipelineConfiguration")
                                          [])
                                         []))))
                                     []))
                                   []))))
                               (:
                                (VarDecl
                                 (VarId (Ident "result"))
                                 (Just
                                  (InitExp
                                   (InstanceCreation
                                    []
                                    (TypeDeclSpecifierUnqualifiedWithDiamond
                                     (Ident "ArrayList")
                                     Diamond)
                                    (:
                                     (ExpName
                                      (Name
                                       (:
                                        (Ident "ids")
                                        (: (Ident "length") []))))
                                     [])
                                    Nothing))))
                                []))
                              (:
                               (BlockStmt
                                (EnhancedFor
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (: ((,) (Ident "String") []) []))))
                                 (Ident "id")
                                 (ExpName (Name (: (Ident "ids") [])))
                                 (StmtBlock
                                  (Block
                                   (:
                                    (BlockStmt
                                     (IfThenElse
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "Regex")
                                          (:
                                           (Ident "isSimpleMatchPattern")
                                           [])))
                                        (:
                                         (ExpName (Name (: (Ident "id") [])))
                                         [])))
                                      (StmtBlock
                                       (Block
                                        (:
                                         (BlockStmt
                                          (EnhancedFor
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "Map") [])
                                               (:
                                                ((,)
                                                 (Ident "Entry")
                                                 (:
                                                  (ActualType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,) (Ident "String") [])
                                                      []))))
                                                  (:
                                                   (ActualType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident
                                                         "PipelineConfiguration")
                                                        [])
                                                       []))))
                                                   [])))
                                                [])))))
                                           (Ident "entry")
                                           (MethodInv
                                            (PrimaryMethodCall
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "ingestMetadata")
                                                 (: (Ident "getPipelines") [])))
                                               []))
                                             []
                                             (Ident "entrySet")
                                             []))
                                           (StmtBlock
                                            (Block
                                             (:
                                              (BlockStmt
                                               (IfThen
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "Regex")
                                                    (:
                                                     (Ident "simpleMatch")
                                                     [])))
                                                  (:
                                                   (ExpName
                                                    (Name (: (Ident "id") [])))
                                                   (:
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "entry")
                                                        (:
                                                         (Ident "getKey")
                                                         [])))
                                                      []))
                                                    []))))
                                                (StmtBlock
                                                 (Block
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "result")
                                                         (: (Ident "add") [])))
                                                       (:
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "entry")
                                                            (:
                                                             (Ident "getValue")
                                                             [])))
                                                          []))
                                                        [])))))
                                                   [])))))
                                              [])))))
                                         [])))
                                      (StmtBlock
                                       (Block
                                        (:
                                         (LocalVars
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident "PipelineConfiguration")
                                               [])
                                              []))))
                                          (:
                                           (VarDecl
                                            (VarId (Ident "pipeline"))
                                            (Just
                                             (InitExp
                                              (MethodInv
                                               (PrimaryMethodCall
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "ingestMetadata")
                                                    (:
                                                     (Ident "getPipelines")
                                                     [])))
                                                  []))
                                                []
                                                (Ident "get")
                                                (:
                                                 (ExpName
                                                  (Name (: (Ident "id") [])))
                                                 []))))))
                                           []))
                                         (:
                                          (BlockStmt
                                           (IfThen
                                            (BinOp
                                             (ExpName
                                              (Name (: (Ident "pipeline") [])))
                                             NotEq
                                             (Lit Null))
                                            (StmtBlock
                                             (Block
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "result")
                                                     (: (Ident "add") [])))
                                                   (:
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident "pipeline")
                                                       [])))
                                                    [])))))
                                               [])))))
                                          []))))))
                                    [])))))
                               (:
                                (BlockStmt
                                 (Return
                                  (Just
                                   (ExpName (Name (: (Ident "result") []))))))
                                []))))))))))
                      (:
                       (MemberDecl
                        (MethodDecl
                         (: Public [])
                         []
                         Nothing
                         (Ident "putPipeline")
                         (:
                          (FormalParam
                           []
                           (RefType
                            (ClassRefType
                             (ClassType
                              (:
                               ((,)
                                (Ident "Map")
                                (:
                                 (ActualType
                                  (ClassRefType
                                   (ClassType
                                    (: ((,) (Ident "DiscoveryNode") []) []))))
                                 (:
                                  (ActualType
                                   (ClassRefType
                                    (ClassType
                                     (: ((,) (Ident "IngestInfo") []) []))))
                                  [])))
                               []))))
                           False
                           (VarId (Ident "ingestInfos")))
                          (:
                           (FormalParam
                            []
                            (RefType
                             (ClassRefType
                              (ClassType
                               (: ((,) (Ident "PutPipelineRequest") []) []))))
                            False
                            (VarId (Ident "request")))
                           (:
                            (FormalParam
                             []
                             (RefType
                              (ClassRefType
                               (ClassType
                                (:
                                 ((,)
                                  (Ident "ActionListener")
                                  (:
                                   (ActualType
                                    (ClassRefType
                                     (ClassType
                                      (:
                                       ((,) (Ident "AcknowledgedResponse") [])
                                       []))))
                                   []))
                                 []))))
                             False
                             (VarId (Ident "listener")))
                            [])))
                         (:
                          (ClassRefType
                           (ClassType (: ((,) (Ident "Exception") []) [])))
                          [])
                         Nothing
                         (MethodBody
                          (Just
                           (Block
                            (:
                             (BlockStmt
                              (ExpStmt
                               (MethodInv
                                (MethodCall
                                 (Name (: (Ident "validatePipeline") []))
                                 (:
                                  (ExpName (Name (: (Ident "ingestInfos") [])))
                                  (:
                                   (ExpName (Name (: (Ident "request") [])))
                                   []))))))
                             (:
                              (BlockStmt
                               (ExpStmt
                                (MethodInv
                                 (MethodCall
                                  (Name
                                   (:
                                    (Ident "clusterService")
                                    (: (Ident "submitStateUpdateTask") [])))
                                  (:
                                   (BinOp
                                    (Lit (String "put-pipeline-"))
                                    Add
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "request")
                                        (: (Ident "getId") [])))
                                      [])))
                                   (:
                                    (InstanceCreation
                                     []
                                     (TypeDeclSpecifier
                                      (ClassType
                                       (:
                                        ((,)
                                         (Ident "AckedClusterStateUpdateTask")
                                         (:
                                          (ActualType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident "AcknowledgedResponse")
                                               [])
                                              []))))
                                          []))
                                        [])))
                                     (:
                                      (ExpName (Name (: (Ident "request") [])))
                                      (:
                                       (ExpName
                                        (Name (: (Ident "listener") [])))
                                       []))
                                     (Just
                                      (ClassBody
                                       (:
                                        (MemberDecl
                                         (MethodDecl
                                          (:
                                           (Annotation
                                            (MarkerAnnotation
                                             (Name (: (Ident "Override") []))))
                                           (: Protected []))
                                          []
                                          (Just
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident "AcknowledgedResponse")
                                                [])
                                               [])))))
                                          (Ident "newResponse")
                                          (:
                                           (FormalParam
                                            []
                                            (PrimType BooleanT)
                                            False
                                            (VarId (Ident "acknowledged")))
                                           [])
                                          []
                                          Nothing
                                          (MethodBody
                                           (Just
                                            (Block
                                             (:
                                              (BlockStmt
                                               (Return
                                                (Just
                                                 (InstanceCreation
                                                  []
                                                  (TypeDeclSpecifier
                                                   (ClassType
                                                    (:
                                                     ((,)
                                                      (Ident
                                                       "AcknowledgedResponse")
                                                      [])
                                                     [])))
                                                  (:
                                                   (ExpName
                                                    (Name
                                                     (:
                                                      (Ident "acknowledged")
                                                      [])))
                                                   [])
                                                  Nothing))))
                                              []))))))
                                        (:
                                         (MemberDecl
                                          (MethodDecl
                                           (:
                                            (Annotation
                                             (MarkerAnnotation
                                              (Name (: (Ident "Override") []))))
                                            (: Public []))
                                           []
                                           (Just
                                            (RefType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "ClusterState") [])
                                                [])))))
                                           (Ident "execute")
                                           (:
                                            (FormalParam
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "ClusterState") [])
                                                 []))))
                                             False
                                             (VarId (Ident "currentState")))
                                            [])
                                           []
                                           Nothing
                                           (MethodBody
                                            (Just
                                             (Block
                                              (:
                                               (BlockStmt
                                                (Return
                                                 (Just
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (: (Ident "innerPut") []))
                                                    (:
                                                     (ExpName
                                                      (Name
                                                       (:
                                                        (Ident "request")
                                                        [])))
                                                     (:
                                                      (ExpName
                                                       (Name
                                                        (:
                                                         (Ident "currentState")
                                                         [])))
                                                      [])))))))
                                               []))))))
                                         [])))))
                                    []))))))
                              [])))))))
                       (:
                        (MemberDecl
                         (MethodDecl
                          (: Public [])
                          []
                          (Just
                           (RefType
                            (ClassRefType
                             (ClassType (: ((,) (Ident "Pipeline") []) [])))))
                          (Ident "getPipeline")
                          (:
                           (FormalParam
                            []
                            (RefType
                             (ClassRefType
                              (ClassType (: ((,) (Ident "String") []) []))))
                            False
                            (VarId (Ident "id")))
                           [])
                          []
                          Nothing
                          (MethodBody
                           (Just
                            (Block
                             (:
                              (LocalVars
                               []
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (: ((,) (Ident "PipelineHolder") []) []))))
                               (:
                                (VarDecl
                                 (VarId (Ident "holder"))
                                 (Just
                                  (InitExp
                                   (MethodInv
                                    (MethodCall
                                     (Name
                                      (:
                                       (Ident "pipelines")
                                       (: (Ident "get") [])))
                                     (:
                                      (ExpName (Name (: (Ident "id") [])))
                                      []))))))
                                []))
                              (:
                               (BlockStmt
                                (IfThenElse
                                 (BinOp
                                  (ExpName (Name (: (Ident "holder") [])))
                                  NotEq
                                  (Lit Null))
                                 (StmtBlock
                                  (Block
                                   (:
                                    (BlockStmt
                                     (Return
                                      (Just
                                       (ExpName
                                        (Name
                                         (:
                                          (Ident "holder")
                                          (: (Ident "pipeline") [])))))))
                                    [])))
                                 (StmtBlock
                                  (Block
                                   (:
                                    (BlockStmt (Return (Just (Lit Null))))
                                    [])))))
                               [])))))))
                        (:
                         (MemberDecl
                          (MethodDecl
                           (: Public [])
                           []
                           (Just
                            (RefType
                             (ClassRefType
                              (ClassType
                               (:
                                ((,)
                                 (Ident "Map")
                                 (:
                                  (ActualType
                                   (ClassRefType
                                    (ClassType
                                     (: ((,) (Ident "String") []) []))))
                                  (:
                                   (ActualType
                                    (ClassRefType
                                     (ClassType
                                      (:
                                       ((,) (Ident "Processor") [])
                                       (: ((,) (Ident "Factory") []) [])))))
                                   [])))
                                [])))))
                           (Ident "getProcessorFactories")
                           []
                           []
                           Nothing
                           (MethodBody
                            (Just
                             (Block
                              (:
                               (BlockStmt
                                (Return
                                 (Just
                                  (ExpName
                                   (Name
                                    (: (Ident "processorFactories") []))))))
                               []))))))
                         (:
                          (MemberDecl
                           (MethodDecl
                            (: Public [])
                            []
                            (Just
                             (RefType
                              (ClassRefType
                               (ClassType
                                (: ((,) (Ident "IngestInfo") []) [])))))
                            (Ident "info")
                            []
                            []
                            Nothing
                            (MethodBody
                             (Just
                              (Block
                               (:
                                (LocalVars
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,)
                                      (Ident "Map")
                                      (:
                                       (ActualType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "String") []) []))))
                                       (:
                                        (ActualType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "Processor") [])
                                            (:
                                             ((,) (Ident "Factory") [])
                                             [])))))
                                        [])))
                                     []))))
                                 (:
                                  (VarDecl
                                   (VarId (Ident "processorFactories"))
                                   (Just
                                    (InitExp
                                     (MethodInv
                                      (MethodCall
                                       (Name
                                        (: (Ident "getProcessorFactories") []))
                                       [])))))
                                  []))
                                (:
                                 (LocalVars
                                  []
                                  (RefType
                                   (ClassRefType
                                    (ClassType
                                     (:
                                      ((,)
                                       (Ident "List")
                                       (:
                                        (ActualType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "ProcessorInfo") [])
                                            []))))
                                        []))
                                      []))))
                                  (:
                                   (VarDecl
                                    (VarId (Ident "processorInfoList"))
                                    (Just
                                     (InitExp
                                      (InstanceCreation
                                       []
                                       (TypeDeclSpecifierUnqualifiedWithDiamond
                                        (Ident "ArrayList")
                                        Diamond)
                                       (:
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "processorFactories")
                                            (: (Ident "size") [])))
                                          []))
                                        [])
                                       Nothing))))
                                   []))
                                 (:
                                  (BlockStmt
                                   (EnhancedFor
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,) (Ident "Map") [])
                                        (:
                                         ((,)
                                          (Ident "Entry")
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "String") [])
                                               []))))
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "Processor") [])
                                                (:
                                                 ((,) (Ident "Factory") [])
                                                 [])))))
                                            [])))
                                         [])))))
                                    (Ident "entry")
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "processorFactories")
                                        (: (Ident "entrySet") [])))
                                      []))
                                    (StmtBlock
                                     (Block
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "processorInfoList")
                                             (: (Ident "add") [])))
                                           (:
                                            (InstanceCreation
                                             []
                                             (TypeDeclSpecifier
                                              (ClassType
                                               (:
                                                ((,) (Ident "ProcessorInfo") [])
                                                [])))
                                             (:
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "entry")
                                                  (: (Ident "getKey") [])))
                                                []))
                                              [])
                                             Nothing)
                                            [])))))
                                       [])))))
                                  (:
                                   (BlockStmt
                                    (Return
                                     (Just
                                      (InstanceCreation
                                       []
                                       (TypeDeclSpecifier
                                        (ClassType
                                         (: ((,) (Ident "IngestInfo") []) [])))
                                       (:
                                        (ExpName
                                         (Name
                                          (: (Ident "processorInfoList") [])))
                                        [])
                                       Nothing))))
                                   [])))))))))
                          (:
                           (MemberDecl
                            (MethodDecl
                             []
                             []
                             (Just
                              (RefType
                               (ClassRefType
                                (ClassType
                                 (:
                                  ((,)
                                   (Ident "Map")
                                   (:
                                    (ActualType
                                     (ClassRefType
                                      (ClassType
                                       (: ((,) (Ident "String") []) []))))
                                    (:
                                     (ActualType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,) (Ident "PipelineHolder") [])
                                         []))))
                                     [])))
                                  [])))))
                             (Ident "pipelines")
                             []
                             []
                             Nothing
                             (MethodBody
                              (Just
                               (Block
                                (:
                                 (BlockStmt
                                  (Return
                                   (Just
                                    (ExpName
                                     (Name (: (Ident "pipelines") []))))))
                                 []))))))
                           (:
                            (MemberDecl
                             (MethodDecl
                              (: Private (: Static []))
                              []
                              (Just
                               (RefType
                                (ClassRefType
                                 (ClassType
                                  (:
                                   ((,)
                                    (Ident "List")
                                    (:
                                     (ActualType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "Tuple")
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "Processor") [])
                                               []))))
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "IngestMetric") [])
                                                []))))
                                            [])))
                                         []))))
                                     []))
                                   [])))))
                              (Ident "getProcessorMetrics")
                              (:
                               (FormalParam
                                []
                                (RefType
                                 (ClassRefType
                                  (ClassType
                                   (:
                                    ((,) (Ident "CompoundProcessor") [])
                                    []))))
                                False
                                (VarId (Ident "compoundProcessor")))
                               (:
                                (FormalParam
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,)
                                      (Ident "List")
                                      (:
                                       (ActualType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,)
                                            (Ident "Tuple")
                                            (:
                                             (ActualType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "Processor") [])
                                                 []))))
                                             (:
                                              (ActualType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,)
                                                   (Ident "IngestMetric")
                                                   [])
                                                  []))))
                                              [])))
                                           []))))
                                       []))
                                     []))))
                                 False
                                 (VarId (Ident "processorMetrics")))
                                []))
                              []
                              Nothing
                              (MethodBody
                               (Just
                                (Block
                                 (:
                                  (BlockStmt
                                   (EnhancedFor
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,)
                                         (Ident "Tuple")
                                         (:
                                          (ActualType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "Processor") [])
                                              []))))
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "IngestMetric") [])
                                               []))))
                                           [])))
                                        []))))
                                    (Ident "processorWithMetric")
                                    (MethodInv
                                     (MethodCall
                                      (Name
                                       (:
                                        (Ident "compoundProcessor")
                                        (:
                                         (Ident "getProcessorsWithMetrics")
                                         [])))
                                      []))
                                    (StmtBlock
                                     (Block
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "Processor") [])
                                            []))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "processor"))
                                          (Just
                                           (InitExp
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "processorWithMetric")
                                                (: (Ident "v1") [])))
                                              [])))))
                                         []))
                                       (:
                                        (LocalVars
                                         []
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (:
                                             ((,) (Ident "IngestMetric") [])
                                             []))))
                                         (:
                                          (VarDecl
                                           (VarId (Ident "metric"))
                                           (Just
                                            (InitExp
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "processorWithMetric")
                                                 (: (Ident "v2") [])))
                                               [])))))
                                          []))
                                        (:
                                         (BlockStmt
                                          (IfThenElse
                                           (InstanceOf
                                            (ExpName
                                             (Name (: (Ident "processor") [])))
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident "CompoundProcessor")
                                                [])
                                               []))))
                                           (StmtBlock
                                            (Block
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident
                                                     "getProcessorMetrics")
                                                    []))
                                                  (:
                                                   (Cast
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "CompoundProcessor")
                                                         [])
                                                        []))))
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident "processor")
                                                       []))))
                                                   (:
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident
                                                        "processorMetrics")
                                                       [])))
                                                    []))))))
                                              [])))
                                           (StmtBlock
                                            (Block
                                             (:
                                              (BlockStmt
                                               (IfThen
                                                (InstanceOf
                                                 (ExpName
                                                  (Name
                                                   (: (Ident "processor") [])))
                                                 (ClassRefType
                                                  (ClassType
                                                   (:
                                                    ((,)
                                                     (Ident
                                                      "ConditionalProcessor")
                                                     [])
                                                    []))))
                                                (StmtBlock
                                                 (Block
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (Assign
                                                      (NameLhs
                                                       (Name
                                                        (:
                                                         (Ident "metric")
                                                         [])))
                                                      EqualA
                                                      (MethodInv
                                                       (PrimaryMethodCall
                                                        (Cast
                                                         (RefType
                                                          (ClassRefType
                                                           (ClassType
                                                            (:
                                                             ((,)
                                                              (Ident
                                                               "ConditionalProcessor")
                                                              [])
                                                             []))))
                                                         (ExpName
                                                          (Name
                                                           (:
                                                            (Ident "processor")
                                                            []))))
                                                        []
                                                        (Ident "getMetric")
                                                        [])))))
                                                   [])))))
                                              (:
                                               (BlockStmt
                                                (ExpStmt
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "processorMetrics")
                                                     (: (Ident "add") [])))
                                                   (:
                                                    (InstanceCreation
                                                     []
                                                     (TypeDeclSpecifierUnqualifiedWithDiamond
                                                      (Ident "Tuple")
                                                      Diamond)
                                                     (:
                                                      (ExpName
                                                       (Name
                                                        (:
                                                         (Ident "processor")
                                                         [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (:
                                                          (Ident "metric")
                                                          [])))
                                                       []))
                                                     Nothing)
                                                    [])))))
                                               []))))))
                                         [])))))))
                                  (:
                                   (BlockStmt
                                    (Return
                                     (Just
                                      (ExpName
                                       (Name
                                        (: (Ident "processorMetrics") []))))))
                                   [])))))))
                            (:
                             (MemberDecl
                              (MethodDecl
                               (: Static [])
                               []
                               (Just
                                (RefType
                                 (ClassRefType
                                  (ClassType
                                   (: ((,) (Ident "ClusterState") []) [])))))
                               (Ident "innerPut")
                               (:
                                (FormalParam
                                 []
                                 (RefType
                                  (ClassRefType
                                   (ClassType
                                    (:
                                     ((,) (Ident "PutPipelineRequest") [])
                                     []))))
                                 False
                                 (VarId (Ident "request")))
                                (:
                                 (FormalParam
                                  []
                                  (RefType
                                   (ClassRefType
                                    (ClassType
                                     (: ((,) (Ident "ClusterState") []) []))))
                                  False
                                  (VarId (Ident "currentState")))
                                 []))
                               []
                               Nothing
                               (MethodBody
                                (Just
                                 (Block
                                  (:
                                   (LocalVars
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,) (Ident "IngestMetadata") [])
                                        []))))
                                    (:
                                     (VarDecl
                                      (VarId (Ident "currentIngestMetadata"))
                                      (Just
                                       (InitExp
                                        (MethodInv
                                         (PrimaryMethodCall
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "currentState")
                                              (: (Ident "metaData") [])))
                                            []))
                                          []
                                          (Ident "custom")
                                          (:
                                           (ExpName
                                            (Name
                                             (:
                                              (Ident "IngestMetadata")
                                              (: (Ident "TYPE") []))))
                                           []))))))
                                     []))
                                   (:
                                    (LocalVars
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "Map")
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "String") [])
                                               []))))
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident "PipelineConfiguration")
                                                 [])
                                                []))))
                                            [])))
                                         []))))
                                     (:
                                      (VarDecl
                                       (VarId (Ident "pipelines"))
                                       Nothing)
                                      []))
                                    (:
                                     (BlockStmt
                                      (IfThenElse
                                       (BinOp
                                        (ExpName
                                         (Name
                                          (:
                                           (Ident "currentIngestMetadata")
                                           [])))
                                        NotEq
                                        (Lit Null))
                                       (StmtBlock
                                        (Block
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (Assign
                                             (NameLhs
                                              (Name (: (Ident "pipelines") [])))
                                             EqualA
                                             (InstanceCreation
                                              []
                                              (TypeDeclSpecifierUnqualifiedWithDiamond
                                               (Ident "HashMap")
                                               Diamond)
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident
                                                    "currentIngestMetadata")
                                                   (:
                                                    (Ident "getPipelines")
                                                    [])))
                                                 []))
                                               [])
                                              Nothing))))
                                          [])))
                                       (StmtBlock
                                        (Block
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (Assign
                                             (NameLhs
                                              (Name (: (Ident "pipelines") [])))
                                             EqualA
                                             (InstanceCreation
                                              []
                                              (TypeDeclSpecifierUnqualifiedWithDiamond
                                               (Ident "HashMap")
                                               Diamond)
                                              []
                                              Nothing))))
                                          [])))))
                                     (:
                                      (BlockStmt
                                       (ExpStmt
                                        (MethodInv
                                         (MethodCall
                                          (Name
                                           (:
                                            (Ident "pipelines")
                                            (: (Ident "put") [])))
                                          (:
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "request")
                                               (: (Ident "getId") [])))
                                             []))
                                           (:
                                            (InstanceCreation
                                             []
                                             (TypeDeclSpecifier
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident "PipelineConfiguration")
                                                 [])
                                                [])))
                                             (:
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "request")
                                                  (: (Ident "getId") [])))
                                                []))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "request")
                                                   (: (Ident "getSource") [])))
                                                 []))
                                               (:
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "request")
                                                    (:
                                                     (Ident "getXContentType")
                                                     [])))
                                                  []))
                                                [])))
                                             Nothing)
                                            []))))))
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "ClusterState") [])
                                            (:
                                             ((,) (Ident "Builder") [])
                                             [])))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "newState"))
                                          (Just
                                           (InitExp
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "ClusterState")
                                                (: (Ident "builder") [])))
                                              (:
                                               (ExpName
                                                (Name
                                                 (: (Ident "currentState") [])))
                                               []))))))
                                         []))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "newState")
                                              (: (Ident "metaData") [])))
                                            (:
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (PrimaryMethodCall
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "MetaData")
                                                     (: (Ident "builder") [])))
                                                   (:
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "currentState")
                                                        (:
                                                         (Ident "getMetaData")
                                                         [])))
                                                      []))
                                                    [])))
                                                 []
                                                 (Ident "putCustom")
                                                 (:
                                                  (ExpName
                                                   (Name
                                                    (:
                                                     (Ident "IngestMetadata")
                                                     (: (Ident "TYPE") []))))
                                                  (:
                                                   (InstanceCreation
                                                    []
                                                    (TypeDeclSpecifier
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident "IngestMetadata")
                                                        [])
                                                       [])))
                                                    (:
                                                     (ExpName
                                                      (Name
                                                       (:
                                                        (Ident "pipelines")
                                                        [])))
                                                     [])
                                                    Nothing)
                                                   []))))
                                               []
                                               (Ident "build")
                                               []))
                                             [])))))
                                        (:
                                         (BlockStmt
                                          (Return
                                           (Just
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "newState")
                                                (: (Ident "build") [])))
                                              [])))))
                                         []))))))))))))
                             (:
                              (MemberDecl
                               (MethodDecl
                                []
                                []
                                Nothing
                                (Ident "validatePipeline")
                                (:
                                 (FormalParam
                                  []
                                  (RefType
                                   (ClassRefType
                                    (ClassType
                                     (:
                                      ((,)
                                       (Ident "Map")
                                       (:
                                        (ActualType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "DiscoveryNode") [])
                                            []))))
                                        (:
                                         (ActualType
                                          (ClassRefType
                                           (ClassType
                                            (:
                                             ((,) (Ident "IngestInfo") [])
                                             []))))
                                         [])))
                                      []))))
                                  False
                                  (VarId (Ident "ingestInfos")))
                                 (:
                                  (FormalParam
                                   []
                                   (RefType
                                    (ClassRefType
                                     (ClassType
                                      (:
                                       ((,) (Ident "PutPipelineRequest") [])
                                       []))))
                                   False
                                   (VarId (Ident "request")))
                                  []))
                                (:
                                 (ClassRefType
                                  (ClassType
                                   (: ((,) (Ident "Exception") []) [])))
                                 [])
                                Nothing
                                (MethodBody
                                 (Just
                                  (Block
                                   (:
                                    (BlockStmt
                                     (IfThen
                                      (MethodInv
                                       (MethodCall
                                        (Name
                                         (:
                                          (Ident "ingestInfos")
                                          (: (Ident "isEmpty") [])))
                                        []))
                                      (StmtBlock
                                       (Block
                                        (:
                                         (BlockStmt
                                          (Throw
                                           (InstanceCreation
                                            []
                                            (TypeDeclSpecifier
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident "IllegalStateException")
                                                [])
                                               [])))
                                            (:
                                             (Lit
                                              (String "Ingest info is empty"))
                                             [])
                                            Nothing)))
                                         [])))))
                                    (:
                                     (LocalVars
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident "Map")
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "String") [])
                                                []))))
                                            (:
                                             (ActualType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "Object") [])
                                                 []))))
                                             [])))
                                          []))))
                                      (:
                                       (VarDecl
                                        (VarId (Ident "pipelineConfig"))
                                        (Just
                                         (InitExp
                                          (MethodInv
                                           (PrimaryMethodCall
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "XContentHelper")
                                                (: (Ident "convertToMap") [])))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "request")
                                                   (: (Ident "getSource") [])))
                                                 []))
                                               (:
                                                (Lit (Boolean False))
                                                (:
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "request")
                                                     (:
                                                      (Ident "getXContentType")
                                                      [])))
                                                   []))
                                                 [])))))
                                            []
                                            (Ident "v2")
                                            [])))))
                                       []))
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (: ((,) (Ident "Pipeline") []) []))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "pipeline"))
                                         (Just
                                          (InitExp
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "Pipeline")
                                               (: (Ident "create") [])))
                                             (:
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident "request")
                                                  (: (Ident "getId") [])))
                                                []))
                                              (:
                                               (ExpName
                                                (Name
                                                 (:
                                                  (Ident "pipelineConfig")
                                                  [])))
                                               (:
                                                (ExpName
                                                 (Name
                                                  (:
                                                   (Ident "processorFactories")
                                                   [])))
                                                (:
                                                 (ExpName
                                                  (Name
                                                   (:
                                                    (Ident "scriptService")
                                                    [])))
                                                 [])))))))))
                                        []))
                                      (:
                                       (LocalVars
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,)
                                             (Ident "List")
                                             (:
                                              (ActualType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,) (Ident "Exception") [])
                                                  []))))
                                              []))
                                            []))))
                                        (:
                                         (VarDecl
                                          (VarId (Ident "exceptions"))
                                          (Just
                                           (InitExp
                                            (InstanceCreation
                                             []
                                             (TypeDeclSpecifierUnqualifiedWithDiamond
                                              (Ident "ArrayList")
                                              Diamond)
                                             []
                                             Nothing))))
                                         []))
                                       (:
                                        (BlockStmt
                                         (EnhancedFor
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "Processor") [])
                                              []))))
                                          (Ident "processor")
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "pipeline")
                                              (:
                                               (Ident "flattenAllProcessors")
                                               [])))
                                            []))
                                          (StmtBlock
                                           (Block
                                            (:
                                             (BlockStmt
                                              (EnhancedFor
                                               []
                                               (RefType
                                                (ClassRefType
                                                 (ClassType
                                                  (:
                                                   ((,) (Ident "Map") [])
                                                   (:
                                                    ((,)
                                                     (Ident "Entry")
                                                     (:
                                                      (ActualType
                                                       (ClassRefType
                                                        (ClassType
                                                         (:
                                                          ((,)
                                                           (Ident
                                                            "DiscoveryNode")
                                                           [])
                                                          []))))
                                                      (:
                                                       (ActualType
                                                        (ClassRefType
                                                         (ClassType
                                                          (:
                                                           ((,)
                                                            (Ident "IngestInfo")
                                                            [])
                                                           []))))
                                                       [])))
                                                    [])))))
                                               (Ident "entry")
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "ingestInfos")
                                                   (: (Ident "entrySet") [])))
                                                 []))
                                               (StmtBlock
                                                (Block
                                                 (:
                                                  (LocalVars
                                                   []
                                                   (RefType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,) (Ident "String") [])
                                                       []))))
                                                   (:
                                                    (VarDecl
                                                     (VarId (Ident "type"))
                                                     (Just
                                                      (InitExp
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "processor")
                                                           (:
                                                            (Ident "getType")
                                                            [])))
                                                         [])))))
                                                    []))
                                                  (:
                                                   (BlockStmt
                                                    (IfThen
                                                     (BinOp
                                                      (BinOp
                                                       (MethodInv
                                                        (PrimaryMethodCall
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident "entry")
                                                             (:
                                                              (Ident "getValue")
                                                              [])))
                                                           []))
                                                         []
                                                         (Ident
                                                          "containsProcessor")
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident "type")
                                                             [])))
                                                          [])))
                                                       Equal
                                                       (Lit (Boolean False)))
                                                      CAnd
                                                      (BinOp
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "ConditionalProcessor")
                                                           (:
                                                            (Ident "TYPE")
                                                            (:
                                                             (Ident "equals")
                                                             []))))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident "type")
                                                             [])))
                                                          [])))
                                                       Equal
                                                       (Lit (Boolean False))))
                                                     (StmtBlock
                                                      (Block
                                                       (:
                                                        (LocalVars
                                                         []
                                                         (RefType
                                                          (ClassRefType
                                                           (ClassType
                                                            (:
                                                             ((,)
                                                              (Ident "String")
                                                              [])
                                                             []))))
                                                         (:
                                                          (VarDecl
                                                           (VarId
                                                            (Ident "message"))
                                                           (Just
                                                            (InitExp
                                                             (BinOp
                                                              (BinOp
                                                               (BinOp
                                                                (BinOp
                                                                 (Lit
                                                                  (String
                                                                   "Processor type ["))
                                                                 Add
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "processor")
                                                                     (:
                                                                      (Ident
                                                                       "getType")
                                                                      [])))
                                                                   [])))
                                                                Add
                                                                (Lit
                                                                 (String
                                                                  "] is not installed on node [")))
                                                               Add
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "entry")
                                                                   (:
                                                                    (Ident
                                                                     "getKey")
                                                                    [])))
                                                                 [])))
                                                              Add
                                                              (Lit
                                                               (String "]"))))))
                                                          []))
                                                        (:
                                                         (BlockStmt
                                                          (ExpStmt
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident
                                                                "exceptions")
                                                               (:
                                                                (Ident "add")
                                                                [])))
                                                             (:
                                                              (MethodInv
                                                               (MethodCall
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "ConfigurationUtils")
                                                                  (:
                                                                   (Ident
                                                                    "newConfigurationException")
                                                                   [])))
                                                                (:
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "processor")
                                                                     (:
                                                                      (Ident
                                                                       "getType")
                                                                      [])))
                                                                   []))
                                                                 (:
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "processor")
                                                                      (:
                                                                       (Ident
                                                                        "getTag")
                                                                       [])))
                                                                    []))
                                                                  (:
                                                                   (Lit Null)
                                                                   (:
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "message")
                                                                       [])))
                                                                    []))))))
                                                              [])))))
                                                         []))))))
                                                   []))))))
                                             [])))))
                                        (:
                                         (BlockStmt
                                          (ExpStmt
                                           (MethodInv
                                            (MethodCall
                                             (Name
                                              (:
                                               (Ident "ExceptionsHelper")
                                               (:
                                                (Ident "rethrowAndSuppress")
                                                [])))
                                             (:
                                              (ExpName
                                               (Name
                                                (: (Ident "exceptions") [])))
                                              [])))))
                                         [])))))))))))
                              (:
                               (MemberDecl
                                (MethodDecl
                                 (: Public [])
                                 []
                                 Nothing
                                 (Ident "executeBulkRequest")
                                 (:
                                  (FormalParam
                                   []
                                   (PrimType IntT)
                                   False
                                   (VarId (Ident "numberOfActionRequests")))
                                  (:
                                   (FormalParam
                                    []
                                    (RefType
                                     (ClassRefType
                                      (ClassType
                                       (:
                                        ((,)
                                         (Ident "Iterable")
                                         (:
                                          (ActualType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident "DocWriteRequest")
                                               (: (Wildcard Nothing) []))
                                              []))))
                                          []))
                                        []))))
                                    False
                                    (VarId (Ident "actionRequests")))
                                   (:
                                    (FormalParam
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "BiConsumer")
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "Integer") [])
                                               []))))
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "Exception") [])
                                                []))))
                                            [])))
                                         []))))
                                     False
                                     (VarId (Ident "itemFailureHandler")))
                                    (:
                                     (FormalParam
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (:
                                          ((,)
                                           (Ident "BiConsumer")
                                           (:
                                            (ActualType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,) (Ident "Thread") [])
                                                []))))
                                            (:
                                             (ActualType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "Exception") [])
                                                 []))))
                                             [])))
                                          []))))
                                      False
                                      (VarId (Ident "completionHandler")))
                                     (:
                                      (FormalParam
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,) (Ident "IntConsumer") [])
                                           []))))
                                       False
                                       (VarId (Ident "itemDroppedHandler")))
                                      [])))))
                                 []
                                 Nothing
                                 (MethodBody
                                  (Just
                                   (Block
                                    (:
                                     (BlockStmt
                                      (ExpStmt
                                       (MethodInv
                                        (PrimaryMethodCall
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "threadPool")
                                             (: (Ident "executor") [])))
                                           (:
                                            (ExpName
                                             (Name
                                              (:
                                               (Ident "ThreadPool")
                                               (:
                                                (Ident "Names")
                                                (: (Ident "WRITE") [])))))
                                            [])))
                                         []
                                         (Ident "execute")
                                         (:
                                          (InstanceCreation
                                           []
                                           (TypeDeclSpecifier
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident "AbstractRunnable")
                                               [])
                                              [])))
                                           []
                                           (Just
                                            (ClassBody
                                             (:
                                              (MemberDecl
                                               (MethodDecl
                                                (:
                                                 (Annotation
                                                  (MarkerAnnotation
                                                   (Name
                                                    (: (Ident "Override") []))))
                                                 (: Public []))
                                                []
                                                Nothing
                                                (Ident "onFailure")
                                                (:
                                                 (FormalParam
                                                  []
                                                  (RefType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,)
                                                       (Ident "Exception")
                                                       [])
                                                      []))))
                                                  False
                                                  (VarId (Ident "e")))
                                                 [])
                                                []
                                                Nothing
                                                (MethodBody
                                                 (Just
                                                  (Block
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident
                                                           "completionHandler")
                                                          (:
                                                           (Ident "accept")
                                                           [])))
                                                        (:
                                                         (Lit Null)
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (: (Ident "e") [])))
                                                          []))))))
                                                    []))))))
                                              (:
                                               (MemberDecl
                                                (MethodDecl
                                                 (:
                                                  (Annotation
                                                   (MarkerAnnotation
                                                    (Name
                                                     (:
                                                      (Ident "Override")
                                                      []))))
                                                  (: Protected []))
                                                 []
                                                 Nothing
                                                 (Ident "doRun")
                                                 []
                                                 []
                                                 Nothing
                                                 (MethodBody
                                                  (Just
                                                   (Block
                                                    (:
                                                     (LocalVars
                                                      (: Final [])
                                                      (RefType
                                                       (ClassRefType
                                                        (ClassType
                                                         (:
                                                          ((,)
                                                           (Ident "Thread")
                                                           [])
                                                          []))))
                                                      (:
                                                       (VarDecl
                                                        (VarId
                                                         (Ident
                                                          "originalThread"))
                                                        (Just
                                                         (InitExp
                                                          (MethodInv
                                                           (MethodCall
                                                            (Name
                                                             (:
                                                              (Ident "Thread")
                                                              (:
                                                               (Ident
                                                                "currentThread")
                                                               [])))
                                                            [])))))
                                                       []))
                                                     (:
                                                      (LocalVars
                                                       (: Final [])
                                                       (RefType
                                                        (ClassRefType
                                                         (ClassType
                                                          (:
                                                           ((,)
                                                            (Ident
                                                             "AtomicInteger")
                                                            [])
                                                           []))))
                                                       (:
                                                        (VarDecl
                                                         (VarId
                                                          (Ident "counter"))
                                                         (Just
                                                          (InitExp
                                                           (InstanceCreation
                                                            []
                                                            (TypeDeclSpecifier
                                                             (ClassType
                                                              (:
                                                               ((,)
                                                                (Ident
                                                                 "AtomicInteger")
                                                                [])
                                                               [])))
                                                            (:
                                                             (ExpName
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "numberOfActionRequests")
                                                                [])))
                                                             [])
                                                            Nothing))))
                                                        []))
                                                      (:
                                                       (LocalVars
                                                        []
                                                        (PrimType IntT)
                                                        (:
                                                         (VarDecl
                                                          (VarId (Ident "i"))
                                                          (Just
                                                           (InitExp
                                                            (Lit (Int 0)))))
                                                         []))
                                                       (:
                                                        (BlockStmt
                                                         (EnhancedFor
                                                          []
                                                          (RefType
                                                           (ClassRefType
                                                            (ClassType
                                                             (:
                                                              ((,)
                                                               (Ident
                                                                "DocWriteRequest")
                                                               (:
                                                                (Wildcard
                                                                 Nothing)
                                                                []))
                                                              []))))
                                                          (Ident
                                                           "actionRequest")
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident
                                                              "actionRequests")
                                                             [])))
                                                          (StmtBlock
                                                           (Block
                                                            (:
                                                             (LocalVars
                                                              []
                                                              (RefType
                                                               (ClassRefType
                                                                (ClassType
                                                                 (:
                                                                  ((,)
                                                                   (Ident
                                                                    "IndexRequest")
                                                                   [])
                                                                  []))))
                                                              (:
                                                               (VarDecl
                                                                (VarId
                                                                 (Ident
                                                                  "indexRequest"))
                                                                (Just
                                                                 (InitExp
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "TransportBulkAction")
                                                                      (:
                                                                       (Ident
                                                                        "getIndexWriteRequest")
                                                                       [])))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "actionRequest")
                                                                        [])))
                                                                     []))))))
                                                               []))
                                                             (:
                                                              (BlockStmt
                                                               (IfThen
                                                                (BinOp
                                                                 (ExpName
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "indexRequest")
                                                                    [])))
                                                                 Equal
                                                                 (Lit Null))
                                                                (StmtBlock
                                                                 (Block
                                                                  (:
                                                                   (BlockStmt
                                                                    (IfThen
                                                                     (BinOp
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "counter")
                                                                          (:
                                                                           (Ident
                                                                            "decrementAndGet")
                                                                           [])))
                                                                        []))
                                                                      Equal
                                                                      (Lit
                                                                       (Int 0)))
                                                                     (StmtBlock
                                                                      (Block
                                                                       (:
                                                                        (BlockStmt
                                                                         (ExpStmt
                                                                          (MethodInv
                                                                           (MethodCall
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "completionHandler")
                                                                              (:
                                                                               (Ident
                                                                                "accept")
                                                                               [])))
                                                                            (:
                                                                             (ExpName
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "originalThread")
                                                                                [])))
                                                                             (:
                                                                              (Lit
                                                                               Null)
                                                                              []))))))
                                                                        [])))))
                                                                   (:
                                                                    (BlockStmt
                                                                     (Assert
                                                                      (BinOp
                                                                       (MethodInv
                                                                        (MethodCall
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "counter")
                                                                           (:
                                                                            (Ident
                                                                             "get")
                                                                            [])))
                                                                         []))
                                                                       GThanE
                                                                       (Lit
                                                                        (Int
                                                                         0)))
                                                                      Nothing))
                                                                    (:
                                                                     (BlockStmt
                                                                      (Continue
                                                                       Nothing))
                                                                     [])))))))
                                                              (:
                                                               (LocalVars
                                                                []
                                                                (RefType
                                                                 (ClassRefType
                                                                  (ClassType
                                                                   (:
                                                                    ((,)
                                                                     (Ident
                                                                      "String")
                                                                     [])
                                                                    []))))
                                                                (:
                                                                 (VarDecl
                                                                  (VarId
                                                                   (Ident
                                                                    "pipelineId"))
                                                                  (Just
                                                                   (InitExp
                                                                    (MethodInv
                                                                     (MethodCall
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "indexRequest")
                                                                        (:
                                                                         (Ident
                                                                          "getPipeline")
                                                                         [])))
                                                                      [])))))
                                                                 []))
                                                               (:
                                                                (BlockStmt
                                                                 (IfThen
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "NOOP_PIPELINE_NAME")
                                                                      (:
                                                                       (Ident
                                                                        "equals")
                                                                       [])))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "pipelineId")
                                                                        [])))
                                                                     [])))
                                                                  (StmtBlock
                                                                   (Block
                                                                    (:
                                                                     (BlockStmt
                                                                      (IfThen
                                                                       (BinOp
                                                                        (MethodInv
                                                                         (MethodCall
                                                                          (Name
                                                                           (:
                                                                            (Ident
                                                                             "counter")
                                                                            (:
                                                                             (Ident
                                                                              "decrementAndGet")
                                                                             [])))
                                                                          []))
                                                                        Equal
                                                                        (Lit
                                                                         (Int
                                                                          0)))
                                                                       (StmtBlock
                                                                        (Block
                                                                         (:
                                                                          (BlockStmt
                                                                           (ExpStmt
                                                                            (MethodInv
                                                                             (MethodCall
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "completionHandler")
                                                                                (:
                                                                                 (Ident
                                                                                  "accept")
                                                                                 [])))
                                                                              (:
                                                                               (ExpName
                                                                                (Name
                                                                                 (:
                                                                                  (Ident
                                                                                   "originalThread")
                                                                                  [])))
                                                                               (:
                                                                                (Lit
                                                                                 Null)
                                                                                []))))))
                                                                          [])))))
                                                                     (:
                                                                      (BlockStmt
                                                                       (Assert
                                                                        (BinOp
                                                                         (MethodInv
                                                                          (MethodCall
                                                                           (Name
                                                                            (:
                                                                             (Ident
                                                                              "counter")
                                                                             (:
                                                                              (Ident
                                                                               "get")
                                                                              [])))
                                                                           []))
                                                                         GThanE
                                                                         (Lit
                                                                          (Int
                                                                           0)))
                                                                        Nothing))
                                                                      (:
                                                                       (BlockStmt
                                                                        (Continue
                                                                         Nothing))
                                                                       [])))))))
                                                                (:
                                                                 (LocalVars
                                                                  (: Final [])
                                                                  (PrimType
                                                                   IntT)
                                                                  (:
                                                                   (VarDecl
                                                                    (VarId
                                                                     (Ident
                                                                      "slot"))
                                                                    (Just
                                                                     (InitExp
                                                                      (ExpName
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "i")
                                                                         []))))))
                                                                   []))
                                                                 (:
                                                                  (BlockStmt
                                                                   (Try
                                                                    (Block
                                                                     (:
                                                                      (LocalVars
                                                                       []
                                                                       (RefType
                                                                        (ClassRefType
                                                                         (ClassType
                                                                          (:
                                                                           ((,)
                                                                            (Ident
                                                                             "PipelineHolder")
                                                                            [])
                                                                           []))))
                                                                       (:
                                                                        (VarDecl
                                                                         (VarId
                                                                          (Ident
                                                                           "holder"))
                                                                         (Just
                                                                          (InitExp
                                                                           (MethodInv
                                                                            (MethodCall
                                                                             (Name
                                                                              (:
                                                                               (Ident
                                                                                "pipelines")
                                                                               (:
                                                                                (Ident
                                                                                 "get")
                                                                                [])))
                                                                             (:
                                                                              (ExpName
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "pipelineId")
                                                                                 [])))
                                                                              []))))))
                                                                        []))
                                                                      (:
                                                                       (BlockStmt
                                                                        (IfThen
                                                                         (BinOp
                                                                          (ExpName
                                                                           (Name
                                                                            (:
                                                                             (Ident
                                                                              "holder")
                                                                             [])))
                                                                          Equal
                                                                          (Lit
                                                                           Null))
                                                                         (StmtBlock
                                                                          (Block
                                                                           (:
                                                                            (BlockStmt
                                                                             (Throw
                                                                              (InstanceCreation
                                                                               []
                                                                               (TypeDeclSpecifier
                                                                                (ClassType
                                                                                 (:
                                                                                  ((,)
                                                                                   (Ident
                                                                                    "IllegalArgumentException")
                                                                                   [])
                                                                                  [])))
                                                                               (:
                                                                                (BinOp
                                                                                 (BinOp
                                                                                  (Lit
                                                                                   (String
                                                                                    "pipeline with id ["))
                                                                                  Add
                                                                                  (ExpName
                                                                                   (Name
                                                                                    (:
                                                                                     (Ident
                                                                                      "pipelineId")
                                                                                     []))))
                                                                                 Add
                                                                                 (Lit
                                                                                  (String
                                                                                   "] does not exist")))
                                                                                [])
                                                                               Nothing)))
                                                                            [])))))
                                                                       (:
                                                                        (LocalVars
                                                                         []
                                                                         (RefType
                                                                          (ClassRefType
                                                                           (ClassType
                                                                            (:
                                                                             ((,)
                                                                              (Ident
                                                                               "Pipeline")
                                                                              [])
                                                                             []))))
                                                                         (:
                                                                          (VarDecl
                                                                           (VarId
                                                                            (Ident
                                                                             "pipeline"))
                                                                           (Just
                                                                            (InitExp
                                                                             (ExpName
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "holder")
                                                                                (:
                                                                                 (Ident
                                                                                  "pipeline")
                                                                                 [])))))))
                                                                          []))
                                                                        (:
                                                                         (BlockStmt
                                                                          (ExpStmt
                                                                           (MethodInv
                                                                            (MethodCall
                                                                             (Name
                                                                              (:
                                                                               (Ident
                                                                                "innerExecute")
                                                                               []))
                                                                             (:
                                                                              (ExpName
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "slot")
                                                                                 [])))
                                                                              (:
                                                                               (ExpName
                                                                                (Name
                                                                                 (:
                                                                                  (Ident
                                                                                   "indexRequest")
                                                                                  [])))
                                                                               (:
                                                                                (ExpName
                                                                                 (Name
                                                                                  (:
                                                                                   (Ident
                                                                                    "pipeline")
                                                                                   [])))
                                                                                (:
                                                                                 (ExpName
                                                                                  (Name
                                                                                   (:
                                                                                    (Ident
                                                                                     "itemDroppedHandler")
                                                                                    [])))
                                                                                 (:
                                                                                  (Lambda
                                                                                   (LambdaSingleParam
                                                                                    (Ident
                                                                                     "e"))
                                                                                   (LambdaBlock
                                                                                    (Block
                                                                                     (:
                                                                                      (BlockStmt
                                                                                       (IfThenElse
                                                                                        (BinOp
                                                                                         (ExpName
                                                                                          (Name
                                                                                           (:
                                                                                            (Ident
                                                                                             "e")
                                                                                            [])))
                                                                                         Equal
                                                                                         (Lit
                                                                                          Null))
                                                                                        (StmtBlock
                                                                                         (Block
                                                                                          (:
                                                                                           (BlockStmt
                                                                                            (ExpStmt
                                                                                             (MethodInv
                                                                                              (MethodCall
                                                                                               (Name
                                                                                                (:
                                                                                                 (Ident
                                                                                                  "indexRequest")
                                                                                                 (:
                                                                                                  (Ident
                                                                                                   "setPipeline")
                                                                                                  [])))
                                                                                               (:
                                                                                                (ExpName
                                                                                                 (Name
                                                                                                  (:
                                                                                                   (Ident
                                                                                                    "NOOP_PIPELINE_NAME")
                                                                                                   [])))
                                                                                                [])))))
                                                                                           [])))
                                                                                        (StmtBlock
                                                                                         (Block
                                                                                          (:
                                                                                           (BlockStmt
                                                                                            (ExpStmt
                                                                                             (MethodInv
                                                                                              (MethodCall
                                                                                               (Name
                                                                                                (:
                                                                                                 (Ident
                                                                                                  "itemFailureHandler")
                                                                                                 (:
                                                                                                  (Ident
                                                                                                   "accept")
                                                                                                  [])))
                                                                                               (:
                                                                                                (ExpName
                                                                                                 (Name
                                                                                                  (:
                                                                                                   (Ident
                                                                                                    "slot")
                                                                                                   [])))
                                                                                                (:
                                                                                                 (ExpName
                                                                                                  (Name
                                                                                                   (:
                                                                                                    (Ident
                                                                                                     "e")
                                                                                                    [])))
                                                                                                 []))))))
                                                                                           [])))))
                                                                                      (:
                                                                                       (BlockStmt
                                                                                        (IfThen
                                                                                         (BinOp
                                                                                          (MethodInv
                                                                                           (MethodCall
                                                                                            (Name
                                                                                             (:
                                                                                              (Ident
                                                                                               "counter")
                                                                                              (:
                                                                                               (Ident
                                                                                                "decrementAndGet")
                                                                                               [])))
                                                                                            []))
                                                                                          Equal
                                                                                          (Lit
                                                                                           (Int
                                                                                            0)))
                                                                                         (StmtBlock
                                                                                          (Block
                                                                                           (:
                                                                                            (BlockStmt
                                                                                             (ExpStmt
                                                                                              (MethodInv
                                                                                               (MethodCall
                                                                                                (Name
                                                                                                 (:
                                                                                                  (Ident
                                                                                                   "completionHandler")
                                                                                                  (:
                                                                                                   (Ident
                                                                                                    "accept")
                                                                                                   [])))
                                                                                                (:
                                                                                                 (ExpName
                                                                                                  (Name
                                                                                                   (:
                                                                                                    (Ident
                                                                                                     "originalThread")
                                                                                                    [])))
                                                                                                 (:
                                                                                                  (Lit
                                                                                                   Null)
                                                                                                  []))))))
                                                                                            [])))))
                                                                                       (:
                                                                                        (BlockStmt
                                                                                         (Assert
                                                                                          (BinOp
                                                                                           (MethodInv
                                                                                            (MethodCall
                                                                                             (Name
                                                                                              (:
                                                                                               (Ident
                                                                                                "counter")
                                                                                               (:
                                                                                                (Ident
                                                                                                 "get")
                                                                                                [])))
                                                                                             []))
                                                                                           GThanE
                                                                                           (Lit
                                                                                            (Int
                                                                                             0)))
                                                                                          Nothing))
                                                                                        []))))))
                                                                                  [])))))))))
                                                                         [])))))
                                                                    (:
                                                                     (Catch
                                                                      (FormalParam
                                                                       []
                                                                       (RefType
                                                                        (ClassRefType
                                                                         (ClassType
                                                                          (:
                                                                           ((,)
                                                                            (Ident
                                                                             "Exception")
                                                                            [])
                                                                           []))))
                                                                       False
                                                                       (VarId
                                                                        (Ident
                                                                         "e")))
                                                                      (Block
                                                                       (:
                                                                        (BlockStmt
                                                                         (ExpStmt
                                                                          (MethodInv
                                                                           (MethodCall
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "itemFailureHandler")
                                                                              (:
                                                                               (Ident
                                                                                "accept")
                                                                               [])))
                                                                            (:
                                                                             (ExpName
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "slot")
                                                                                [])))
                                                                             (:
                                                                              (ExpName
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "e")
                                                                                 [])))
                                                                              []))))))
                                                                        (:
                                                                         (BlockStmt
                                                                          (IfThen
                                                                           (BinOp
                                                                            (MethodInv
                                                                             (MethodCall
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "counter")
                                                                                (:
                                                                                 (Ident
                                                                                  "decrementAndGet")
                                                                                 [])))
                                                                              []))
                                                                            Equal
                                                                            (Lit
                                                                             (Int
                                                                              0)))
                                                                           (StmtBlock
                                                                            (Block
                                                                             (:
                                                                              (BlockStmt
                                                                               (ExpStmt
                                                                                (MethodInv
                                                                                 (MethodCall
                                                                                  (Name
                                                                                   (:
                                                                                    (Ident
                                                                                     "completionHandler")
                                                                                    (:
                                                                                     (Ident
                                                                                      "accept")
                                                                                     [])))
                                                                                  (:
                                                                                   (ExpName
                                                                                    (Name
                                                                                     (:
                                                                                      (Ident
                                                                                       "originalThread")
                                                                                      [])))
                                                                                   (:
                                                                                    (Lit
                                                                                     Null)
                                                                                    []))))))
                                                                              [])))))
                                                                         (:
                                                                          (BlockStmt
                                                                           (Assert
                                                                            (BinOp
                                                                             (MethodInv
                                                                              (MethodCall
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "counter")
                                                                                 (:
                                                                                  (Ident
                                                                                   "get")
                                                                                  [])))
                                                                               []))
                                                                             GThanE
                                                                             (Lit
                                                                              (Int
                                                                               0)))
                                                                            Nothing))
                                                                          [])))))
                                                                     [])
                                                                    Nothing))
                                                                  (:
                                                                   (BlockStmt
                                                                    (ExpStmt
                                                                     (PostIncrement
                                                                      (ExpName
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "i")
                                                                         []))))))
                                                                   [])))))))))))
                                                        [])))))))))
                                               [])))))
                                          [])))))
                                     []))))))
                               (:
                                (MemberDecl
                                 (MethodDecl
                                  (: Public [])
                                  []
                                  (Just
                                   (RefType
                                    (ClassRefType
                                     (ClassType
                                      (: ((,) (Ident "IngestStats") []) [])))))
                                  (Ident "stats")
                                  []
                                  []
                                  Nothing
                                  (MethodBody
                                   (Just
                                    (Block
                                     (:
                                      (LocalVars
                                       []
                                       (RefType
                                        (ClassRefType
                                         (ClassType
                                          (:
                                           ((,) (Ident "IngestStats") [])
                                           (: ((,) (Ident "Builder") []) [])))))
                                       (:
                                        (VarDecl
                                         (VarId (Ident "statsBuilder"))
                                         (Just
                                          (InitExp
                                           (InstanceCreation
                                            []
                                            (TypeDeclSpecifier
                                             (ClassType
                                              (:
                                               ((,) (Ident "IngestStats") [])
                                               (:
                                                ((,) (Ident "Builder") [])
                                                []))))
                                            []
                                            Nothing))))
                                        []))
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident "statsBuilder")
                                             (: (Ident "addTotalMetrics") [])))
                                           (:
                                            (ExpName
                                             (Name
                                              (: (Ident "totalMetrics") [])))
                                            [])))))
                                       (:
                                        (BlockStmt
                                         (ExpStmt
                                          (MethodInv
                                           (MethodCall
                                            (Name
                                             (:
                                              (Ident "pipelines")
                                              (: (Ident "forEach") [])))
                                            (:
                                             (Lambda
                                              (LambdaInferredParams
                                               (:
                                                (Ident "id")
                                                (: (Ident "holder") [])))
                                              (LambdaBlock
                                               (Block
                                                (:
                                                 (LocalVars
                                                  []
                                                  (RefType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,)
                                                       (Ident "Pipeline")
                                                       [])
                                                      []))))
                                                  (:
                                                   (VarDecl
                                                    (VarId (Ident "pipeline"))
                                                    (Just
                                                     (InitExp
                                                      (ExpName
                                                       (Name
                                                        (:
                                                         (Ident "holder")
                                                         (:
                                                          (Ident "pipeline")
                                                          [])))))))
                                                   []))
                                                 (:
                                                  (LocalVars
                                                   []
                                                   (RefType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident
                                                         "CompoundProcessor")
                                                        [])
                                                       []))))
                                                   (:
                                                    (VarDecl
                                                     (VarId
                                                      (Ident "rootProcessor"))
                                                     (Just
                                                      (InitExp
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "pipeline")
                                                           (:
                                                            (Ident
                                                             "getCompoundProcessor")
                                                            [])))
                                                         [])))))
                                                    []))
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "statsBuilder")
                                                         (:
                                                          (Ident
                                                           "addPipelineMetrics")
                                                          [])))
                                                       (:
                                                        (ExpName
                                                         (Name
                                                          (: (Ident "id") [])))
                                                        (:
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident "pipeline")
                                                             (:
                                                              (Ident
                                                               "getMetrics")
                                                              [])))
                                                           []))
                                                         []))))))
                                                   (:
                                                    (LocalVars
                                                     []
                                                     (RefType
                                                      (ClassRefType
                                                       (ClassType
                                                        (:
                                                         ((,)
                                                          (Ident "List")
                                                          (:
                                                           (ActualType
                                                            (ClassRefType
                                                             (ClassType
                                                              (:
                                                               ((,)
                                                                (Ident "Tuple")
                                                                (:
                                                                 (ActualType
                                                                  (ClassRefType
                                                                   (ClassType
                                                                    (:
                                                                     ((,)
                                                                      (Ident
                                                                       "Processor")
                                                                      [])
                                                                     []))))
                                                                 (:
                                                                  (ActualType
                                                                   (ClassRefType
                                                                    (ClassType
                                                                     (:
                                                                      ((,)
                                                                       (Ident
                                                                        "IngestMetric")
                                                                       [])
                                                                      []))))
                                                                  [])))
                                                               []))))
                                                           []))
                                                         []))))
                                                     (:
                                                      (VarDecl
                                                       (VarId
                                                        (Ident
                                                         "processorMetrics"))
                                                       (Just
                                                        (InitExp
                                                         (InstanceCreation
                                                          []
                                                          (TypeDeclSpecifierUnqualifiedWithDiamond
                                                           (Ident "ArrayList")
                                                           Diamond)
                                                          []
                                                          Nothing))))
                                                      []))
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "getProcessorMetrics")
                                                           []))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident
                                                              "rootProcessor")
                                                             [])))
                                                          (:
                                                           (ExpName
                                                            (Name
                                                             (:
                                                              (Ident
                                                               "processorMetrics")
                                                              [])))
                                                           []))))))
                                                     (:
                                                      (BlockStmt
                                                       (ExpStmt
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident
                                                             "processorMetrics")
                                                            (:
                                                             (Ident "forEach")
                                                             [])))
                                                          (:
                                                           (Lambda
                                                            (LambdaSingleParam
                                                             (Ident "t"))
                                                            (LambdaBlock
                                                             (Block
                                                              (:
                                                               (LocalVars
                                                                []
                                                                (RefType
                                                                 (ClassRefType
                                                                  (ClassType
                                                                   (:
                                                                    ((,)
                                                                     (Ident
                                                                      "Processor")
                                                                     [])
                                                                    []))))
                                                                (:
                                                                 (VarDecl
                                                                  (VarId
                                                                   (Ident
                                                                    "processor"))
                                                                  (Just
                                                                   (InitExp
                                                                    (MethodInv
                                                                     (MethodCall
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "t")
                                                                        (:
                                                                         (Ident
                                                                          "v1")
                                                                         [])))
                                                                      [])))))
                                                                 []))
                                                               (:
                                                                (LocalVars
                                                                 []
                                                                 (RefType
                                                                  (ClassRefType
                                                                   (ClassType
                                                                    (:
                                                                     ((,)
                                                                      (Ident
                                                                       "IngestMetric")
                                                                      [])
                                                                     []))))
                                                                 (:
                                                                  (VarDecl
                                                                   (VarId
                                                                    (Ident
                                                                     "processorMetric"))
                                                                   (Just
                                                                    (InitExp
                                                                     (MethodInv
                                                                      (MethodCall
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "t")
                                                                         (:
                                                                          (Ident
                                                                           "v2")
                                                                          [])))
                                                                       [])))))
                                                                  []))
                                                                (:
                                                                 (BlockStmt
                                                                  (ExpStmt
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "statsBuilder")
                                                                       (:
                                                                        (Ident
                                                                         "addProcessorMetrics")
                                                                        [])))
                                                                     (:
                                                                      (ExpName
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "id")
                                                                         [])))
                                                                      (:
                                                                       (MethodInv
                                                                        (MethodCall
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "getProcessorName")
                                                                           []))
                                                                         (:
                                                                          (ExpName
                                                                           (Name
                                                                            (:
                                                                             (Ident
                                                                              "processor")
                                                                             [])))
                                                                          [])))
                                                                       (:
                                                                        (ExpName
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "processorMetric")
                                                                           [])))
                                                                        [])))))))
                                                                 []))))))
                                                           [])))))
                                                      [])))))))))
                                             [])))))
                                        (:
                                         (BlockStmt
                                          (Return
                                           (Just
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "statsBuilder")
                                                (: (Ident "build") [])))
                                              [])))))
                                         [])))))))))
                                (:
                                 (MemberDecl
                                  (MethodDecl
                                   (: Public [])
                                   []
                                   Nothing
                                   (Ident "addIngestClusterStateListener")
                                   (:
                                    (FormalParam
                                     []
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (:
                                         ((,)
                                          (Ident "Consumer")
                                          (:
                                           (ActualType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "ClusterState") [])
                                               []))))
                                           []))
                                         []))))
                                     False
                                     (VarId (Ident "listener")))
                                    [])
                                   []
                                   Nothing
                                   (MethodBody
                                    (Just
                                     (Block
                                      (:
                                       (BlockStmt
                                        (ExpStmt
                                         (MethodInv
                                          (MethodCall
                                           (Name
                                            (:
                                             (Ident
                                              "ingestClusterStateListeners")
                                             (: (Ident "add") [])))
                                           (:
                                            (ExpName
                                             (Name (: (Ident "listener") [])))
                                            [])))))
                                       []))))))
                                 (:
                                  (MemberDecl
                                   (MethodDecl
                                    (: Static [])
                                    []
                                    (Just
                                     (RefType
                                      (ClassRefType
                                       (ClassType
                                        (: ((,) (Ident "String") []) [])))))
                                    (Ident "getProcessorName")
                                    (:
                                     (FormalParam
                                      []
                                      (RefType
                                       (ClassRefType
                                        (ClassType
                                         (: ((,) (Ident "Processor") []) []))))
                                      False
                                      (VarId (Ident "processor")))
                                     [])
                                    []
                                    Nothing
                                    (MethodBody
                                     (Just
                                      (Block
                                       (:
                                        (BlockStmt
                                         (IfThen
                                          (InstanceOf
                                           (ExpName
                                            (Name (: (Ident "processor") [])))
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,)
                                               (Ident "ConditionalProcessor")
                                               [])
                                              []))))
                                          (StmtBlock
                                           (Block
                                            (:
                                             (BlockStmt
                                              (ExpStmt
                                               (Assign
                                                (NameLhs
                                                 (Name
                                                  (: (Ident "processor") [])))
                                                EqualA
                                                (MethodInv
                                                 (PrimaryMethodCall
                                                  (Cast
                                                   (RefType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident
                                                         "ConditionalProcessor")
                                                        [])
                                                       []))))
                                                   (ExpName
                                                    (Name
                                                     (:
                                                      (Ident "processor")
                                                      []))))
                                                  []
                                                  (Ident "getInnerProcessor")
                                                  [])))))
                                             [])))))
                                        (:
                                         (LocalVars
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "StringBuilder") [])
                                              []))))
                                          (:
                                           (VarDecl
                                            (VarId (Ident "sb"))
                                            (Just
                                             (InitExp
                                              (InstanceCreation
                                               []
                                               (TypeDeclSpecifier
                                                (ClassType
                                                 (:
                                                  ((,)
                                                   (Ident "StringBuilder")
                                                   [])
                                                  [])))
                                               (: (Lit (Int 5)) [])
                                               Nothing))))
                                           []))
                                         (:
                                          (BlockStmt
                                           (ExpStmt
                                            (MethodInv
                                             (MethodCall
                                              (Name
                                               (:
                                                (Ident "sb")
                                                (: (Ident "append") [])))
                                              (:
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "processor")
                                                   (: (Ident "getType") [])))
                                                 []))
                                               [])))))
                                          (:
                                           (BlockStmt
                                            (IfThen
                                             (InstanceOf
                                              (ExpName
                                               (Name
                                                (: (Ident "processor") [])))
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,)
                                                  (Ident "PipelineProcessor")
                                                  [])
                                                 []))))
                                             (StmtBlock
                                              (Block
                                               (:
                                                (LocalVars
                                                 []
                                                 (RefType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,) (Ident "String") [])
                                                     []))))
                                                 (:
                                                  (VarDecl
                                                   (VarId
                                                    (Ident "pipelineName"))
                                                   (Just
                                                    (InitExp
                                                     (MethodInv
                                                      (PrimaryMethodCall
                                                       (Cast
                                                        (RefType
                                                         (ClassRefType
                                                          (ClassType
                                                           (:
                                                            ((,)
                                                             (Ident
                                                              "PipelineProcessor")
                                                             [])
                                                            []))))
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "processor")
                                                           []))))
                                                       []
                                                       (Ident "getPipelineName")
                                                       [])))))
                                                  []))
                                                (:
                                                 (BlockStmt
                                                  (ExpStmt
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "sb")
                                                       (: (Ident "append") [])))
                                                     (:
                                                      (Lit (String ":"))
                                                      [])))))
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "sb")
                                                        (:
                                                         (Ident "append")
                                                         [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (:
                                                          (Ident "pipelineName")
                                                          [])))
                                                       [])))))
                                                  [])))))))
                                           (:
                                            (LocalVars
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "String") [])
                                                 []))))
                                             (:
                                              (VarDecl
                                               (VarId (Ident "tag"))
                                               (Just
                                                (InitExp
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "processor")
                                                     (: (Ident "getTag") [])))
                                                   [])))))
                                              []))
                                            (:
                                             (BlockStmt
                                              (IfThen
                                               (BinOp
                                                (BinOp
                                                 (ExpName
                                                  (Name (: (Ident "tag") [])))
                                                 NotEq
                                                 (Lit Null))
                                                CAnd
                                                (PreNot
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "tag")
                                                     (: (Ident "isEmpty") [])))
                                                   []))))
                                               (StmtBlock
                                                (Block
                                                 (:
                                                  (BlockStmt
                                                   (ExpStmt
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "sb")
                                                        (:
                                                         (Ident "append")
                                                         [])))
                                                      (:
                                                       (Lit (String ":"))
                                                       [])))))
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "sb")
                                                         (:
                                                          (Ident "append")
                                                          [])))
                                                       (:
                                                        (ExpName
                                                         (Name
                                                          (: (Ident "tag") [])))
                                                        [])))))
                                                   []))))))
                                             (:
                                              (BlockStmt
                                               (Return
                                                (Just
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "sb")
                                                     (: (Ident "toString") [])))
                                                   [])))))
                                              []))))))))))))
                                  (:
                                   (MemberDecl
                                    (MethodDecl
                                     (: Private [])
                                     []
                                     Nothing
                                     (Ident "innerExecute")
                                     (:
                                      (FormalParam
                                       []
                                       (PrimType IntT)
                                       False
                                       (VarId (Ident "slot")))
                                      (:
                                       (FormalParam
                                        []
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,) (Ident "IndexRequest") [])
                                            []))))
                                        False
                                        (VarId (Ident "indexRequest")))
                                       (:
                                        (FormalParam
                                         []
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (:
                                             ((,) (Ident "Pipeline") [])
                                             []))))
                                         False
                                         (VarId (Ident "pipeline")))
                                        (:
                                         (FormalParam
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "IntConsumer") [])
                                              []))))
                                          False
                                          (VarId (Ident "itemDroppedHandler")))
                                         (:
                                          (FormalParam
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident "Consumer")
                                                (:
                                                 (ActualType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,)
                                                      (Ident "Exception")
                                                      [])
                                                     []))))
                                                 []))
                                               []))))
                                           False
                                           (VarId (Ident "handler")))
                                          [])))))
                                     []
                                     Nothing
                                     (MethodBody
                                      (Just
                                       (Block
                                        (:
                                         (BlockStmt
                                          (IfThen
                                           (MethodInv
                                            (PrimaryMethodCall
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "pipeline")
                                                 (:
                                                  (Ident "getProcessors")
                                                  [])))
                                               []))
                                             []
                                             (Ident "isEmpty")
                                             []))
                                           (StmtBlock
                                            (Block
                                             (:
                                              (BlockStmt
                                               (ExpStmt
                                                (MethodInv
                                                 (MethodCall
                                                  (Name
                                                   (:
                                                    (Ident "handler")
                                                    (: (Ident "accept") [])))
                                                  (: (Lit Null) [])))))
                                              (:
                                               (BlockStmt (Return Nothing))
                                               []))))))
                                         (:
                                          (LocalVars
                                           []
                                           (PrimType LongT)
                                           (:
                                            (VarDecl
                                             (VarId (Ident "startTimeInNanos"))
                                             (Just
                                              (InitExp
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "System")
                                                   (: (Ident "nanoTime") [])))
                                                 [])))))
                                            []))
                                          (:
                                           (BlockStmt
                                            (ExpStmt
                                             (MethodInv
                                              (MethodCall
                                               (Name
                                                (:
                                                 (Ident "totalMetrics")
                                                 (: (Ident "preIngest") [])))
                                               []))))
                                           (:
                                            (LocalVars
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "String") [])
                                                 []))))
                                             (:
                                              (VarDecl
                                               (VarId (Ident "index"))
                                               (Just
                                                (InitExp
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "indexRequest")
                                                     (: (Ident "index") [])))
                                                   [])))))
                                              []))
                                            (:
                                             (LocalVars
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,) (Ident "String") [])
                                                  []))))
                                              (:
                                               (VarDecl
                                                (VarId (Ident "type"))
                                                (Just
                                                 (InitExp
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident "indexRequest")
                                                      (: (Ident "type") [])))
                                                    [])))))
                                               []))
                                             (:
                                              (LocalVars
                                               []
                                               (RefType
                                                (ClassRefType
                                                 (ClassType
                                                  (:
                                                   ((,) (Ident "String") [])
                                                   []))))
                                               (:
                                                (VarDecl
                                                 (VarId (Ident "id"))
                                                 (Just
                                                  (InitExp
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "indexRequest")
                                                       (: (Ident "id") [])))
                                                     [])))))
                                                []))
                                              (:
                                               (LocalVars
                                                []
                                                (RefType
                                                 (ClassRefType
                                                  (ClassType
                                                   (:
                                                    ((,) (Ident "String") [])
                                                    []))))
                                                (:
                                                 (VarDecl
                                                  (VarId (Ident "routing"))
                                                  (Just
                                                   (InitExp
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "indexRequest")
                                                        (:
                                                         (Ident "routing")
                                                         [])))
                                                      [])))))
                                                 []))
                                               (:
                                                (LocalVars
                                                 []
                                                 (RefType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,) (Ident "Long") [])
                                                     []))))
                                                 (:
                                                  (VarDecl
                                                   (VarId (Ident "version"))
                                                   (Just
                                                    (InitExp
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "indexRequest")
                                                         (:
                                                          (Ident "version")
                                                          [])))
                                                       [])))))
                                                  []))
                                                (:
                                                 (LocalVars
                                                  []
                                                  (RefType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,)
                                                       (Ident "VersionType")
                                                       [])
                                                      []))))
                                                  (:
                                                   (VarDecl
                                                    (VarId
                                                     (Ident "versionType"))
                                                    (Just
                                                     (InitExp
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "indexRequest")
                                                          (:
                                                           (Ident "versionType")
                                                           [])))
                                                        [])))))
                                                   []))
                                                 (:
                                                  (LocalVars
                                                   []
                                                   (RefType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident "Map")
                                                        (:
                                                         (ActualType
                                                          (ClassRefType
                                                           (ClassType
                                                            (:
                                                             ((,)
                                                              (Ident "String")
                                                              [])
                                                             []))))
                                                         (:
                                                          (ActualType
                                                           (ClassRefType
                                                            (ClassType
                                                             (:
                                                              ((,)
                                                               (Ident "Object")
                                                               [])
                                                              []))))
                                                          [])))
                                                       []))))
                                                   (:
                                                    (VarDecl
                                                     (VarId
                                                      (Ident "sourceAsMap"))
                                                     (Just
                                                      (InitExp
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "indexRequest")
                                                           (:
                                                            (Ident
                                                             "sourceAsMap")
                                                            [])))
                                                         [])))))
                                                    []))
                                                  (:
                                                   (LocalVars
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "IngestDocument")
                                                         [])
                                                        []))))
                                                    (:
                                                     (VarDecl
                                                      (VarId
                                                       (Ident "ingestDocument"))
                                                      (Just
                                                       (InitExp
                                                        (InstanceCreation
                                                         []
                                                         (TypeDeclSpecifier
                                                          (ClassType
                                                           (:
                                                            ((,)
                                                             (Ident
                                                              "IngestDocument")
                                                             [])
                                                            [])))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident "index")
                                                             [])))
                                                          (:
                                                           (ExpName
                                                            (Name
                                                             (:
                                                              (Ident "type")
                                                              [])))
                                                           (:
                                                            (ExpName
                                                             (Name
                                                              (:
                                                               (Ident "id")
                                                               [])))
                                                            (:
                                                             (ExpName
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "routing")
                                                                [])))
                                                             (:
                                                              (ExpName
                                                               (Name
                                                                (:
                                                                 (Ident
                                                                  "version")
                                                                 [])))
                                                              (:
                                                               (ExpName
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "versionType")
                                                                  [])))
                                                               (:
                                                                (ExpName
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "sourceAsMap")
                                                                   [])))
                                                                [])))))))
                                                         Nothing))))
                                                     []))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "pipeline")
                                                          (:
                                                           (Ident "execute")
                                                           [])))
                                                        (:
                                                         (ExpName
                                                          (Name
                                                           (:
                                                            (Ident
                                                             "ingestDocument")
                                                            [])))
                                                         (:
                                                          (Lambda
                                                           (LambdaInferredParams
                                                            (:
                                                             (Ident "result")
                                                             (:
                                                              (Ident "e")
                                                              [])))
                                                           (LambdaBlock
                                                            (Block
                                                             (:
                                                              (LocalVars
                                                               []
                                                               (PrimType LongT)
                                                               (:
                                                                (VarDecl
                                                                 (VarId
                                                                  (Ident
                                                                   "ingestTimeInMillis"))
                                                                 (Just
                                                                  (InitExp
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "TimeUnit")
                                                                       (:
                                                                        (Ident
                                                                         "NANOSECONDS")
                                                                        (:
                                                                         (Ident
                                                                          "toMillis")
                                                                         []))))
                                                                     (:
                                                                      (BinOp
                                                                       (MethodInv
                                                                        (MethodCall
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "System")
                                                                           (:
                                                                            (Ident
                                                                             "nanoTime")
                                                                            [])))
                                                                         []))
                                                                       Sub
                                                                       (ExpName
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "startTimeInNanos")
                                                                          []))))
                                                                      []))))))
                                                                []))
                                                              (:
                                                               (BlockStmt
                                                                (ExpStmt
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "totalMetrics")
                                                                     (:
                                                                      (Ident
                                                                       "postIngest")
                                                                      [])))
                                                                   (:
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "ingestTimeInMillis")
                                                                       [])))
                                                                    [])))))
                                                               (:
                                                                (BlockStmt
                                                                 (IfThenElse
                                                                  (BinOp
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "e")
                                                                      [])))
                                                                   NotEq
                                                                   (Lit Null))
                                                                  (StmtBlock
                                                                   (Block
                                                                    (:
                                                                     (BlockStmt
                                                                      (ExpStmt
                                                                       (MethodInv
                                                                        (MethodCall
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "totalMetrics")
                                                                           (:
                                                                            (Ident
                                                                             "ingestFailed")
                                                                            [])))
                                                                         []))))
                                                                     (:
                                                                      (BlockStmt
                                                                       (ExpStmt
                                                                        (MethodInv
                                                                         (MethodCall
                                                                          (Name
                                                                           (:
                                                                            (Ident
                                                                             "handler")
                                                                            (:
                                                                             (Ident
                                                                              "accept")
                                                                             [])))
                                                                          (:
                                                                           (ExpName
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "e")
                                                                              [])))
                                                                           [])))))
                                                                      []))))
                                                                  (IfThenElse
                                                                   (BinOp
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "result")
                                                                       [])))
                                                                    Equal
                                                                    (Lit Null))
                                                                   (StmtBlock
                                                                    (Block
                                                                     (:
                                                                      (BlockStmt
                                                                       (ExpStmt
                                                                        (MethodInv
                                                                         (MethodCall
                                                                          (Name
                                                                           (:
                                                                            (Ident
                                                                             "itemDroppedHandler")
                                                                            (:
                                                                             (Ident
                                                                              "accept")
                                                                             [])))
                                                                          (:
                                                                           (ExpName
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "slot")
                                                                              [])))
                                                                           [])))))
                                                                      (:
                                                                       (BlockStmt
                                                                        (ExpStmt
                                                                         (MethodInv
                                                                          (MethodCall
                                                                           (Name
                                                                            (:
                                                                             (Ident
                                                                              "handler")
                                                                             (:
                                                                              (Ident
                                                                               "accept")
                                                                              [])))
                                                                           (:
                                                                            (Lit
                                                                             Null)
                                                                            [])))))
                                                                       []))))
                                                                   (StmtBlock
                                                                    (Block
                                                                     (:
                                                                      (LocalVars
                                                                       []
                                                                       (RefType
                                                                        (ClassRefType
                                                                         (ClassType
                                                                          (:
                                                                           ((,)
                                                                            (Ident
                                                                             "Map")
                                                                            (:
                                                                             (ActualType
                                                                              (ClassRefType
                                                                               (ClassType
                                                                                (:
                                                                                 ((,)
                                                                                  (Ident
                                                                                   "IngestDocument")
                                                                                  [])
                                                                                 (:
                                                                                  ((,)
                                                                                   (Ident
                                                                                    "MetaData")
                                                                                   [])
                                                                                  [])))))
                                                                             (:
                                                                              (ActualType
                                                                               (ClassRefType
                                                                                (ClassType
                                                                                 (:
                                                                                  ((,)
                                                                                   (Ident
                                                                                    "Object")
                                                                                   [])
                                                                                  []))))
                                                                              [])))
                                                                           []))))
                                                                       (:
                                                                        (VarDecl
                                                                         (VarId
                                                                          (Ident
                                                                           "metadataMap"))
                                                                         (Just
                                                                          (InitExp
                                                                           (MethodInv
                                                                            (MethodCall
                                                                             (Name
                                                                              (:
                                                                               (Ident
                                                                                "ingestDocument")
                                                                               (:
                                                                                (Ident
                                                                                 "extractMetadata")
                                                                                [])))
                                                                             [])))))
                                                                        []))
                                                                      (:
                                                                       (BlockStmt
                                                                        (ExpStmt
                                                                         (MethodInv
                                                                          (MethodCall
                                                                           (Name
                                                                            (:
                                                                             (Ident
                                                                              "indexRequest")
                                                                             (:
                                                                              (Ident
                                                                               "index")
                                                                              [])))
                                                                           (:
                                                                            (Cast
                                                                             (RefType
                                                                              (ClassRefType
                                                                               (ClassType
                                                                                (:
                                                                                 ((,)
                                                                                  (Ident
                                                                                   "String")
                                                                                  [])
                                                                                 []))))
                                                                             (MethodInv
                                                                              (MethodCall
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "metadataMap")
                                                                                 (:
                                                                                  (Ident
                                                                                   "get")
                                                                                  [])))
                                                                               (:
                                                                                (ExpName
                                                                                 (Name
                                                                                  (:
                                                                                   (Ident
                                                                                    "IngestDocument")
                                                                                   (:
                                                                                    (Ident
                                                                                     "MetaData")
                                                                                    (:
                                                                                     (Ident
                                                                                      "INDEX")
                                                                                     [])))))
                                                                                []))))
                                                                            [])))))
                                                                       (:
                                                                        (BlockStmt
                                                                         (ExpStmt
                                                                          (MethodInv
                                                                           (MethodCall
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "indexRequest")
                                                                              (:
                                                                               (Ident
                                                                                "type")
                                                                               [])))
                                                                            (:
                                                                             (Cast
                                                                              (RefType
                                                                               (ClassRefType
                                                                                (ClassType
                                                                                 (:
                                                                                  ((,)
                                                                                   (Ident
                                                                                    "String")
                                                                                   [])
                                                                                  []))))
                                                                              (MethodInv
                                                                               (MethodCall
                                                                                (Name
                                                                                 (:
                                                                                  (Ident
                                                                                   "metadataMap")
                                                                                  (:
                                                                                   (Ident
                                                                                    "get")
                                                                                   [])))
                                                                                (:
                                                                                 (ExpName
                                                                                  (Name
                                                                                   (:
                                                                                    (Ident
                                                                                     "IngestDocument")
                                                                                    (:
                                                                                     (Ident
                                                                                      "MetaData")
                                                                                     (:
                                                                                      (Ident
                                                                                       "TYPE")
                                                                                      [])))))
                                                                                 []))))
                                                                             [])))))
                                                                        (:
                                                                         (BlockStmt
                                                                          (ExpStmt
                                                                           (MethodInv
                                                                            (MethodCall
                                                                             (Name
                                                                              (:
                                                                               (Ident
                                                                                "indexRequest")
                                                                               (:
                                                                                (Ident
                                                                                 "id")
                                                                                [])))
                                                                             (:
                                                                              (Cast
                                                                               (RefType
                                                                                (ClassRefType
                                                                                 (ClassType
                                                                                  (:
                                                                                   ((,)
                                                                                    (Ident
                                                                                     "String")
                                                                                    [])
                                                                                   []))))
                                                                               (MethodInv
                                                                                (MethodCall
                                                                                 (Name
                                                                                  (:
                                                                                   (Ident
                                                                                    "metadataMap")
                                                                                   (:
                                                                                    (Ident
                                                                                     "get")
                                                                                    [])))
                                                                                 (:
                                                                                  (ExpName
                                                                                   (Name
                                                                                    (:
                                                                                     (Ident
                                                                                      "IngestDocument")
                                                                                     (:
                                                                                      (Ident
                                                                                       "MetaData")
                                                                                      (:
                                                                                       (Ident
                                                                                        "ID")
                                                                                       [])))))
                                                                                  []))))
                                                                              [])))))
                                                                         (:
                                                                          (BlockStmt
                                                                           (ExpStmt
                                                                            (MethodInv
                                                                             (MethodCall
                                                                              (Name
                                                                               (:
                                                                                (Ident
                                                                                 "indexRequest")
                                                                                (:
                                                                                 (Ident
                                                                                  "routing")
                                                                                 [])))
                                                                              (:
                                                                               (Cast
                                                                                (RefType
                                                                                 (ClassRefType
                                                                                  (ClassType
                                                                                   (:
                                                                                    ((,)
                                                                                     (Ident
                                                                                      "String")
                                                                                     [])
                                                                                    []))))
                                                                                (MethodInv
                                                                                 (MethodCall
                                                                                  (Name
                                                                                   (:
                                                                                    (Ident
                                                                                     "metadataMap")
                                                                                    (:
                                                                                     (Ident
                                                                                      "get")
                                                                                     [])))
                                                                                  (:
                                                                                   (ExpName
                                                                                    (Name
                                                                                     (:
                                                                                      (Ident
                                                                                       "IngestDocument")
                                                                                      (:
                                                                                       (Ident
                                                                                        "MetaData")
                                                                                       (:
                                                                                        (Ident
                                                                                         "ROUTING")
                                                                                        [])))))
                                                                                   []))))
                                                                               [])))))
                                                                          (:
                                                                           (BlockStmt
                                                                            (ExpStmt
                                                                             (MethodInv
                                                                              (MethodCall
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "indexRequest")
                                                                                 (:
                                                                                  (Ident
                                                                                   "version")
                                                                                  [])))
                                                                               (:
                                                                                (MethodInv
                                                                                 (PrimaryMethodCall
                                                                                  (Cast
                                                                                   (RefType
                                                                                    (ClassRefType
                                                                                     (ClassType
                                                                                      (:
                                                                                       ((,)
                                                                                        (Ident
                                                                                         "Number")
                                                                                        [])
                                                                                       []))))
                                                                                   (MethodInv
                                                                                    (MethodCall
                                                                                     (Name
                                                                                      (:
                                                                                       (Ident
                                                                                        "metadataMap")
                                                                                       (:
                                                                                        (Ident
                                                                                         "get")
                                                                                        [])))
                                                                                     (:
                                                                                      (ExpName
                                                                                       (Name
                                                                                        (:
                                                                                         (Ident
                                                                                          "IngestDocument")
                                                                                         (:
                                                                                          (Ident
                                                                                           "MetaData")
                                                                                          (:
                                                                                           (Ident
                                                                                            "VERSION")
                                                                                           [])))))
                                                                                      []))))
                                                                                  []
                                                                                  (Ident
                                                                                   "longValue")
                                                                                  []))
                                                                                [])))))
                                                                           (:
                                                                            (BlockStmt
                                                                             (IfThen
                                                                              (BinOp
                                                                               (MethodInv
                                                                                (MethodCall
                                                                                 (Name
                                                                                  (:
                                                                                   (Ident
                                                                                    "metadataMap")
                                                                                   (:
                                                                                    (Ident
                                                                                     "get")
                                                                                    [])))
                                                                                 (:
                                                                                  (ExpName
                                                                                   (Name
                                                                                    (:
                                                                                     (Ident
                                                                                      "IngestDocument")
                                                                                     (:
                                                                                      (Ident
                                                                                       "MetaData")
                                                                                      (:
                                                                                       (Ident
                                                                                        "VERSION_TYPE")
                                                                                       [])))))
                                                                                  [])))
                                                                               NotEq
                                                                               (Lit
                                                                                Null))
                                                                              (StmtBlock
                                                                               (Block
                                                                                (:
                                                                                 (BlockStmt
                                                                                  (ExpStmt
                                                                                   (MethodInv
                                                                                    (MethodCall
                                                                                     (Name
                                                                                      (:
                                                                                       (Ident
                                                                                        "indexRequest")
                                                                                       (:
                                                                                        (Ident
                                                                                         "versionType")
                                                                                        [])))
                                                                                     (:
                                                                                      (MethodInv
                                                                                       (MethodCall
                                                                                        (Name
                                                                                         (:
                                                                                          (Ident
                                                                                           "VersionType")
                                                                                          (:
                                                                                           (Ident
                                                                                            "fromString")
                                                                                           [])))
                                                                                        (:
                                                                                         (Cast
                                                                                          (RefType
                                                                                           (ClassRefType
                                                                                            (ClassType
                                                                                             (:
                                                                                              ((,)
                                                                                               (Ident
                                                                                                "String")
                                                                                               [])
                                                                                              []))))
                                                                                          (MethodInv
                                                                                           (MethodCall
                                                                                            (Name
                                                                                             (:
                                                                                              (Ident
                                                                                               "metadataMap")
                                                                                              (:
                                                                                               (Ident
                                                                                                "get")
                                                                                               [])))
                                                                                            (:
                                                                                             (ExpName
                                                                                              (Name
                                                                                               (:
                                                                                                (Ident
                                                                                                 "IngestDocument")
                                                                                                (:
                                                                                                 (Ident
                                                                                                  "MetaData")
                                                                                                 (:
                                                                                                  (Ident
                                                                                                   "VERSION_TYPE")
                                                                                                  [])))))
                                                                                             []))))
                                                                                         [])))
                                                                                      [])))))
                                                                                 [])))))
                                                                            (:
                                                                             (BlockStmt
                                                                              (ExpStmt
                                                                               (MethodInv
                                                                                (MethodCall
                                                                                 (Name
                                                                                  (:
                                                                                   (Ident
                                                                                    "indexRequest")
                                                                                   (:
                                                                                    (Ident
                                                                                     "source")
                                                                                    [])))
                                                                                 (:
                                                                                  (MethodInv
                                                                                   (MethodCall
                                                                                    (Name
                                                                                     (:
                                                                                      (Ident
                                                                                       "ingestDocument")
                                                                                      (:
                                                                                       (Ident
                                                                                        "getSourceAndMetadata")
                                                                                       [])))
                                                                                    []))
                                                                                  (:
                                                                                   (MethodInv
                                                                                    (MethodCall
                                                                                     (Name
                                                                                      (:
                                                                                       (Ident
                                                                                        "indexRequest")
                                                                                       (:
                                                                                        (Ident
                                                                                         "getContentType")
                                                                                        [])))
                                                                                     []))
                                                                                   []))))))
                                                                             (:
                                                                              (BlockStmt
                                                                               (ExpStmt
                                                                                (MethodInv
                                                                                 (MethodCall
                                                                                  (Name
                                                                                   (:
                                                                                    (Ident
                                                                                     "handler")
                                                                                    (:
                                                                                     (Ident
                                                                                      "accept")
                                                                                     [])))
                                                                                  (:
                                                                                   (Lit
                                                                                    Null)
                                                                                   [])))))
                                                                              []))))))))))))))
                                                                []))))))
                                                          []))))))
                                                    [])))))))))))))))))
                                   (:
                                    (MemberDecl
                                     (MethodDecl
                                      (:
                                       (Annotation
                                        (MarkerAnnotation
                                         (Name (: (Ident "Override") []))))
                                       (: Public []))
                                      []
                                      Nothing
                                      (Ident "applyClusterState")
                                      (:
                                       (FormalParam
                                        (: Final [])
                                        (RefType
                                         (ClassRefType
                                          (ClassType
                                           (:
                                            ((,)
                                             (Ident "ClusterChangedEvent")
                                             [])
                                            []))))
                                        False
                                        (VarId (Ident "event")))
                                       [])
                                      []
                                      Nothing
                                      (MethodBody
                                       (Just
                                        (Block
                                         (:
                                          (LocalVars
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "ClusterState") [])
                                               []))))
                                           (:
                                            (VarDecl
                                             (VarId (Ident "state"))
                                             (Just
                                              (InitExp
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "event")
                                                   (: (Ident "state") [])))
                                                 [])))))
                                            []))
                                          (:
                                           (BlockStmt
                                            (IfThen
                                             (MethodInv
                                              (PrimaryMethodCall
                                               (MethodInv
                                                (MethodCall
                                                 (Name
                                                  (:
                                                   (Ident "state")
                                                   (: (Ident "blocks") [])))
                                                 []))
                                               []
                                               (Ident "hasGlobalBlock")
                                               (:
                                                (ExpName
                                                 (Name
                                                  (:
                                                   (Ident "GatewayService")
                                                   (:
                                                    (Ident
                                                     "STATE_NOT_RECOVERED_BLOCK")
                                                    []))))
                                                [])))
                                             (StmtBlock
                                              (Block
                                               (:
                                                (BlockStmt (Return Nothing))
                                                [])))))
                                           (:
                                            (BlockStmt
                                             (ExpStmt
                                              (MethodInv
                                               (MethodCall
                                                (Name
                                                 (:
                                                  (Ident
                                                   "ingestClusterStateListeners")
                                                  (: (Ident "forEach") [])))
                                                (:
                                                 (Lambda
                                                  (LambdaSingleParam
                                                   (Ident "consumer"))
                                                  (LambdaExpression
                                                   (MethodInv
                                                    (MethodCall
                                                     (Name
                                                      (:
                                                       (Ident "consumer")
                                                       (: (Ident "accept") [])))
                                                     (:
                                                      (ExpName
                                                       (Name
                                                        (: (Ident "state") [])))
                                                      [])))))
                                                 [])))))
                                            (:
                                             (LocalVars
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,)
                                                   (Ident "IngestMetadata")
                                                   [])
                                                  []))))
                                              (:
                                               (VarDecl
                                                (VarId
                                                 (Ident "newIngestMetadata"))
                                                (Just
                                                 (InitExp
                                                  (MethodInv
                                                   (PrimaryMethodCall
                                                    (MethodInv
                                                     (MethodCall
                                                      (Name
                                                       (:
                                                        (Ident "state")
                                                        (:
                                                         (Ident "getMetaData")
                                                         [])))
                                                      []))
                                                    []
                                                    (Ident "custom")
                                                    (:
                                                     (ExpName
                                                      (Name
                                                       (:
                                                        (Ident "IngestMetadata")
                                                        (: (Ident "TYPE") []))))
                                                     []))))))
                                               []))
                                             (:
                                              (BlockStmt
                                               (IfThen
                                                (BinOp
                                                 (ExpName
                                                  (Name
                                                   (:
                                                    (Ident "newIngestMetadata")
                                                    [])))
                                                 Equal
                                                 (Lit Null))
                                                (StmtBlock
                                                 (Block
                                                  (:
                                                   (BlockStmt (Return Nothing))
                                                   [])))))
                                              (:
                                               (BlockStmt
                                                (Try
                                                 (Block
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident
                                                          "innerUpdatePipelines")
                                                         []))
                                                       (:
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "newIngestMetadata")
                                                           [])))
                                                        [])))))
                                                   []))
                                                 (:
                                                  (Catch
                                                   (FormalParam
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "ElasticsearchParseException")
                                                         [])
                                                        []))))
                                                    False
                                                    (VarId (Ident "e")))
                                                   (Block
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "logger")
                                                           (:
                                                            (Ident "warn")
                                                            [])))
                                                         (:
                                                          (Lit
                                                           (String
                                                            "failed to update ingest pipelines"))
                                                          (:
                                                           (ExpName
                                                            (Name
                                                             (:
                                                              (Ident "e")
                                                              [])))
                                                           []))))))
                                                     [])))
                                                  [])
                                                 Nothing))
                                               [])))))))))))
                                    (:
                                     (MemberDecl
                                      (MethodDecl
                                       []
                                       []
                                       Nothing
                                       (Ident "innerUpdatePipelines")
                                       (:
                                        (FormalParam
                                         []
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (:
                                             ((,) (Ident "IngestMetadata") [])
                                             []))))
                                         False
                                         (VarId (Ident "newIngestMetadata")))
                                        [])
                                       []
                                       Nothing
                                       (MethodBody
                                        (Just
                                         (Block
                                          (:
                                           (LocalVars
                                            []
                                            (RefType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident "Map")
                                                 (:
                                                  (ActualType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,) (Ident "String") [])
                                                      []))))
                                                  (:
                                                   (ActualType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident "PipelineHolder")
                                                        [])
                                                       []))))
                                                   [])))
                                                []))))
                                            (:
                                             (VarDecl
                                              (VarId
                                               (Ident "existingPipelines"))
                                              (Just
                                               (InitExp
                                                (FieldAccess
                                                 (PrimaryFieldAccess
                                                  This
                                                  (Ident "pipelines"))))))
                                             []))
                                           (:
                                            (LocalVars
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,)
                                                  (Ident "Map")
                                                  (:
                                                   (ActualType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,) (Ident "String") [])
                                                       []))))
                                                   (:
                                                    (ActualType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "PipelineHolder")
                                                         [])
                                                        []))))
                                                    [])))
                                                 []))))
                                             (:
                                              (VarDecl
                                               (VarId (Ident "newPipelines"))
                                               (Just (InitExp (Lit Null))))
                                              []))
                                            (:
                                             (LocalVars
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,)
                                                   (Ident "List")
                                                   (:
                                                    (ActualType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "ElasticsearchParseException")
                                                         [])
                                                        []))))
                                                    []))
                                                  []))))
                                              (:
                                               (VarDecl
                                                (VarId (Ident "exceptions"))
                                                (Just (InitExp (Lit Null))))
                                               []))
                                             (:
                                              (BlockStmt
                                               (EnhancedFor
                                                []
                                                (RefType
                                                 (ClassRefType
                                                  (ClassType
                                                   (:
                                                    ((,)
                                                     (Ident
                                                      "PipelineConfiguration")
                                                     [])
                                                    []))))
                                                (Ident "newConfiguration")
                                                (MethodInv
                                                 (PrimaryMethodCall
                                                  (MethodInv
                                                   (MethodCall
                                                    (Name
                                                     (:
                                                      (Ident
                                                       "newIngestMetadata")
                                                      (:
                                                       (Ident "getPipelines")
                                                       [])))
                                                    []))
                                                  []
                                                  (Ident "values")
                                                  []))
                                                (StmtBlock
                                                 (Block
                                                  (:
                                                   (LocalVars
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "PipelineHolder")
                                                         [])
                                                        []))))
                                                    (:
                                                     (VarDecl
                                                      (VarId (Ident "previous"))
                                                      (Just
                                                       (InitExp
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident
                                                             "existingPipelines")
                                                            (:
                                                             (Ident "get")
                                                             [])))
                                                          (:
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident
                                                                "newConfiguration")
                                                               (:
                                                                (Ident "getId")
                                                                [])))
                                                             []))
                                                           []))))))
                                                     []))
                                                   (:
                                                    (BlockStmt
                                                     (IfThen
                                                      (BinOp
                                                       (BinOp
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "previous")
                                                           [])))
                                                        NotEq
                                                        (Lit Null))
                                                       CAnd
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "previous")
                                                           (:
                                                            (Ident
                                                             "configuration")
                                                            (:
                                                             (Ident "equals")
                                                             []))))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident
                                                              "newConfiguration")
                                                             [])))
                                                          []))))
                                                      (StmtBlock
                                                       (Block
                                                        (:
                                                         (BlockStmt
                                                          (Continue Nothing))
                                                         [])))))
                                                    (:
                                                     (BlockStmt
                                                      (IfThen
                                                       (BinOp
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident
                                                            "newPipelines")
                                                           [])))
                                                        Equal
                                                        (Lit Null))
                                                       (StmtBlock
                                                        (Block
                                                         (:
                                                          (BlockStmt
                                                           (ExpStmt
                                                            (Assign
                                                             (NameLhs
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "newPipelines")
                                                                [])))
                                                             EqualA
                                                             (InstanceCreation
                                                              []
                                                              (TypeDeclSpecifierUnqualifiedWithDiamond
                                                               (Ident "HashMap")
                                                               Diamond)
                                                              (:
                                                               (ExpName
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "existingPipelines")
                                                                  [])))
                                                               [])
                                                              Nothing))))
                                                          [])))))
                                                     (:
                                                      (BlockStmt
                                                       (Try
                                                        (Block
                                                         (:
                                                          (LocalVars
                                                           []
                                                           (RefType
                                                            (ClassRefType
                                                             (ClassType
                                                              (:
                                                               ((,)
                                                                (Ident
                                                                 "Pipeline")
                                                                [])
                                                               []))))
                                                           (:
                                                            (VarDecl
                                                             (VarId
                                                              (Ident
                                                               "newPipeline"))
                                                             (Just
                                                              (InitExp
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "Pipeline")
                                                                   (:
                                                                    (Ident
                                                                     "create")
                                                                    [])))
                                                                 (:
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "newConfiguration")
                                                                      (:
                                                                       (Ident
                                                                        "getId")
                                                                       [])))
                                                                    []))
                                                                  (:
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "newConfiguration")
                                                                       (:
                                                                        (Ident
                                                                         "getConfigAsMap")
                                                                        [])))
                                                                     []))
                                                                   (:
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "processorFactories")
                                                                       [])))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "scriptService")
                                                                        [])))
                                                                     [])))))))))
                                                            []))
                                                          (:
                                                           (BlockStmt
                                                            (ExpStmt
                                                             (MethodInv
                                                              (MethodCall
                                                               (Name
                                                                (:
                                                                 (Ident
                                                                  "newPipelines")
                                                                 (:
                                                                  (Ident "put")
                                                                  [])))
                                                               (:
                                                                (MethodInv
                                                                 (MethodCall
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "newConfiguration")
                                                                    (:
                                                                     (Ident
                                                                      "getId")
                                                                     [])))
                                                                  []))
                                                                (:
                                                                 (InstanceCreation
                                                                  []
                                                                  (TypeDeclSpecifier
                                                                   (ClassType
                                                                    (:
                                                                     ((,)
                                                                      (Ident
                                                                       "PipelineHolder")
                                                                      [])
                                                                     [])))
                                                                  (:
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "newConfiguration")
                                                                      [])))
                                                                   (:
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "newPipeline")
                                                                       [])))
                                                                    []))
                                                                  Nothing)
                                                                 []))))))
                                                           (:
                                                            (BlockStmt
                                                             (IfThen
                                                              (BinOp
                                                               (ExpName
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "previous")
                                                                  [])))
                                                               Equal
                                                               (Lit Null))
                                                              (StmtBlock
                                                               (Block
                                                                (:
                                                                 (BlockStmt
                                                                  (Continue
                                                                   Nothing))
                                                                 [])))))
                                                            (:
                                                             (LocalVars
                                                              []
                                                              (RefType
                                                               (ClassRefType
                                                                (ClassType
                                                                 (:
                                                                  ((,)
                                                                   (Ident
                                                                    "Pipeline")
                                                                   [])
                                                                  []))))
                                                              (:
                                                               (VarDecl
                                                                (VarId
                                                                 (Ident
                                                                  "oldPipeline"))
                                                                (Just
                                                                 (InitExp
                                                                  (ExpName
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "previous")
                                                                     (:
                                                                      (Ident
                                                                       "pipeline")
                                                                      [])))))))
                                                               []))
                                                             (:
                                                              (BlockStmt
                                                               (ExpStmt
                                                                (MethodInv
                                                                 (PrimaryMethodCall
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "newPipeline")
                                                                      (:
                                                                       (Ident
                                                                        "getMetrics")
                                                                       [])))
                                                                    []))
                                                                  []
                                                                  (Ident "add")
                                                                  (:
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "oldPipeline")
                                                                       (:
                                                                        (Ident
                                                                         "getMetrics")
                                                                        [])))
                                                                     []))
                                                                   [])))))
                                                              (:
                                                               (LocalVars
                                                                []
                                                                (RefType
                                                                 (ClassRefType
                                                                  (ClassType
                                                                   (:
                                                                    ((,)
                                                                     (Ident
                                                                      "List")
                                                                     (:
                                                                      (ActualType
                                                                       (ClassRefType
                                                                        (ClassType
                                                                         (:
                                                                          ((,)
                                                                           (Ident
                                                                            "Tuple")
                                                                           (:
                                                                            (ActualType
                                                                             (ClassRefType
                                                                              (ClassType
                                                                               (:
                                                                                ((,)
                                                                                 (Ident
                                                                                  "Processor")
                                                                                 [])
                                                                                []))))
                                                                            (:
                                                                             (ActualType
                                                                              (ClassRefType
                                                                               (ClassType
                                                                                (:
                                                                                 ((,)
                                                                                  (Ident
                                                                                   "IngestMetric")
                                                                                  [])
                                                                                 []))))
                                                                             [])))
                                                                          []))))
                                                                      []))
                                                                    []))))
                                                                (:
                                                                 (VarDecl
                                                                  (VarId
                                                                   (Ident
                                                                    "oldPerProcessMetrics"))
                                                                  (Just
                                                                   (InitExp
                                                                    (InstanceCreation
                                                                     []
                                                                     (TypeDeclSpecifierUnqualifiedWithDiamond
                                                                      (Ident
                                                                       "ArrayList")
                                                                      Diamond)
                                                                     []
                                                                     Nothing))))
                                                                 []))
                                                               (:
                                                                (LocalVars
                                                                 []
                                                                 (RefType
                                                                  (ClassRefType
                                                                   (ClassType
                                                                    (:
                                                                     ((,)
                                                                      (Ident
                                                                       "List")
                                                                      (:
                                                                       (ActualType
                                                                        (ClassRefType
                                                                         (ClassType
                                                                          (:
                                                                           ((,)
                                                                            (Ident
                                                                             "Tuple")
                                                                            (:
                                                                             (ActualType
                                                                              (ClassRefType
                                                                               (ClassType
                                                                                (:
                                                                                 ((,)
                                                                                  (Ident
                                                                                   "Processor")
                                                                                  [])
                                                                                 []))))
                                                                             (:
                                                                              (ActualType
                                                                               (ClassRefType
                                                                                (ClassType
                                                                                 (:
                                                                                  ((,)
                                                                                   (Ident
                                                                                    "IngestMetric")
                                                                                   [])
                                                                                  []))))
                                                                              [])))
                                                                           []))))
                                                                       []))
                                                                     []))))
                                                                 (:
                                                                  (VarDecl
                                                                   (VarId
                                                                    (Ident
                                                                     "newPerProcessMetrics"))
                                                                   (Just
                                                                    (InitExp
                                                                     (InstanceCreation
                                                                      []
                                                                      (TypeDeclSpecifierUnqualifiedWithDiamond
                                                                       (Ident
                                                                        "ArrayList")
                                                                       Diamond)
                                                                      []
                                                                      Nothing))))
                                                                  []))
                                                                (:
                                                                 (BlockStmt
                                                                  (ExpStmt
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "getProcessorMetrics")
                                                                       []))
                                                                     (:
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "oldPipeline")
                                                                          (:
                                                                           (Ident
                                                                            "getCompoundProcessor")
                                                                           [])))
                                                                        []))
                                                                      (:
                                                                       (ExpName
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "oldPerProcessMetrics")
                                                                          [])))
                                                                       []))))))
                                                                 (:
                                                                  (BlockStmt
                                                                   (ExpStmt
                                                                    (MethodInv
                                                                     (MethodCall
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "getProcessorMetrics")
                                                                        []))
                                                                      (:
                                                                       (MethodInv
                                                                        (MethodCall
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "newPipeline")
                                                                           (:
                                                                            (Ident
                                                                             "getCompoundProcessor")
                                                                            [])))
                                                                         []))
                                                                       (:
                                                                        (ExpName
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "newPerProcessMetrics")
                                                                           [])))
                                                                        []))))))
                                                                  (:
                                                                   (BlockStmt
                                                                    (IfThen
                                                                     (BinOp
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "newPerProcessMetrics")
                                                                          (:
                                                                           (Ident
                                                                            "size")
                                                                           [])))
                                                                        []))
                                                                      Equal
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "oldPerProcessMetrics")
                                                                          (:
                                                                           (Ident
                                                                            "size")
                                                                           [])))
                                                                        [])))
                                                                     (StmtBlock
                                                                      (Block
                                                                       (:
                                                                        (LocalVars
                                                                         []
                                                                         (RefType
                                                                          (ClassRefType
                                                                           (ClassType
                                                                            (:
                                                                             ((,)
                                                                              (Ident
                                                                               "Iterator")
                                                                              (:
                                                                               (ActualType
                                                                                (ClassRefType
                                                                                 (ClassType
                                                                                  (:
                                                                                   ((,)
                                                                                    (Ident
                                                                                     "Tuple")
                                                                                    (:
                                                                                     (ActualType
                                                                                      (ClassRefType
                                                                                       (ClassType
                                                                                        (:
                                                                                         ((,)
                                                                                          (Ident
                                                                                           "Processor")
                                                                                          [])
                                                                                         []))))
                                                                                     (:
                                                                                      (ActualType
                                                                                       (ClassRefType
                                                                                        (ClassType
                                                                                         (:
                                                                                          ((,)
                                                                                           (Ident
                                                                                            "IngestMetric")
                                                                                           [])
                                                                                          []))))
                                                                                      [])))
                                                                                   []))))
                                                                               []))
                                                                             []))))
                                                                         (:
                                                                          (VarDecl
                                                                           (VarId
                                                                            (Ident
                                                                             "oldMetricsIterator"))
                                                                           (Just
                                                                            (InitExp
                                                                             (MethodInv
                                                                              (MethodCall
                                                                               (Name
                                                                                (:
                                                                                 (Ident
                                                                                  "oldPerProcessMetrics")
                                                                                 (:
                                                                                  (Ident
                                                                                   "iterator")
                                                                                  [])))
                                                                               [])))))
                                                                          []))
                                                                        (:
                                                                         (BlockStmt
                                                                          (EnhancedFor
                                                                           []
                                                                           (RefType
                                                                            (ClassRefType
                                                                             (ClassType
                                                                              (:
                                                                               ((,)
                                                                                (Ident
                                                                                 "Tuple")
                                                                                (:
                                                                                 (ActualType
                                                                                  (ClassRefType
                                                                                   (ClassType
                                                                                    (:
                                                                                     ((,)
                                                                                      (Ident
                                                                                       "Processor")
                                                                                      [])
                                                                                     []))))
                                                                                 (:
                                                                                  (ActualType
                                                                                   (ClassRefType
                                                                                    (ClassType
                                                                                     (:
                                                                                      ((,)
                                                                                       (Ident
                                                                                        "IngestMetric")
                                                                                       [])
                                                                                      []))))
                                                                                  [])))
                                                                               []))))
                                                                           (Ident
                                                                            "compositeMetric")
                                                                           (ExpName
                                                                            (Name
                                                                             (:
                                                                              (Ident
                                                                               "newPerProcessMetrics")
                                                                              [])))
                                                                           (StmtBlock
                                                                            (Block
                                                                             (:
                                                                              (LocalVars
                                                                               []
                                                                               (RefType
                                                                                (ClassRefType
                                                                                 (ClassType
                                                                                  (:
                                                                                   ((,)
                                                                                    (Ident
                                                                                     "String")
                                                                                    [])
                                                                                   []))))
                                                                               (:
                                                                                (VarDecl
                                                                                 (VarId
                                                                                  (Ident
                                                                                   "type"))
                                                                                 (Just
                                                                                  (InitExp
                                                                                   (MethodInv
                                                                                    (PrimaryMethodCall
                                                                                     (MethodInv
                                                                                      (MethodCall
                                                                                       (Name
                                                                                        (:
                                                                                         (Ident
                                                                                          "compositeMetric")
                                                                                         (:
                                                                                          (Ident
                                                                                           "v1")
                                                                                          [])))
                                                                                       []))
                                                                                     []
                                                                                     (Ident
                                                                                      "getType")
                                                                                     [])))))
                                                                                []))
                                                                              (:
                                                                               (LocalVars
                                                                                []
                                                                                (RefType
                                                                                 (ClassRefType
                                                                                  (ClassType
                                                                                   (:
                                                                                    ((,)
                                                                                     (Ident
                                                                                      "IngestMetric")
                                                                                     [])
                                                                                    []))))
                                                                                (:
                                                                                 (VarDecl
                                                                                  (VarId
                                                                                   (Ident
                                                                                    "metric"))
                                                                                  (Just
                                                                                   (InitExp
                                                                                    (MethodInv
                                                                                     (MethodCall
                                                                                      (Name
                                                                                       (:
                                                                                        (Ident
                                                                                         "compositeMetric")
                                                                                        (:
                                                                                         (Ident
                                                                                          "v2")
                                                                                         [])))
                                                                                      [])))))
                                                                                 []))
                                                                               (:
                                                                                (BlockStmt
                                                                                 (IfThen
                                                                                  (MethodInv
                                                                                   (MethodCall
                                                                                    (Name
                                                                                     (:
                                                                                      (Ident
                                                                                       "oldMetricsIterator")
                                                                                      (:
                                                                                       (Ident
                                                                                        "hasNext")
                                                                                       [])))
                                                                                    []))
                                                                                  (StmtBlock
                                                                                   (Block
                                                                                    (:
                                                                                     (LocalVars
                                                                                      []
                                                                                      (RefType
                                                                                       (ClassRefType
                                                                                        (ClassType
                                                                                         (:
                                                                                          ((,)
                                                                                           (Ident
                                                                                            "Tuple")
                                                                                           (:
                                                                                            (ActualType
                                                                                             (ClassRefType
                                                                                              (ClassType
                                                                                               (:
                                                                                                ((,)
                                                                                                 (Ident
                                                                                                  "Processor")
                                                                                                 [])
                                                                                                []))))
                                                                                            (:
                                                                                             (ActualType
                                                                                              (ClassRefType
                                                                                               (ClassType
                                                                                                (:
                                                                                                 ((,)
                                                                                                  (Ident
                                                                                                   "IngestMetric")
                                                                                                  [])
                                                                                                 []))))
                                                                                             [])))
                                                                                          []))))
                                                                                      (:
                                                                                       (VarDecl
                                                                                        (VarId
                                                                                         (Ident
                                                                                          "oldCompositeMetric"))
                                                                                        (Just
                                                                                         (InitExp
                                                                                          (MethodInv
                                                                                           (MethodCall
                                                                                            (Name
                                                                                             (:
                                                                                              (Ident
                                                                                               "oldMetricsIterator")
                                                                                              (:
                                                                                               (Ident
                                                                                                "next")
                                                                                               [])))
                                                                                            [])))))
                                                                                       []))
                                                                                     (:
                                                                                      (LocalVars
                                                                                       []
                                                                                       (RefType
                                                                                        (ClassRefType
                                                                                         (ClassType
                                                                                          (:
                                                                                           ((,)
                                                                                            (Ident
                                                                                             "String")
                                                                                            [])
                                                                                           []))))
                                                                                       (:
                                                                                        (VarDecl
                                                                                         (VarId
                                                                                          (Ident
                                                                                           "oldType"))
                                                                                         (Just
                                                                                          (InitExp
                                                                                           (MethodInv
                                                                                            (PrimaryMethodCall
                                                                                             (MethodInv
                                                                                              (MethodCall
                                                                                               (Name
                                                                                                (:
                                                                                                 (Ident
                                                                                                  "oldCompositeMetric")
                                                                                                 (:
                                                                                                  (Ident
                                                                                                   "v1")
                                                                                                  [])))
                                                                                               []))
                                                                                             []
                                                                                             (Ident
                                                                                              "getType")
                                                                                             [])))))
                                                                                        []))
                                                                                      (:
                                                                                       (LocalVars
                                                                                        []
                                                                                        (RefType
                                                                                         (ClassRefType
                                                                                          (ClassType
                                                                                           (:
                                                                                            ((,)
                                                                                             (Ident
                                                                                              "IngestMetric")
                                                                                             [])
                                                                                            []))))
                                                                                        (:
                                                                                         (VarDecl
                                                                                          (VarId
                                                                                           (Ident
                                                                                            "oldMetric"))
                                                                                          (Just
                                                                                           (InitExp
                                                                                            (MethodInv
                                                                                             (MethodCall
                                                                                              (Name
                                                                                               (:
                                                                                                (Ident
                                                                                                 "oldCompositeMetric")
                                                                                                (:
                                                                                                 (Ident
                                                                                                  "v2")
                                                                                                 [])))
                                                                                              [])))))
                                                                                         []))
                                                                                       (:
                                                                                        (BlockStmt
                                                                                         (IfThen
                                                                                          (MethodInv
                                                                                           (MethodCall
                                                                                            (Name
                                                                                             (:
                                                                                              (Ident
                                                                                               "type")
                                                                                              (:
                                                                                               (Ident
                                                                                                "equals")
                                                                                               [])))
                                                                                            (:
                                                                                             (ExpName
                                                                                              (Name
                                                                                               (:
                                                                                                (Ident
                                                                                                 "oldType")
                                                                                                [])))
                                                                                             [])))
                                                                                          (StmtBlock
                                                                                           (Block
                                                                                            (:
                                                                                             (BlockStmt
                                                                                              (ExpStmt
                                                                                               (MethodInv
                                                                                                (MethodCall
                                                                                                 (Name
                                                                                                  (:
                                                                                                   (Ident
                                                                                                    "metric")
                                                                                                   (:
                                                                                                    (Ident
                                                                                                     "add")
                                                                                                    [])))
                                                                                                 (:
                                                                                                  (ExpName
                                                                                                   (Name
                                                                                                    (:
                                                                                                     (Ident
                                                                                                      "oldMetric")
                                                                                                     [])))
                                                                                                  [])))))
                                                                                             [])))))
                                                                                        []))))))))
                                                                                [])))))))
                                                                         []))))))
                                                                   [])))))))))))
                                                        (:
                                                         (Catch
                                                          (FormalParam
                                                           []
                                                           (RefType
                                                            (ClassRefType
                                                             (ClassType
                                                              (:
                                                               ((,)
                                                                (Ident
                                                                 "ElasticsearchParseException")
                                                                [])
                                                               []))))
                                                           False
                                                           (VarId (Ident "e")))
                                                          (Block
                                                           (:
                                                            (LocalVars
                                                             []
                                                             (RefType
                                                              (ClassRefType
                                                               (ClassType
                                                                (:
                                                                 ((,)
                                                                  (Ident
                                                                   "Pipeline")
                                                                  [])
                                                                 []))))
                                                             (:
                                                              (VarDecl
                                                               (VarId
                                                                (Ident
                                                                 "pipeline"))
                                                               (Just
                                                                (InitExp
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "substitutePipeline")
                                                                     []))
                                                                   (:
                                                                    (MethodInv
                                                                     (MethodCall
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "newConfiguration")
                                                                        (:
                                                                         (Ident
                                                                          "getId")
                                                                         [])))
                                                                      []))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "e")
                                                                        [])))
                                                                     [])))))))
                                                              []))
                                                            (:
                                                             (BlockStmt
                                                              (ExpStmt
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "newPipelines")
                                                                   (:
                                                                    (Ident
                                                                     "put")
                                                                    [])))
                                                                 (:
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "newConfiguration")
                                                                      (:
                                                                       (Ident
                                                                        "getId")
                                                                       [])))
                                                                    []))
                                                                  (:
                                                                   (InstanceCreation
                                                                    []
                                                                    (TypeDeclSpecifier
                                                                     (ClassType
                                                                      (:
                                                                       ((,)
                                                                        (Ident
                                                                         "PipelineHolder")
                                                                        [])
                                                                       [])))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "newConfiguration")
                                                                        [])))
                                                                     (:
                                                                      (ExpName
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "pipeline")
                                                                         [])))
                                                                      []))
                                                                    Nothing)
                                                                   []))))))
                                                             (:
                                                              (BlockStmt
                                                               (IfThen
                                                                (BinOp
                                                                 (ExpName
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "exceptions")
                                                                    [])))
                                                                 Equal
                                                                 (Lit Null))
                                                                (StmtBlock
                                                                 (Block
                                                                  (:
                                                                   (BlockStmt
                                                                    (ExpStmt
                                                                     (Assign
                                                                      (NameLhs
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "exceptions")
                                                                         [])))
                                                                      EqualA
                                                                      (InstanceCreation
                                                                       []
                                                                       (TypeDeclSpecifierUnqualifiedWithDiamond
                                                                        (Ident
                                                                         "ArrayList")
                                                                        Diamond)
                                                                       []
                                                                       Nothing))))
                                                                   [])))))
                                                              (:
                                                               (BlockStmt
                                                                (ExpStmt
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "exceptions")
                                                                     (:
                                                                      (Ident
                                                                       "add")
                                                                      [])))
                                                                   (:
                                                                    (ExpName
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "e")
                                                                       [])))
                                                                    [])))))
                                                               []))))))
                                                         (:
                                                          (Catch
                                                           (FormalParam
                                                            []
                                                            (RefType
                                                             (ClassRefType
                                                              (ClassType
                                                               (:
                                                                ((,)
                                                                 (Ident
                                                                  "Exception")
                                                                 [])
                                                                []))))
                                                            False
                                                            (VarId (Ident "e")))
                                                           (Block
                                                            (:
                                                             (LocalVars
                                                              []
                                                              (RefType
                                                               (ClassRefType
                                                                (ClassType
                                                                 (:
                                                                  ((,)
                                                                   (Ident
                                                                    "ElasticsearchParseException")
                                                                   [])
                                                                  []))))
                                                              (:
                                                               (VarDecl
                                                                (VarId
                                                                 (Ident
                                                                  "parseException"))
                                                                (Just
                                                                 (InitExp
                                                                  (InstanceCreation
                                                                   []
                                                                   (TypeDeclSpecifier
                                                                    (ClassType
                                                                     (:
                                                                      ((,)
                                                                       (Ident
                                                                        "ElasticsearchParseException")
                                                                       [])
                                                                      [])))
                                                                   (:
                                                                    (BinOp
                                                                     (BinOp
                                                                      (Lit
                                                                       (String
                                                                        "Error updating pipeline with id ["))
                                                                      Add
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "newConfiguration")
                                                                          (:
                                                                           (Ident
                                                                            "getId")
                                                                           [])))
                                                                        [])))
                                                                     Add
                                                                     (Lit
                                                                      (String
                                                                       "]")))
                                                                    (:
                                                                     (ExpName
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "e")
                                                                        [])))
                                                                     []))
                                                                   Nothing))))
                                                               []))
                                                             (:
                                                              (LocalVars
                                                               []
                                                               (RefType
                                                                (ClassRefType
                                                                 (ClassType
                                                                  (:
                                                                   ((,)
                                                                    (Ident
                                                                     "Pipeline")
                                                                    [])
                                                                   []))))
                                                               (:
                                                                (VarDecl
                                                                 (VarId
                                                                  (Ident
                                                                   "pipeline"))
                                                                 (Just
                                                                  (InitExp
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "substitutePipeline")
                                                                       []))
                                                                     (:
                                                                      (MethodInv
                                                                       (MethodCall
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "newConfiguration")
                                                                          (:
                                                                           (Ident
                                                                            "getId")
                                                                           [])))
                                                                        []))
                                                                      (:
                                                                       (ExpName
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "parseException")
                                                                          [])))
                                                                       [])))))))
                                                                []))
                                                              (:
                                                               (BlockStmt
                                                                (ExpStmt
                                                                 (MethodInv
                                                                  (MethodCall
                                                                   (Name
                                                                    (:
                                                                     (Ident
                                                                      "newPipelines")
                                                                     (:
                                                                      (Ident
                                                                       "put")
                                                                      [])))
                                                                   (:
                                                                    (MethodInv
                                                                     (MethodCall
                                                                      (Name
                                                                       (:
                                                                        (Ident
                                                                         "newConfiguration")
                                                                        (:
                                                                         (Ident
                                                                          "getId")
                                                                         [])))
                                                                      []))
                                                                    (:
                                                                     (InstanceCreation
                                                                      []
                                                                      (TypeDeclSpecifier
                                                                       (ClassType
                                                                        (:
                                                                         ((,)
                                                                          (Ident
                                                                           "PipelineHolder")
                                                                          [])
                                                                         [])))
                                                                      (:
                                                                       (ExpName
                                                                        (Name
                                                                         (:
                                                                          (Ident
                                                                           "newConfiguration")
                                                                          [])))
                                                                       (:
                                                                        (ExpName
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "pipeline")
                                                                           [])))
                                                                        []))
                                                                      Nothing)
                                                                     []))))))
                                                               (:
                                                                (BlockStmt
                                                                 (IfThen
                                                                  (BinOp
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "exceptions")
                                                                      [])))
                                                                   Equal
                                                                   (Lit Null))
                                                                  (StmtBlock
                                                                   (Block
                                                                    (:
                                                                     (BlockStmt
                                                                      (ExpStmt
                                                                       (Assign
                                                                        (NameLhs
                                                                         (Name
                                                                          (:
                                                                           (Ident
                                                                            "exceptions")
                                                                           [])))
                                                                        EqualA
                                                                        (InstanceCreation
                                                                         []
                                                                         (TypeDeclSpecifierUnqualifiedWithDiamond
                                                                          (Ident
                                                                           "ArrayList")
                                                                          Diamond)
                                                                         []
                                                                         Nothing))))
                                                                     [])))))
                                                                (:
                                                                 (BlockStmt
                                                                  (ExpStmt
                                                                   (MethodInv
                                                                    (MethodCall
                                                                     (Name
                                                                      (:
                                                                       (Ident
                                                                        "exceptions")
                                                                       (:
                                                                        (Ident
                                                                         "add")
                                                                        [])))
                                                                     (:
                                                                      (ExpName
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "parseException")
                                                                         [])))
                                                                      [])))))
                                                                 [])))))))
                                                          []))
                                                        Nothing))
                                                      []))))))))
                                              (:
                                               (BlockStmt
                                                (EnhancedFor
                                                 []
                                                 (RefType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,) (Ident "Map") [])
                                                     (:
                                                      ((,)
                                                       (Ident "Entry")
                                                       (:
                                                        (ActualType
                                                         (ClassRefType
                                                          (ClassType
                                                           (:
                                                            ((,)
                                                             (Ident "String")
                                                             [])
                                                            []))))
                                                        (:
                                                         (ActualType
                                                          (ClassRefType
                                                           (ClassType
                                                            (:
                                                             ((,)
                                                              (Ident
                                                               "PipelineHolder")
                                                              [])
                                                             []))))
                                                         [])))
                                                      [])))))
                                                 (Ident "entry")
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "existingPipelines")
                                                     (: (Ident "entrySet") [])))
                                                   []))
                                                 (StmtBlock
                                                  (Block
                                                   (:
                                                    (BlockStmt
                                                     (IfThen
                                                      (BinOp
                                                       (MethodInv
                                                        (PrimaryMethodCall
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident
                                                              "newIngestMetadata")
                                                             (:
                                                              (Ident
                                                               "getPipelines")
                                                              [])))
                                                           []))
                                                         []
                                                         (Ident "get")
                                                         (:
                                                          (MethodInv
                                                           (MethodCall
                                                            (Name
                                                             (:
                                                              (Ident "entry")
                                                              (:
                                                               (Ident "getKey")
                                                               [])))
                                                            []))
                                                          [])))
                                                       Equal
                                                       (Lit Null))
                                                      (StmtBlock
                                                       (Block
                                                        (:
                                                         (BlockStmt
                                                          (IfThen
                                                           (BinOp
                                                            (ExpName
                                                             (Name
                                                              (:
                                                               (Ident
                                                                "newPipelines")
                                                               [])))
                                                            Equal
                                                            (Lit Null))
                                                           (StmtBlock
                                                            (Block
                                                             (:
                                                              (BlockStmt
                                                               (ExpStmt
                                                                (Assign
                                                                 (NameLhs
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "newPipelines")
                                                                    [])))
                                                                 EqualA
                                                                 (InstanceCreation
                                                                  []
                                                                  (TypeDeclSpecifierUnqualifiedWithDiamond
                                                                   (Ident
                                                                    "HashMap")
                                                                   Diamond)
                                                                  (:
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "existingPipelines")
                                                                      [])))
                                                                   [])
                                                                  Nothing))))
                                                              [])))))
                                                         (:
                                                          (BlockStmt
                                                           (ExpStmt
                                                            (MethodInv
                                                             (MethodCall
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "newPipelines")
                                                                (:
                                                                 (Ident
                                                                  "remove")
                                                                 [])))
                                                              (:
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "entry")
                                                                   (:
                                                                    (Ident
                                                                     "getKey")
                                                                    [])))
                                                                 []))
                                                               [])))))
                                                          []))))))
                                                    [])))))
                                               (:
                                                (BlockStmt
                                                 (IfThen
                                                  (BinOp
                                                   (ExpName
                                                    (Name
                                                     (:
                                                      (Ident "newPipelines")
                                                      [])))
                                                   NotEq
                                                   (Lit Null))
                                                  (StmtBlock
                                                   (Block
                                                    (:
                                                     (BlockStmt
                                                      (ExpStmt
                                                       (Assign
                                                        (FieldLhs
                                                         (PrimaryFieldAccess
                                                          This
                                                          (Ident "pipelines")))
                                                        EqualA
                                                        (MethodInv
                                                         (MethodCall
                                                          (Name
                                                           (:
                                                            (Ident "Map")
                                                            (:
                                                             (Ident "copyOf")
                                                             [])))
                                                          (:
                                                           (ExpName
                                                            (Name
                                                             (:
                                                              (Ident
                                                               "newPipelines")
                                                              [])))
                                                           []))))))
                                                     (:
                                                      (BlockStmt
                                                       (IfThen
                                                        (BinOp
                                                         (ExpName
                                                          (Name
                                                           (:
                                                            (Ident "exceptions")
                                                            [])))
                                                         NotEq
                                                         (Lit Null))
                                                        (StmtBlock
                                                         (Block
                                                          (:
                                                           (BlockStmt
                                                            (ExpStmt
                                                             (MethodInv
                                                              (MethodCall
                                                               (Name
                                                                (:
                                                                 (Ident
                                                                  "ExceptionsHelper")
                                                                 (:
                                                                  (Ident
                                                                   "rethrowAndSuppress")
                                                                  [])))
                                                               (:
                                                                (ExpName
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "exceptions")
                                                                   [])))
                                                                [])))))
                                                           [])))))
                                                      []))))))
                                                [])))))))))))
                                     (:
                                      (MemberDecl
                                       (MethodDecl
                                        (: Public [])
                                        (:
                                         (TypeParam
                                          (Ident "P")
                                          (:
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "Processor") [])
                                              [])))
                                           []))
                                         [])
                                        (Just
                                         (RefType
                                          (ClassRefType
                                           (ClassType
                                            (:
                                             ((,)
                                              (Ident "List")
                                              (:
                                               (ActualType
                                                (ClassRefType
                                                 (ClassType
                                                  (: ((,) (Ident "P") []) []))))
                                               []))
                                             [])))))
                                        (Ident "getProcessorsInPipeline")
                                        (:
                                         (FormalParam
                                          []
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (: ((,) (Ident "String") []) []))))
                                          False
                                          (VarId (Ident "pipelineId")))
                                         (:
                                          (FormalParam
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,)
                                                (Ident "Class")
                                                (:
                                                 (ActualType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,) (Ident "P") [])
                                                     []))))
                                                 []))
                                               []))))
                                           False
                                           (VarId (Ident "clazz")))
                                          []))
                                        []
                                        Nothing
                                        (MethodBody
                                         (Just
                                          (Block
                                           (:
                                            (LocalVars
                                             []
                                             (RefType
                                              (ClassRefType
                                               (ClassType
                                                (:
                                                 ((,) (Ident "Pipeline") [])
                                                 []))))
                                             (:
                                              (VarDecl
                                               (VarId (Ident "pipeline"))
                                               (Just
                                                (InitExp
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "getPipeline")
                                                     []))
                                                   (:
                                                    (ExpName
                                                     (Name
                                                      (:
                                                       (Ident "pipelineId")
                                                       [])))
                                                    []))))))
                                              []))
                                            (:
                                             (BlockStmt
                                              (IfThen
                                               (BinOp
                                                (ExpName
                                                 (Name
                                                  (: (Ident "pipeline") [])))
                                                Equal
                                                (Lit Null))
                                               (StmtBlock
                                                (Block
                                                 (:
                                                  (BlockStmt
                                                   (Throw
                                                    (InstanceCreation
                                                     []
                                                     (TypeDeclSpecifier
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident
                                                          "IllegalArgumentException")
                                                         [])
                                                        [])))
                                                     (:
                                                      (BinOp
                                                       (BinOp
                                                        (Lit
                                                         (String
                                                          "pipeline with id ["))
                                                        Add
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "pipelineId")
                                                           []))))
                                                       Add
                                                       (Lit
                                                        (String
                                                         "] does not exist")))
                                                      [])
                                                     Nothing)))
                                                  [])))))
                                             (:
                                              (LocalVars
                                               []
                                               (RefType
                                                (ClassRefType
                                                 (ClassType
                                                  (:
                                                   ((,)
                                                    (Ident "List")
                                                    (:
                                                     (ActualType
                                                      (ClassRefType
                                                       (ClassType
                                                        (:
                                                         ((,) (Ident "P") [])
                                                         []))))
                                                     []))
                                                   []))))
                                               (:
                                                (VarDecl
                                                 (VarId (Ident "processors"))
                                                 (Just
                                                  (InitExp
                                                   (InstanceCreation
                                                    []
                                                    (TypeDeclSpecifierUnqualifiedWithDiamond
                                                     (Ident "ArrayList")
                                                     Diamond)
                                                    []
                                                    Nothing))))
                                                []))
                                              (:
                                               (BlockStmt
                                                (EnhancedFor
                                                 []
                                                 (RefType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,)
                                                      (Ident "Processor")
                                                      [])
                                                     []))))
                                                 (Ident "processor")
                                                 (MethodInv
                                                  (MethodCall
                                                   (Name
                                                    (:
                                                     (Ident "pipeline")
                                                     (:
                                                      (Ident
                                                       "flattenAllProcessors")
                                                      [])))
                                                   []))
                                                 (StmtBlock
                                                  (Block
                                                   (:
                                                    (BlockStmt
                                                     (IfThen
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "clazz")
                                                          (:
                                                           (Ident
                                                            "isAssignableFrom")
                                                           [])))
                                                        (:
                                                         (MethodInv
                                                          (MethodCall
                                                           (Name
                                                            (:
                                                             (Ident "processor")
                                                             (:
                                                              (Ident "getClass")
                                                              [])))
                                                           []))
                                                         [])))
                                                      (StmtBlock
                                                       (Block
                                                        (:
                                                         (BlockStmt
                                                          (ExpStmt
                                                           (MethodInv
                                                            (MethodCall
                                                             (Name
                                                              (:
                                                               (Ident
                                                                "processors")
                                                               (:
                                                                (Ident "add")
                                                                [])))
                                                             (:
                                                              (MethodInv
                                                               (MethodCall
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "clazz")
                                                                  (:
                                                                   (Ident
                                                                    "cast")
                                                                   [])))
                                                                (:
                                                                 (ExpName
                                                                  (Name
                                                                   (:
                                                                    (Ident
                                                                     "processor")
                                                                    [])))
                                                                 [])))
                                                              [])))))
                                                         [])))))
                                                    (:
                                                     (BlockStmt
                                                      (While
                                                       (InstanceOf
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "processor")
                                                           [])))
                                                        (ClassRefType
                                                         (ClassType
                                                          (:
                                                           ((,)
                                                            (Ident
                                                             "WrappingProcessor")
                                                            [])
                                                           []))))
                                                       (StmtBlock
                                                        (Block
                                                         (:
                                                          (LocalVars
                                                           []
                                                           (RefType
                                                            (ClassRefType
                                                             (ClassType
                                                              (:
                                                               ((,)
                                                                (Ident
                                                                 "WrappingProcessor")
                                                                [])
                                                               []))))
                                                           (:
                                                            (VarDecl
                                                             (VarId
                                                              (Ident
                                                               "wrappingProcessor"))
                                                             (Just
                                                              (InitExp
                                                               (Cast
                                                                (RefType
                                                                 (ClassRefType
                                                                  (ClassType
                                                                   (:
                                                                    ((,)
                                                                     (Ident
                                                                      "WrappingProcessor")
                                                                     [])
                                                                    []))))
                                                                (ExpName
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "processor")
                                                                   [])))))))
                                                            []))
                                                          (:
                                                           (BlockStmt
                                                            (IfThen
                                                             (MethodInv
                                                              (MethodCall
                                                               (Name
                                                                (:
                                                                 (Ident "clazz")
                                                                 (:
                                                                  (Ident
                                                                   "isAssignableFrom")
                                                                  [])))
                                                               (:
                                                                (MethodInv
                                                                 (PrimaryMethodCall
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "wrappingProcessor")
                                                                      (:
                                                                       (Ident
                                                                        "getInnerProcessor")
                                                                       [])))
                                                                    []))
                                                                  []
                                                                  (Ident
                                                                   "getClass")
                                                                  []))
                                                                [])))
                                                             (StmtBlock
                                                              (Block
                                                               (:
                                                                (BlockStmt
                                                                 (ExpStmt
                                                                  (MethodInv
                                                                   (MethodCall
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "processors")
                                                                      (:
                                                                       (Ident
                                                                        "add")
                                                                       [])))
                                                                    (:
                                                                     (MethodInv
                                                                      (MethodCall
                                                                       (Name
                                                                        (:
                                                                         (Ident
                                                                          "clazz")
                                                                         (:
                                                                          (Ident
                                                                           "cast")
                                                                          [])))
                                                                       (:
                                                                        (MethodInv
                                                                         (MethodCall
                                                                          (Name
                                                                           (:
                                                                            (Ident
                                                                             "wrappingProcessor")
                                                                            (:
                                                                             (Ident
                                                                              "getInnerProcessor")
                                                                             [])))
                                                                          []))
                                                                        [])))
                                                                     [])))))
                                                                [])))))
                                                           (:
                                                            (BlockStmt
                                                             (ExpStmt
                                                              (Assign
                                                               (NameLhs
                                                                (Name
                                                                 (:
                                                                  (Ident
                                                                   "processor")
                                                                  [])))
                                                               EqualA
                                                               (MethodInv
                                                                (MethodCall
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "wrappingProcessor")
                                                                   (:
                                                                    (Ident
                                                                     "getInnerProcessor")
                                                                    [])))
                                                                 [])))))
                                                            (:
                                                             (BlockStmt
                                                              (IfThen
                                                               (BinOp
                                                                (ExpName
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "wrappingProcessor")
                                                                   [])))
                                                                Equal
                                                                (ExpName
                                                                 (Name
                                                                  (:
                                                                   (Ident
                                                                    "processor")
                                                                   []))))
                                                               (StmtBlock
                                                                (Block
                                                                 (:
                                                                  (BlockStmt
                                                                   (Break
                                                                    Nothing))
                                                                  [])))))
                                                             []))))))))
                                                     []))))))
                                               (:
                                                (BlockStmt
                                                 (Return
                                                  (Just
                                                   (ExpName
                                                    (Name
                                                     (:
                                                      (Ident "processors")
                                                      []))))))
                                                []))))))))))
                                      (:
                                       (MemberDecl
                                        (MethodDecl
                                         (: Private (: Static []))
                                         []
                                         (Just
                                          (RefType
                                           (ClassRefType
                                            (ClassType
                                             (:
                                              ((,) (Ident "Pipeline") [])
                                              [])))))
                                         (Ident "substitutePipeline")
                                         (:
                                          (FormalParam
                                           []
                                           (RefType
                                            (ClassRefType
                                             (ClassType
                                              (:
                                               ((,) (Ident "String") [])
                                               []))))
                                           False
                                           (VarId (Ident "id")))
                                          (:
                                           (FormalParam
                                            []
                                            (RefType
                                             (ClassRefType
                                              (ClassType
                                               (:
                                                ((,)
                                                 (Ident
                                                  "ElasticsearchParseException")
                                                 [])
                                                []))))
                                            False
                                            (VarId (Ident "e")))
                                           []))
                                         []
                                         Nothing
                                         (MethodBody
                                          (Just
                                           (Block
                                            (:
                                             (LocalVars
                                              []
                                              (RefType
                                               (ClassRefType
                                                (ClassType
                                                 (:
                                                  ((,) (Ident "String") [])
                                                  []))))
                                              (:
                                               (VarDecl
                                                (VarId (Ident "tag"))
                                                (Just
                                                 (InitExp
                                                  (Cond
                                                   (MethodInv
                                                    (PrimaryMethodCall
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "e")
                                                         (:
                                                          (Ident
                                                           "getHeaderKeys")
                                                          [])))
                                                       []))
                                                     []
                                                     (Ident "contains")
                                                     (:
                                                      (Lit
                                                       (String "processor_tag"))
                                                      [])))
                                                   (MethodInv
                                                    (PrimaryMethodCall
                                                     (MethodInv
                                                      (MethodCall
                                                       (Name
                                                        (:
                                                         (Ident "e")
                                                         (:
                                                          (Ident "getHeader")
                                                          [])))
                                                       (:
                                                        (Lit
                                                         (String
                                                          "processor_tag"))
                                                        [])))
                                                     []
                                                     (Ident "get")
                                                     (: (Lit (Int 0)) [])))
                                                   (Lit Null)))))
                                               []))
                                             (:
                                              (LocalVars
                                               []
                                               (RefType
                                                (ClassRefType
                                                 (ClassType
                                                  (:
                                                   ((,) (Ident "String") [])
                                                   []))))
                                               (:
                                                (VarDecl
                                                 (VarId (Ident "type"))
                                                 (Just
                                                  (InitExp
                                                   (Cond
                                                    (MethodInv
                                                     (PrimaryMethodCall
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "e")
                                                          (:
                                                           (Ident
                                                            "getHeaderKeys")
                                                           [])))
                                                        []))
                                                      []
                                                      (Ident "contains")
                                                      (:
                                                       (Lit
                                                        (String
                                                         "processor_type"))
                                                       [])))
                                                    (MethodInv
                                                     (PrimaryMethodCall
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "e")
                                                          (:
                                                           (Ident "getHeader")
                                                           [])))
                                                        (:
                                                         (Lit
                                                          (String
                                                           "processor_type"))
                                                         [])))
                                                      []
                                                      (Ident "get")
                                                      (: (Lit (Int 0)) [])))
                                                    (Lit (String "unknown"))))))
                                                []))
                                              (:
                                               (LocalVars
                                                []
                                                (RefType
                                                 (ClassRefType
                                                  (ClassType
                                                   (:
                                                    ((,) (Ident "String") [])
                                                    []))))
                                                (:
                                                 (VarDecl
                                                  (VarId (Ident "errorMessage"))
                                                  (Just
                                                   (InitExp
                                                    (BinOp
                                                     (BinOp
                                                      (BinOp
                                                       (BinOp
                                                        (Lit
                                                         (String
                                                          "pipeline with id ["))
                                                        Add
                                                        (ExpName
                                                         (Name
                                                          (: (Ident "id") []))))
                                                       Add
                                                       (Lit
                                                        (String
                                                         "] could not be loaded, caused by [")))
                                                      Add
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "e")
                                                          (:
                                                           (Ident
                                                            "getDetailedMessage")
                                                           [])))
                                                        [])))
                                                     Add
                                                     (Lit (String "]"))))))
                                                 []))
                                               (:
                                                (LocalVars
                                                 []
                                                 (RefType
                                                  (ClassRefType
                                                   (ClassType
                                                    (:
                                                     ((,)
                                                      (Ident "Processor")
                                                      [])
                                                     []))))
                                                 (:
                                                  (VarDecl
                                                   (VarId
                                                    (Ident "failureProcessor"))
                                                   (Just
                                                    (InitExp
                                                     (InstanceCreation
                                                      []
                                                      (TypeDeclSpecifier
                                                       (ClassType
                                                        (:
                                                         ((,)
                                                          (Ident
                                                           "AbstractProcessor")
                                                          [])
                                                         [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (: (Ident "tag") [])))
                                                       [])
                                                      (Just
                                                       (ClassBody
                                                        (:
                                                         (MemberDecl
                                                          (MethodDecl
                                                           (:
                                                            (Annotation
                                                             (MarkerAnnotation
                                                              (Name
                                                               (:
                                                                (Ident
                                                                 "Override")
                                                                []))))
                                                            (: Public []))
                                                           []
                                                           (Just
                                                            (RefType
                                                             (ClassRefType
                                                              (ClassType
                                                               (:
                                                                ((,)
                                                                 (Ident
                                                                  "IngestDocument")
                                                                 [])
                                                                [])))))
                                                           (Ident "execute")
                                                           (:
                                                            (FormalParam
                                                             []
                                                             (RefType
                                                              (ClassRefType
                                                               (ClassType
                                                                (:
                                                                 ((,)
                                                                  (Ident
                                                                   "IngestDocument")
                                                                  [])
                                                                 []))))
                                                             False
                                                             (VarId
                                                              (Ident
                                                               "ingestDocument")))
                                                            [])
                                                           []
                                                           Nothing
                                                           (MethodBody
                                                            (Just
                                                             (Block
                                                              (:
                                                               (BlockStmt
                                                                (Throw
                                                                 (InstanceCreation
                                                                  []
                                                                  (TypeDeclSpecifier
                                                                   (ClassType
                                                                    (:
                                                                     ((,)
                                                                      (Ident
                                                                       "IllegalStateException")
                                                                      [])
                                                                     [])))
                                                                  (:
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "errorMessage")
                                                                      [])))
                                                                   [])
                                                                  Nothing)))
                                                               []))))))
                                                         (:
                                                          (MemberDecl
                                                           (MethodDecl
                                                            (:
                                                             (Annotation
                                                              (MarkerAnnotation
                                                               (Name
                                                                (:
                                                                 (Ident
                                                                  "Override")
                                                                 []))))
                                                             (: Public []))
                                                            []
                                                            (Just
                                                             (RefType
                                                              (ClassRefType
                                                               (ClassType
                                                                (:
                                                                 ((,)
                                                                  (Ident
                                                                   "String")
                                                                  [])
                                                                 [])))))
                                                            (Ident "getType")
                                                            []
                                                            []
                                                            Nothing
                                                            (MethodBody
                                                             (Just
                                                              (Block
                                                               (:
                                                                (BlockStmt
                                                                 (Return
                                                                  (Just
                                                                   (ExpName
                                                                    (Name
                                                                     (:
                                                                      (Ident
                                                                       "type")
                                                                      []))))))
                                                                []))))))
                                                          []))))))))
                                                  []))
                                                (:
                                                 (LocalVars
                                                  []
                                                  (RefType
                                                   (ClassRefType
                                                    (ClassType
                                                     (:
                                                      ((,) (Ident "String") [])
                                                      []))))
                                                  (:
                                                   (VarDecl
                                                    (VarId
                                                     (Ident "description"))
                                                    (Just
                                                     (InitExp
                                                      (BinOp
                                                       (BinOp
                                                        (Lit
                                                         (String
                                                          "this is a place holder pipeline, because pipeline with id ["))
                                                        Add
                                                        (ExpName
                                                         (Name
                                                          (: (Ident "id") []))))
                                                       Add
                                                       (Lit
                                                        (String
                                                         "] could not be loaded"))))))
                                                   []))
                                                 (:
                                                  (BlockStmt
                                                   (Return
                                                    (Just
                                                     (InstanceCreation
                                                      []
                                                      (TypeDeclSpecifier
                                                       (ClassType
                                                        (:
                                                         ((,)
                                                          (Ident "Pipeline")
                                                          [])
                                                         [])))
                                                      (:
                                                       (ExpName
                                                        (Name
                                                         (: (Ident "id") [])))
                                                       (:
                                                        (ExpName
                                                         (Name
                                                          (:
                                                           (Ident "description")
                                                           [])))
                                                        (:
                                                         (Lit Null)
                                                         (:
                                                          (InstanceCreation
                                                           []
                                                           (TypeDeclSpecifier
                                                            (ClassType
                                                             (:
                                                              ((,)
                                                               (Ident
                                                                "CompoundProcessor")
                                                               [])
                                                              [])))
                                                           (:
                                                            (ExpName
                                                             (Name
                                                              (:
                                                               (Ident
                                                                "failureProcessor")
                                                               [])))
                                                            [])
                                                           Nothing)
                                                          []))))
                                                      Nothing))))
                                                  [])))))))))))
                                       (:
                                        (MemberDecl
                                         (MemberClassDecl
                                          (ClassDecl
                                           (: Static [])
                                           (Ident "PipelineHolder")
                                           []
                                           Nothing
                                           []
                                           (ClassBody
                                            (:
                                             (MemberDecl
                                              (FieldDecl
                                               (: Final [])
                                               (RefType
                                                (ClassRefType
                                                 (ClassType
                                                  (:
                                                   ((,)
                                                    (Ident
                                                     "PipelineConfiguration")
                                                    [])
                                                   []))))
                                               (:
                                                (VarDecl
                                                 (VarId (Ident "configuration"))
                                                 Nothing)
                                                [])))
                                             (:
                                              (MemberDecl
                                               (FieldDecl
                                                (: Final [])
                                                (RefType
                                                 (ClassRefType
                                                  (ClassType
                                                   (:
                                                    ((,) (Ident "Pipeline") [])
                                                    []))))
                                                (:
                                                 (VarDecl
                                                  (VarId (Ident "pipeline"))
                                                  Nothing)
                                                 [])))
                                              (:
                                               (MemberDecl
                                                (ConstructorDecl
                                                 []
                                                 []
                                                 (Ident "PipelineHolder")
                                                 (:
                                                  (FormalParam
                                                   []
                                                   (RefType
                                                    (ClassRefType
                                                     (ClassType
                                                      (:
                                                       ((,)
                                                        (Ident
                                                         "PipelineConfiguration")
                                                        [])
                                                       []))))
                                                   False
                                                   (VarId
                                                    (Ident "configuration")))
                                                  (:
                                                   (FormalParam
                                                    []
                                                    (RefType
                                                     (ClassRefType
                                                      (ClassType
                                                       (:
                                                        ((,)
                                                         (Ident "Pipeline")
                                                         [])
                                                        []))))
                                                    False
                                                    (VarId (Ident "pipeline")))
                                                   []))
                                                 []
                                                 (ConstructorBody
                                                  Nothing
                                                  (:
                                                   (BlockStmt
                                                    (ExpStmt
                                                     (Assign
                                                      (FieldLhs
                                                       (PrimaryFieldAccess
                                                        This
                                                        (Ident
                                                         "configuration")))
                                                      EqualA
                                                      (MethodInv
                                                       (MethodCall
                                                        (Name
                                                         (:
                                                          (Ident "Objects")
                                                          (:
                                                           (Ident
                                                            "requireNonNull")
                                                           [])))
                                                        (:
                                                         (ExpName
                                                          (Name
                                                           (:
                                                            (Ident
                                                             "configuration")
                                                            [])))
                                                         []))))))
                                                   (:
                                                    (BlockStmt
                                                     (ExpStmt
                                                      (Assign
                                                       (FieldLhs
                                                        (PrimaryFieldAccess
                                                         This
                                                         (Ident "pipeline")))
                                                       EqualA
                                                       (MethodInv
                                                        (MethodCall
                                                         (Name
                                                          (:
                                                           (Ident "Objects")
                                                           (:
                                                            (Ident
                                                             "requireNonNull")
                                                            [])))
                                                         (:
                                                          (ExpName
                                                           (Name
                                                            (:
                                                             (Ident "pipeline")
                                                             [])))
                                                          []))))))
                                                    [])))))
                                               [])))))))
                                        []))))))))))))))))))))))))))))))))))))))
  []))
