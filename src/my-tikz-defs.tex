\usepackage{forest}

\usetikzlibrary{fit}
\usetikzlibrary{backgrounds}

\definecolor{forest-digems-constr}{RGB}{80,88,113}
\definecolor{forest-digems-change-bg}{RGB}{220,224,238}
\definecolor{forest-digems-metavar}{RGB}{171,72,46}
\definecolor{forest-digems-black}{RGB}{97,108,132}

\forestset{%
  default preamble={%
      for tree={text=forest-digems-constr, edge=forest-digems-black},
    },
  metavar/.style={%
      shape=rectangle,
      text=forest-digems-metavar,
      draw=forest-digems-black,
    },
  change/.style={%
    text=forest-digems-black,
    before typesetting nodes={%
      no edge,
      before computing xy={/pgf/inner ysep/.get=\savedinnerysep, l'=\savedinnerysep},
      replace by/.wrap pgfmath arg={%
        [\phantom{##1}, circle, append, fit=rectangle, no edge,
          before drawing tree={%
            tikz+={%
              \begin{scope}[on background layer]
                \node (n) [fill=forest-digems-change-bg, inner sep=\savedinnerysep, rounded corners, fit=(!1) (!L) (!F)] {} ;
                \path [draw=forest-digems-black, \forestoption{edge}] (!u.parent anchor) -- (n.north -| !1.child anchor)\forestoption{edge label};
              \end{scope}
            },
          },
        ]
      }{content()}
    },
  },
}
